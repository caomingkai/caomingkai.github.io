<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.6',
    sidebar: {"position":"right","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="All-trade Jack, loves full-stack">
<meta property="og:type" content="website">
<meta property="og:title" content="CMK">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="CMK">
<meta property="og:description" content="All-trade Jack, loves full-stack">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CMK">
<meta name="twitter:description" content="All-trade Jack, loves full-stack">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>CMK</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116541729-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116541729-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CMK</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Let's create something!</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
</li>

      

      
    </ul>
  

  
    

    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  


  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/04/杂记1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/04/杂记1/" itemprop="url">杂记1</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-04T14:12:55-08:00">2020-01-04</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一片真·杂记</p>
<h3 id="爱人要先懂得爱己"><a href="#爱人要先懂得爱己" class="headerlink" title="爱人要先懂得爱己"></a>爱人要先懂得爱己</h3><p>今天是 01/04/2020 了，借着大病初愈的机会去了一家参鸡汤馆，本来还有点发烧的我吃的满头大汗，老满足了。吃过好多家参鸡汤，这家的体验最佳，也可能是带病去吃的原因。</p>
<p>看了菜单后，参鸡汤和海鲜面看着都不错，可是我只带了自己，心想：so what？我都要吃！老板闪烁着眼光：are you sure？我坚定的跟他讲：对，两个菜都想尝尝。一勺一勺的喝着汤，感觉一直因咳嗽而敏感的嗓子渐渐被鸡汤温润，头里的混沌感也逐渐被热汤驱逐，心里不由想到以前还不是一个人的时候，如果对方感冒了，我不见得会想到给她买参鸡汤喝，这估计是那句“多喝水”惹人烦的原因。毕竟，参鸡汤比起干巴巴的水更容易喝。</p>
<p>这次感冒也让我再一次认识到了感同身受的困难。以前女朋友感冒，我会想要是我自己感冒了呢？我妈一般会做溏心煎蛋给我吃，然而感冒时我不喜欢吃。。。记忆里多喝水却实实在在的会让感冒好的快一些。又因为我很少生病，“感同身受”到“多喝水”这一步就可耻的结束了。“多喝水”的确有用，但这种常识性的关心单薄了些。感同身受也是好事，但是要基于自身经历或者习得经历而来。所以说男女同胞们，下次对象感冒了，直接拎着参鸡汤过去就好，省的你再感同身受一番，保证吃的他/她热泪盈眶，抱着大腿不让走。</p>
<h3 id="重头再来"><a href="#重头再来" class="headerlink" title="重头再来"></a>重头再来</h3><p>这一场跨年、历经5天的风寒感冒是4年多来的第一次，体验了一把“病来如山倒，病去如抽丝”。有可能是因为去补牙免疫力低了，也有可能是那天可以感受到天气的变凉，也有可能是自己处于精神低谷多天，想让身体也一起陪伴然后开机重启，都有可能。多事之秋的2019年：来到了心仪的新东家，结束了不到一年的恋爱，也目睹了身边人的起伏。有很多收获领悟，也有很多难过愧疚，路看起来不容易走，但我相信所做的决定和发生的事情都是合理的、正确的。</p>
<p>最有感悟也是让自己失败惨痛的一个教训，是那个看似没有什么问题的思想：找到合适的人结婚。</p>
<p>我的恋爱失败问题出在了“合适”上。</p>
<p>这种“寻找”的方式从一开始就会不断做对比，从而也使两颗心一开始就不在一起。又因为这种“寻找合适的人”的想法其实就像在一个果园里挑苹果，永远不可能知道遇到的那个苹果是最大的，因此这种思想注定了恋爱的失败。与其对应的另一种思想不是“按自己的标准去爱”，而是“按自己的直觉去爱”，这种思想带来的是“包容”甚至飞蛾扑火般的觉悟，与“按标准”去“寻找”所带来的比较、挑剔恰恰相反。</p>
<p>按自己的标准去爱，会产生挑剔，是在知晓这个关系所带来的幸福的同时，拿它与对方的不同做对比。出发点是功利的评判，心不在一起，会越来越坏。</p>
<p>按自己的直觉去爱，会产生包容。在享受这个关系所带来的幸福的同时，接纳尊重对方的不同。出发点是心在一起，会越来越好。</p>
<p>新的一年，希望心情慢慢恢复，打扫干净，重新再来。</p>
<h3 id="欣赏对方：爱情应该是让你更爱你自己"><a href="#欣赏对方：爱情应该是让你更爱你自己" class="headerlink" title="欣赏对方：爱情应该是让你更爱你自己"></a>欣赏对方：爱情应该是让你更爱你自己</h3><h3 id="幸福的源泉应该在自己身上：ta会让我逐渐干枯么？"><a href="#幸福的源泉应该在自己身上：ta会让我逐渐干枯么？" class="headerlink" title="幸福的源泉应该在自己身上：ta会让我逐渐干枯么？"></a>幸福的源泉应该在自己身上：ta会让我逐渐干枯么？</h3><h3 id="管理时间、质量生活"><a href="#管理时间、质量生活" class="headerlink" title="管理时间、质量生活"></a>管理时间、质量生活</h3><h3 id="解放天性：畅游人间"><a href="#解放天性：畅游人间" class="headerlink" title="解放天性：畅游人间"></a>解放天性：畅游人间</h3>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/15/Houzz Front End Interview preps/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/15/Houzz Front End Interview preps/" itemprop="url">Houzz front end interview prep</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-15T19:39:43-08:00">2019-12-15</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="I-Ways-to-improve-website-performance"><a href="#I-Ways-to-improve-website-performance" class="headerlink" title="I. Ways to improve website performance"></a>I. Ways to improve website performance</h3><ul>
<li><p>Minimize HTTP Requests</p>
<p>Too many external files in <code>&lt;head&gt;</code> will cause slow loading, we can</p>
<ul>
<li>combine all <code>*.js</code> to a file, <code>*.css</code> to a file</li>
<li>use <strong>css spirit</strong></li>
</ul>
</li>
<li><p>CDN, putting static files over the world</p>
</li>
<li><p>Reduce image size</p>
<ol>
<li>change resolution</li>
<li>compress the image</li>
<li>crop the picture</li>
</ol>
</li>
<li><p>Put <code>&lt;script&gt;</code> on bottom</p>
</li>
<li><p>use <code>async</code> and <code>defer</code> keywords to load js script</p>
</li>
<li><p>Add <code>expires</code> and <code>Cache-control</code> in response Header</p>
</li>
<li><p>Gzip</p>
</li>
<li><p>Put <code>&lt;style&gt;</code> on top, for progressive rendering</p>
</li>
<li><p>Minify JavaScript and CSS</p>
</li>
<li><p>Avoid Redirects</p>
</li>
<li><p>Reduce the Number of DOM Elements</p>
</li>
<li><p>Minimize DOM Access</p>
</li>
<li><p>Avoid Empty Image src</p>
</li>
</ul>
<h3 id="II-Cookie"><a href="#II-Cookie" class="headerlink" title="II.  Cookie"></a>II.  Cookie</h3><p>HTTP is stateless. The server cannot recognize a visitor after he visits. But we have needs to be able to know the visitor when he visits next time:</p>
<ol>
<li><strong><u>Personalization:</u></strong> next time we show him related info, based on his first visits</li>
<li><strong><u>Session management</u></strong>: after user login, we don’t let him keep logging in when access sensitive data</li>
<li><u><strong>Tracking:</strong></u> analyzing user behavior, like how many time clicks on which section on the page</li>
</ol>
<h3 id="III-Session"><a href="#III-Session" class="headerlink" title="III. Session"></a>III. Session</h3><p>Session is <u>server-side</u> storage, used to store recent user information, in order to keep a live conversation. Work with </p>
<ol>
<li>Cookie: store the <code>sessionId</code> in cookie. Every browser bring this ID card when converse with server</li>
<li>Database: if there is too much info, need to store info in Database, like <strong><u>Redis</u></strong></li>
</ol>
<h3 id="VI-Cache-vs-Cookie"><a href="#VI-Cache-vs-Cookie" class="headerlink" title="VI. Cache vs Cookie"></a>VI. Cache vs Cookie</h3><p>Although cookies and cache are two ways to store data on client’s machine, but there are difference between cache and cookies and they serve different purposes.</p>
<ol>
<li>Cookie is used to store information to track different characteristics related to user, while cache is used to make the loading of web pages faster.</li>
<li>Cookies stores information such as user preferences, while cache will keep resource files such as audio, video or flash files.</li>
<li>Typically, <u>cookies expire</u> after some time, but cache is kept in the client’s machine until they are removed manually by the user.</li>
</ol>
<h3 id="V-What-happens-when-we-visit-Google-com"><a href="#V-What-happens-when-we-visit-Google-com" class="headerlink" title="V. What happens when we visit Google.com?"></a>V. What happens when we visit Google.com?</h3><ol>
<li>Check if cached already, if so, reload cache content directly</li>
<li>If no cache, then convert the domain name to IP, recursive DNS look up:<ul>
<li>browser cache</li>
<li>OS cache</li>
<li>router cache</li>
<li>ISP cache</li>
<li>recursive DNS lookup</li>
</ul>
</li>
<li>Browser get the IP, and wrap http payload inside TCP packet, and then to even lower layer, pass to router to the Server</li>
<li>Build up the TCP connect</li>
<li>Browser sends HTTP request to Server</li>
<li>Server send HTTP response with meta info in header to Browser</li>
<li>Browser receives the response header and content<ul>
<li>store cookie, and cache css or js</li>
<li>render the DoOM tree, CSS-OMTree</li>
<li>run JavaScript</li>
<li>Create Render tree</li>
<li>generate Layout</li>
<li>painting</li>
</ul>
</li>
<li>Browser keep request external js/ css file from Server, keeps render</li>
</ol>
<h3 id="VI-Positioning-of-Elements"><a href="#VI-Positioning-of-Elements" class="headerlink" title="VI. Positioning of Elements"></a>VI. Positioning of Elements</h3><p><a href="https://juejin.im/post/5b52dec0f265da0fa21a8242" target="_blank" rel="noopener">https://juejin.im/post/5b52dec0f265da0fa21a8242</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/25455672" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25455672</a></p>
<ol>
<li>offsetTop</li>
<li>scrollTop</li>
<li>clientHeight</li>
<li></li>
</ol>
<h3 id="VII-Throttle-amp-Debounce"><a href="#VII-Throttle-amp-Debounce" class="headerlink" title="VII. Throttle &amp; Debounce"></a>VII. Throttle &amp; Debounce</h3><p><a href="https://juejin.im/post/5b52dec0f265da0fa21a8242" target="_blank" rel="noopener">https://juejin.im/post/5b52dec0f265da0fa21a8242</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/25455672" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/25455672</a></p>
<h3 id="VIII-Algorithm"><a href="#VIII-Algorithm" class="headerlink" title="VIII. Algorithm"></a>VIII. Algorithm</h3><ol>
<li><p><strong><u>分解质因数，比如给一个数20</u></strong><br>输出：<br>20 = 2 <em> 2 </em> 5<br>11 = 11<br>followup：<br>输出 20 = 2^2 <em> 5<br>followup2：<br>反过来输出： 20 = 5 </em> 2^2</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> t1 = <span class="number">20</span></span><br><span class="line"><span class="keyword">let</span> t2 = <span class="number">7</span></span><br><span class="line"><span class="keyword">let</span> t3 = <span class="number">81</span></span><br><span class="line"><span class="keyword">let</span> t4 = <span class="number">0</span></span><br><span class="line"><span class="built_in">console</span>.log(factors(t1))</span><br><span class="line"><span class="built_in">console</span>.log(factors(t2))</span><br><span class="line"><span class="built_in">console</span>.log(factors(t3))</span><br><span class="line"><span class="built_in">console</span>.log(factors(t4))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">factors</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n===<span class="literal">null</span> || <span class="built_in">isNaN</span>(n) || n===<span class="number">0</span> || !<span class="built_in">Number</span>.isInteger(n)) </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Error</span>(<span class="string">"Valid Expected"</span>)</span><br><span class="line">    <span class="keyword">if</span>( n === <span class="number">1</span> ) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>( n%<span class="number">2</span> === <span class="number">0</span> )&#123;</span><br><span class="line">        res.push(<span class="number">2</span>)</span><br><span class="line">        n /= <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">3</span>; i*i&lt;=n; i+=<span class="number">2</span> )&#123;</span><br><span class="line">        <span class="keyword">while</span>(n%i===<span class="number">0</span>)&#123;</span><br><span class="line">            res.push(i)</span><br><span class="line">            n /= i</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(n&gt;<span class="number">1</span>) res.push(n)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> str = <span class="string">''</span></span><br><span class="line">    <span class="keyword">let</span> cnt = <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> prev = res[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">1</span>; i &lt; res.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">if</span>(res[i] !== prev)&#123;</span><br><span class="line">            <span class="keyword">if</span>(cnt&gt;<span class="number">1</span>) str += prev+<span class="string">'^'</span>+cnt+<span class="string">'*'</span></span><br><span class="line">            <span class="keyword">else</span>      str += prev+<span class="string">'*'</span></span><br><span class="line">            cnt=<span class="number">1</span></span><br><span class="line">            prev = res[i]</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            cnt++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(cnt&gt;<span class="number">1</span>) str += prev+<span class="string">'^'</span>+cnt</span><br><span class="line">    <span class="keyword">else</span>      str += prev</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>一个字符串的list，输出其中有<strong>anagram</strong>的字符串。类似leetcode 49，很快最好一遍编译过</p>
<p>Followup: Print lists according to the input order</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> test1 = [<span class="string">"eat"</span>, <span class="string">"tea"</span>, <span class="string">"tan"</span>, <span class="string">"ate"</span>, <span class="string">"nat"</span>, <span class="string">"bat"</span>]</span><br><span class="line"><span class="keyword">let</span> test2 = [<span class="string">"eat"</span>, <span class="string">"tan"</span>, <span class="string">"bat"</span>]</span><br><span class="line"><span class="keyword">let</span> test3 = []</span><br><span class="line"><span class="built_in">console</span>.log(anagrams(test1))</span><br><span class="line"><span class="built_in">console</span>.log(anagrams(test2))</span><br><span class="line"><span class="built_in">console</span>.log(anagrams(test3))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">anagrams</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    arr.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> p = mapping(item)</span><br><span class="line">        <span class="keyword">if</span>(!map.has(p))&#123;</span><br><span class="line">            map.set(p,[])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> list = map.get(p)</span><br><span class="line">        list.push(item)</span><br><span class="line">        map.set(p, list)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    map.forEach(<span class="function"><span class="params">val</span>=&gt;</span>&#123;</span><br><span class="line">        res.push(val)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapping</span>(<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">256</span>).fill(<span class="string">"-"</span>)</span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> index = str.charCodeAt(i)</span><br><span class="line">        res[index] = <span class="string">'+'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.join(<span class="string">''</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Largest rectangle in histogram</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number[]&#125; heights</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> largestRectangleArea = <span class="function"><span class="keyword">function</span>(<span class="params">heights</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(heights === <span class="literal">null</span> || heights.length === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span>(heights.length === <span class="number">1</span>) <span class="keyword">return</span> heights[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> rightFirstSmallerIndices = FirstSmallerIndices(heights, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">let</span> leftFirstSmallerIndices = FirstSmallerIndices(heights, <span class="literal">false</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; heights.length; i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> idLeft = leftFirstSmallerIndices[i]</span><br><span class="line">        <span class="keyword">let</span> idRight = rightFirstSmallerIndices[i]</span><br><span class="line">        res = <span class="built_in">Math</span>.max(res, heights[i]*(idRight-idLeft<span class="number">-1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FirstSmallerIndices</span>(<span class="params">arr, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(arr.length)</span><br><span class="line">    <span class="keyword">let</span> ids = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,id</span>)=&gt;</span>id)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(!right)&#123; </span><br><span class="line">        res = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(<span class="number">-1</span>)</span><br><span class="line">        ids = ids.map(<span class="function">(<span class="params">_,id</span>)=&gt;</span>arr.length-id<span class="number">-1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> stack = []</span><br><span class="line">    stack.push(ids[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i&lt;ids.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> id = ids[i]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(arr[stack[stack.length<span class="number">-1</span>]] &gt; arr[id])&#123;</span><br><span class="line">            <span class="keyword">let</span> topId = stack.pop()</span><br><span class="line">            res[topId] = id</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(id)                                                  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LC 85/ 845</p>
<p>不一样的是in addition要给出长方形的坐标，例如左上角点的坐标 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;character[][]&#125; matrix</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> maximalRectangle = <span class="function"><span class="keyword">function</span>(<span class="params">matrix</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(matrix === <span class="literal">null</span> || matrix.length === <span class="number">0</span> || matrix[<span class="number">0</span>].length === <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> r = matrix.length</span><br><span class="line">    <span class="keyword">let</span> c = matrix[<span class="number">0</span>].length</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; r; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> j = <span class="number">0</span>; j &lt; c; j++ )&#123;</span><br><span class="line">            <span class="keyword">if</span>(i<span class="number">-1</span>&gt;=<span class="number">0</span> &amp;&amp; matrix[i][j]===<span class="string">"1"</span> ) &#123;</span><br><span class="line">                matrix[i][j] = <span class="built_in">Number</span>(matrix[i][j])+<span class="built_in">Number</span>(matrix[i<span class="number">-1</span>][j])</span><br><span class="line">            &#125;<span class="keyword">else</span> </span><br><span class="line">                matrix[i][j] = <span class="built_in">Number</span>(matrix[i][j])</span><br><span class="line">        &#125;</span><br><span class="line">        res = <span class="built_in">Math</span>.max(res, largestRectangleArea(matrix[i]))</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">largestRectangleArea</span>(<span class="params">heights</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(heights === <span class="literal">null</span> || heights.length === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span>(heights.length === <span class="number">1</span>) <span class="keyword">return</span> heights[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> rightFirstSmallerIndices = FirstSmallerIndices(heights, <span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">let</span> leftFirstSmallerIndices = FirstSmallerIndices(heights, <span class="literal">false</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; heights.length; i++)&#123;</span><br><span class="line">        <span class="keyword">let</span> idLeft = leftFirstSmallerIndices[i]</span><br><span class="line">        <span class="keyword">let</span> idRight = rightFirstSmallerIndices[i]</span><br><span class="line">        res = <span class="built_in">Math</span>.max(res, heights[i]*(idRight-idLeft<span class="number">-1</span>))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FirstSmallerIndices</span>(<span class="params">arr, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(arr.length)</span><br><span class="line">    <span class="keyword">let</span> ids = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,id</span>)=&gt;</span>id)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(!right)&#123; </span><br><span class="line">        res = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length).fill(<span class="number">-1</span>)</span><br><span class="line">        ids = ids.map(<span class="function">(<span class="params">_,id</span>)=&gt;</span>arr.length-id<span class="number">-1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> stack = []</span><br><span class="line">    stack.push(ids[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">1</span>; i&lt;ids.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> id = ids[i]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(arr[stack[stack.length<span class="number">-1</span>]] &gt; arr[id])&#123;</span><br><span class="line">            <span class="keyword">let</span> topId = stack.pop()</span><br><span class="line">            res[topId] = id</span><br><span class="line">        &#125;</span><br><span class="line">        stack.push(id)                                                  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>fisher-yates shuffle</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = arr.length</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> randId = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * n)</span><br><span class="line">        <span class="keyword">let</span> temp = arr[randId]</span><br><span class="line">        arr[randId] = arr[n<span class="number">-1</span>]</span><br><span class="line">        arr[n<span class="number">-1</span>] = temp</span><br><span class="line">        n--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">shuffle([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>])</span><br></pre></td></tr></table></figure>
</li>
<li><p>LC 304 range sum query - immutab</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumMatrix</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[][] dp;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumMatrix</span><span class="params">(<span class="keyword">int</span>[][] matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(   matrix           == <span class="keyword">null</span></span><br><span class="line">           || matrix.length    == <span class="number">0</span></span><br><span class="line">           || matrix[<span class="number">0</span>].length == <span class="number">0</span>   )&#123;</span><br><span class="line">            <span class="keyword">return</span>;   </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> m = matrix.length;</span><br><span class="line">        <span class="keyword">int</span> n = matrix[<span class="number">0</span>].length;</span><br><span class="line"></span><br><span class="line">        dp = <span class="keyword">new</span> <span class="keyword">int</span>[m + <span class="number">1</span>][n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)&#123;</span><br><span class="line">                dp[i][j] = dp[i - <span class="number">1</span>][j] + dp[i][j - <span class="number">1</span>] -dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + matrix[i - <span class="number">1</span>][j - <span class="number">1</span>] ;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">sumRegion</span><span class="params">(<span class="keyword">int</span> row1, <span class="keyword">int</span> col1, <span class="keyword">int</span> row2, <span class="keyword">int</span> col2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> iMin = Math.min(row1, row2);</span><br><span class="line">        <span class="keyword">int</span> iMax = Math.max(row1, row2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> jMin = Math.min(col1, col2);</span><br><span class="line">        <span class="keyword">int</span> jMax = Math.max(col1, col2);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[iMax + <span class="number">1</span>][jMax + <span class="number">1</span>] - dp[iMax + <span class="number">1</span>][jMin] - dp[iMin][jMax + <span class="number">1</span>] + dp[iMin][jMin];    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your NumMatrix object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * NumMatrix obj = new NumMatrix(matrix);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.sumRegion(row1,col1,row2,col2);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>LC 380 insertDeleteGetRandomO(1)</p>
</li>
<li><p>LC 162 find peak element</p>
</li>
<li><p>// Given multiple lists, each list contains few integer numbers</p>
<p>// We want to get all the possible combinations within those lists, with the following condition:</p>
<p>// <strong><em> one combination should contain one and at MOST one element from each list </em></strong></p>
</li>
</ol>
<p>   // Example: input =&gt; [[1,2], [3,4]]</p>
<p>   // output = [[1, 3], [1, 4], [2, 3], [2, 4]]  // 8</p>
<p>   要求用两种方法，都先排序，一个是用Index判断去重，还有一个是用set判断去重</p>
<p>   问了时间空间复杂度，最好和最坏情况</p>
<ol start="10">
<li><p><strong>输入”rft567.908kih000000hh890jug678gtff567”这样包含字母和数字的字符串，找到出线次数最多的数字，print “567 shows two time”。</strong></p>
</li>
<li><p><strong>asdbf-12.456.1asdf12.343.232这样的话，应该返回什么呢？</strong></p>
</li>
<li><p>matrix binary search 用两个二分和一个二分分别实现了下，时间复杂度都是O(logm + logn),</p>
</li>
<li><p>打印树，给一个节点，打印出树的graph</p>
</li>
<li><p>longest increasing subsequence</p>
</li>
<li><p><strong>(2019) Minimum window subsequence</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; S</span></span><br><span class="line"><span class="comment"> * @param &#123;string&#125; T</span></span><br><span class="line"><span class="comment"> * @return &#123;string&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> minWindow = <span class="function"><span class="keyword">function</span>(<span class="params">S, T</span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> minLen = S.length + <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> minLeft = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span>( i &lt; S.length )&#123;</span><br><span class="line">        <span class="keyword">if</span>( S[i] === T[j] )&#123;</span><br><span class="line">            <span class="keyword">if</span>( j===T.length<span class="number">-1</span> )&#123;</span><br><span class="line">                <span class="keyword">let</span> end = i</span><br><span class="line">                <span class="keyword">while</span>( j &gt;= <span class="number">0</span> )&#123;</span><br><span class="line">                    <span class="keyword">while</span>( S[i] !== T[j] ) i--</span><br><span class="line">                    i--</span><br><span class="line">                    j--</span><br><span class="line">                &#125;</span><br><span class="line">                i++</span><br><span class="line">                <span class="keyword">if</span>(minLen &gt; end-i+<span class="number">1</span>)&#123;</span><br><span class="line">                    minLen = end-i+<span class="number">1</span></span><br><span class="line">                    minLeft = i</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            j++</span><br><span class="line">        &#125;</span><br><span class="line">        i++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minLen===S.length + <span class="number">1</span> ? <span class="string">''</span> : S.slice(minLeft, minLeft+minLen)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>LCA of deepest leaf nodes in a binary tree</p>
</li>
<li><p><strong>8位String的生成器，要求在A-Z，a-z，0-9，%$&amp;#里挑，每组至少选一个</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	1. which digit use which group of character</span></span><br><span class="line"><span class="comment">	2. a method to randomly get a char from its group</span></span><br><span class="line"><span class="comment">	3. fasher-yate shuffle</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UPPERCASE = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">26</span>).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,index</span>)=&gt;</span><span class="built_in">String</span>.fromCharCode(index+<span class="number">65</span>))</span><br><span class="line"><span class="keyword">const</span> LOWERCASE = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">26</span>).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,index</span>)=&gt;</span><span class="built_in">String</span>.fromCharCode(index+<span class="number">97</span>))</span><br><span class="line"><span class="keyword">const</span> NUMBER = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,index</span>)=&gt;</span>index)</span><br><span class="line"><span class="keyword">const</span> SYMBOL = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">14</span>).fill(<span class="number">0</span>).map(<span class="function">(<span class="params">_,index</span>)=&gt;</span><span class="built_in">String</span>.fromCharCode(index+<span class="number">33</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ARRAY = [UPPERCASE, LOWERCASE, NUMBER, SYMBOL]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generate</span> (<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; ARRAY.length; i++)</span><br><span class="line">        res.push(getOne(ARRAY, i))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n-ARRAY.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> type = <span class="built_in">Math</span>.floor( (<span class="built_in">Math</span>.random() * ARRAY.length) )</span><br><span class="line">        res.push(getOne(ARRAY, type))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> shuffle(res).join(<span class="string">''</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getOne</span>(<span class="params">ARRAY, type</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len = ARRAY[type].length</span><br><span class="line">    <span class="keyword">let</span> rand = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*len)</span><br><span class="line">    <span class="keyword">return</span> ARRAY[type][rand]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shuffle</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n = arr.length</span><br><span class="line">    <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">let</span> rand = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random*n)</span><br><span class="line">        <span class="keyword">let</span> temp = arr[rand]</span><br><span class="line">        arr[rand] = arr[n<span class="number">-1</span>]</span><br><span class="line">        arr[n<span class="number">-1</span>] = temp</span><br><span class="line">        n--</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(generate(<span class="number">8</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>(2019)列车时刻表</strong><br><strong>A B 1000 1130 （A 到 B，10：00出发， 11：30到达 ）</strong><br><strong>B C 1200 1230</strong><br><strong>A C 1100 1250</strong></p>
<p><strong>求 A 到 C: 1) 最早到达的时间，输出大概是“A C 1000 1230”。 2)若有多条线路同时到达，求最晚出发的列车schedule，输出格式和第一问一样。</strong></p>
<p><a href="https://www.1point3acres.com/bbs/thread-460017-1-1.html" target="_blank" rel="noopener">https://www.1point3acres.com/bbs/thread-460017-1-1.html</a></p>
</li>
<li><p>基本上跟 LC 上面 <u>walls and gates</u> 很像，但是有一个agent （起点）和 several goals (终点) 问能不能从一个起点到达所有终点。<br>矩阵类似这样：<br>0 0 0 1 1 1<br>A 1 0 1 G 1<br>1 0 G 0 1 1<br>1 0 0 1 0 1</p>
<p>我用recursion写出来然后各种检查typo。最后还是被白人小哥嘲笑worlds打成world。<br>还有我更改了矩阵内容0-&gt;1，被不允许</p>
</li>
<li><p>(<em>2018-12-6</em>) sqrt(n)，最开始我说用brute-force从0到result找，然后刚想说优化用binary search，面试官就表示，如果我的输入是double，怎么办？所以最终的问题变成sqrt(double n, double delta)，需要输出一个在[result-delta, result+delta]范围内的任意一个值，然后其实还是binary search来做。最后还有个bug，这里处理得不是很好，感觉面试官有点儿不高兴，唉。。。然后分析了下时间复杂度，问了问问题，就结束了。。</p>
</li>
<li><p>(<em>2018-12-6</em>)题目是，给两个二叉树s和t，需要判断t是否是s的某一个subtree。<br>先说了brute-force的方法，然后分析了一下时间复杂度，然后开始优化，当时直觉是用inorder-traverse转化成string来做，但是最开始中间还是有bug，例如<br>​       1               2<br>​     /   \               \<br>   2     3  和          1，  如果仅仅考虑inorder的情况，显然是不对了。</p>
<p>幸好大哥给了点提示，然后顺利写出代码，中间有些小bug，在跑了俩test case后就知道问题所在，然后改完就ok了。大哥人真的很nice，面试体验很棒，后面还跟我介绍了很多他们组的情况以及houzz。</p>
</li>
<li><p>top k visited website this day </p>
<p>this is typical  top k . you  can create a list of  {3, [web1, web2] } , { 2, [web 3 , web 4] }  3 stands for the visited time and  web 1 &amp; web 2 stands for the websites . and then you can do the traversal to find the  proper results. thanks</p>
</li>
<li><p>完全背包， 刚开始理解成了01背包，后来发现他想要完全背包， 反正两种都写了</p>
</li>
<li><p>给出一个arr, 如[0,1,0,1,0]，每个1就是一个发电厂，然后给出一个range，比如是2，就是说每个发电厂能cover前后range为2的距离，然后求需要的发电厂的最少数。e.g. [1,1,0], range 为 1 -&gt; [0,1,0]</p>
<p>给的arr里面有1和0，但是最后输出的arr 要把其中某些1变成0，（不知0能否变成1？）从而达到最少数的发电厂</p>
<p><a href="http://www.cs.toronto.edu/~jepson/csc373/tutNotes/cellTower.pdf" target="_blank" rel="noopener">http://www.cs.toronto.edu/~jepson/csc373/tutNotes/cellTower.pdf</a></p>
<p>Course Schedule III</p>
<p><a href="https://leetcode.com/problems/heaters/description/" target="_blank" rel="noopener">https://leetcode.com/problems/heaters/description/</a> </p>
</li>
<li><p><strong>LC 65 Valid Number</strong></p>
<p><strong>valid number那道题</strong><br><strong>“12.3459” -&gt; 12.3459</strong><br><strong>“   12.3459   “ -&gt; 12.3459</strong><br><strong>“12.3  459” -&gt; Exception</strong><br><strong>“1 2.3459” -&gt; Exception</strong><br><strong>“12.34x59” -&gt; Exception</strong><br><strong>“12.34.59” -&gt; Exception</strong><br>e.g. “+.34” -&gt; 0.34<br>e.g. “-1.234” -&gt; -1.234这题感觉之前面经没一个说明白详细的。第一，只能扫一遍，trim都不可以用，第二，不能用valueOf这种函数，parse转化不可以。也就是说，只能硬扫记录硬来，不能用stringbuilder去存去做。这题面之前就写了，但没想到限制的这么硬，虽然和lc65差了个e，但难度基本一样。</p>
</li>
<li><p>design calendar class  有 day year month  实现 add (days) return  calendar、、</p>
</li>
<li><p>add(num1, num2) 不能用加号。</p>
</li>
<li><p>Merge k sorted arrays</p>
</li>
<li><p>Design Twitter</p>
</li>
<li><p>find median of two sorted array,</p>
</li>
<li><p><strong>LC 85 Maximal Rectangle</strong>，一个变化是要求最后返回一个maximal rectangle的identifier。 (需要给用到stack的那个解法 )</p>
</li>
<li><p><strong>设计题，要求返回twitter在过去24小时里最popular的10个单词（任何string）</strong></p>
</li>
<li><p>String Permutation I, Follow Up String Permutation II.<br>都秒了，</p>
</li>
<li><p>Longest Incresing Subsequence.</p>
</li>
<li><p>强制用JavaScript写一个方法，把一句话中所有的word转换成第一个字符大写的word</p>
</li>
<li><p>LC 227 但是有括号也要考虑。</p>
</li>
<li><p>print a given source to a destination</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> adjList = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">    [<span class="number">3</span>],</span><br><span class="line">    [<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">    []</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="number">2</span>, t = <span class="number">3</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAllPaths</span>(<span class="params">adjList, s, t</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">let</span> visited = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">    dfs(s, [])</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">nodeId, prefix</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nodeId === t)&#123;</span><br><span class="line">            res.push([...prefix, nodeId])</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> children = adjList[nodeId]</span><br><span class="line">        visited.add(nodeId)</span><br><span class="line">        children.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited.has(item))</span><br><span class="line">            	dfs(item, [...prefix, nodeId])</span><br><span class="line">        &#125;)</span><br><span class="line">        visited.delete(nodeId)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getAllPaths(adjList, s, t))</span><br></pre></td></tr></table></figure>
</li>
<li><p>traverse the graph</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> adjList = [</span><br><span class="line">    [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">    [<span class="number">3</span>],</span><br><span class="line">    [<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">    []</span><br><span class="line">]</span><br><span class="line"><span class="keyword">let</span> s1 = <span class="number">0</span></span><br><span class="line"><span class="comment">// console.log(traverse(adjList, s1))</span></span><br><span class="line"><span class="keyword">let</span> s2 = <span class="number">2</span></span><br><span class="line"><span class="comment">// console.log(traverse(adjList, s2))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverse</span>(<span class="params">adjList, s</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> visited = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    dfs(s)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">        res.push(n)</span><br><span class="line">        visited.add(n)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> children = adjList[n]</span><br><span class="line">        children.forEach(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited.has(item))&#123;</span><br><span class="line">                dfs(item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>数字恩，假设这是一个 恩乘恩 的正方形单元网格，给一个圆，半径以及圆心点坐标，求有多少小格子完全在园内？  不依不饶： 有没有 欧恩的解法？</p>
<p>根据圆的坐标很容易找到第一个格子，其部分顶点包含在园内，部分在圆外。以这个格子为起始做dfs，找出所有类似的格子，（这些格子全在圆的边界上）。那么所有有相同x坐标的格子，y坐标差减一就是这两个格子之间一定在园内的格子数。这样traverse by x坐标，累积的y坐标差应该就是在园内的格子数。<br>欢迎大家补充更优解！！</p>
<p>圆心，半径都是浮点数。我觉得楼上那位同学说的比我的解法好。扫描经过圆心的直径，根据纵坐标算夹在圆内的格子，这样应该是O(n)，  比如，圆心是x = 3.4， y = - 3   半径  5.5， 那么从， Math.max(0, ceilling(x - r)) 一直扫描到  Math.min(n - 1, floor(x + r)).   对每个 x’,  x’ + 1  算有多少格子在园内，格子数的和即为最后园内格子数。   </p>
<p>(x - 3.4)^2 + (y + 3)^2 = 5.5^2   带入 x’  以及 x’ + 1, 得到y的上界yUp y’Up，下界 ydown, y’down， 格子数就是，Floor(Math.min(yUp, y’Up, n)) - ceilling(Math.max(ydown, y’down, 0)),       </p>
<p><a href="https://www.1point3acres.com/bbs/forum.php?mod=redirect&amp;goto=findpost&amp;pid=3435264&amp;ptid=314884" target="_blank" rel="noopener">Shell_Smith 发表于 2018-1-18 09:01</a><br>不是，如果说n是1的话，那么就有（0，0）（0，1）（1，0）（1，1）四个点围成一个正方形，这个正方形所有 …<br>假设圆心是(x0, y0)，半径是r的话，把圆分成左右两半分别计算即可：<br>对于右边一半，遍历 x = x0 + 1, …, x0 + r，对每个x，计算对应的圆上的y值 yt 和 yb，那么横坐标是x且在圆内的点的个数是 floor(yt) - floor(yb)，一旦x到网格外了就停止<br>对于左边一半同样计算<br>复杂度是 O(N)</p>
</li>
<li><p>quicksort &amp; merge sort</p>
</li>
<li><p>graph是不是bipartite的，bfs解完了，接下来问时间复杂度，可不可以优化。<br>  <a href="https://www.1point3acres.com/bbs/thread-286531-1-1.html" target="_blank" rel="noopener">https://www.1point3acres.com/bbs/thread-286531-1-1.html</a></p>
</li>
<li><p>一个unfair coin，怎么disign一个process可以返回同样几率的0和1.</p>
</li>
<li><p>Calculate the distance of bits between two integers.<br>For example: 1 -&gt; 01; 2 -&gt; 10; dist = 2;</p>
</li>
<li><p>Fibonacci, recursive + non recursive;</p>
</li>
<li><p>file path “/home/./../user/file/.././“大概这样   .表示不动，..表示去上层，要求返回简化的路径，”/user”,stack做</p>
</li>
<li><p><u><strong>calendar add day</strong></u></p>
<p>Calendar class（有三个field，year，month，day）和一个数N，实现一个函数，返回N天之后的calendar，譬如说输入是{2017， 3，20}和12， 那么返回的是{2017，4， 1}</p>
</li>
<li><p>excel implementation</p>
</li>
<li><p>Given a DAG, a source, a target, and number n, 找出从source到target的长度为n的路径的个数。</p>
</li>
<li><p>given a undirectd and acyclic graph, 一个source和一个target，找出source到target的最长path</p>
</li>
<li><p>是之前面经里有过的一个二维数组最后一个格子是个moving block的那题。应该要用a star算法。。我刷面经的时候就想说要是考到这题我就放弃。。因为之前研究了半天还是觉得太复杂，搞懂了感觉一个小时也写不出来。。结果好死不死的考到了＝。 ＝当然我是没有放弃的，强行用DFS解了下，但是空间复杂度会很高，小姐姐说最多只能跑个2*2的试试，DFS的话就是你每走一步就把当前棋盘的状态存到一个hashset里，然后要是走到相同状态就不再走下去。反正最后写了100多行跑了个最简单的用例但是感觉有loop，也没时间debug了。</p>
</li>
<li><p>find max number of points in one line  + 系统设计（设计一个topic ranking 系统）</p>
</li>
<li><p>有向有环图中 找source 到 target 的距离为n的可能性</p>
</li>
<li><p>wordbreak 2 (follow up : NLP problems)</p>
</li>
</ol>
<h3 id="XI-SQL"><a href="#XI-SQL" class="headerlink" title="XI. SQL"></a>XI. SQL</h3><ol>
<li><p>select count distinct</p>
</li>
<li><p>query要用group by, 然后让我写一个方法，输入income和taxTable可以得出tax. 不是算法题，当时我都震惊了，就是分段函数求和。小哥说就想看下我会不会写code。。估计前面的问答让他对我的能力深感怀疑。。</p>
</li>
<li><p>给了个实际例子 要我写了个简单的3个entity的table（one to many &amp; many to many）一个USER有很多ALBUM, 很多PHOTO对应很多album<br>写SQL<strong>: 给一个用户，这个用户有几张照片？</strong><br><strong>每个相册分开呢？</strong></p>
</li>
</ol>
<p>   最后问了几个SQL的问题：</p>
<ol>
<li>有user，user有photo，怎么建表，大概写一下</li>
<li>写一个SQL查每个user有多少照片</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/21/Ember-js-Study-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/21/Ember-js-Study-Notes/" itemprop="url">Ember.js Study Notes</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-21T00:35:54-07:00">2019-09-21</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>I am always curious about how do those libraries/frameworks like <code>React</code>, <code>Angular</code>, <code>Ember</code> work in background. I know it all about <strong><u>design patterns</u></strong>, which appeals me very much. </p>
<p>Now, I have been working on React for about 2 years, and AngularJS for some time. It’s time to start an adventure in Ember world. Items below are my thoughts while I went through the official documentation, and will be kept updating.</p>
<ol>
<li><p>Ember framework/ecosystem behaves like a custodian, it </p>
<ul>
<li>takes <code>template</code>, <code>component</code>, <code>service</code>, <code>data</code>, <code>route</code>, etc defined by developers, via interfaces.</li>
<li>ditches them together in background</li>
</ul>
<p>While React is more like a library, it works together with other library like Redux, React Router, Webpack to build up applications.</p>
</li>
<li><p><code>Ember CLI</code> can deal with file system, create scaffolds based on <em>convention over configuration</em></p>
</li>
<li><p><code>this</code> in <code>hbs</code>: </p>
<ol>
<li>Each template / component is an object / instance</li>
<li>what does <code>this</code> refer to? / what is the context?</li>
<li>why not using function programming, getting rid of <code>this</code> / context?</li>
</ol>
</li>
<li><p><code>.hbs</code>: will be pre-compiled before it converted into valid html?</p>
<ol>
<li>Compilation workflow?<ul>
<li>only handler-bar syntax will be scanned</li>
<li>other valid html syntax will be omitted</li>
<li>valid html generated</li>
</ul>
</li>
</ol>
</li>
<li><p>Ember’s rendering engine</p>
</li>
<li><p><a href="https://guides.emberjs.com/release/components/the-component-lifecycle/" target="_blank" rel="noopener">render lifecycle</a></p>
</li>
<li><p>almost all functions are injected into <code>Ember</code>, if they are intended to used in another file.</p>
<ul>
<li>eg.: helper functions will be in handlebar file, are injected by <code>helper()</code></li>
</ul>
</li>
<li><p>function invokation in <code>hbs</code>: <code>function-name arg1 arg2</code>, will be executed as <code>function-name([arg1, arg2])</code></p>
</li>
<li><p>Router =&gt; Route [modal + template] =&gt; template with its model (consist of resuable components)</p>
</li>
<li><p><code>Ember Data</code> is data management lib, in charge of API call and other data massages</p>
</li>
<li><p><code>.extend()</code>: use Ember Component class/interface; Meanwhile, add customed function / data</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Component.extend(&#123;</span><br><span class="line">	isBig: <span class="literal">false</span>,</span><br><span class="line">	productList: []</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>A <strong><u>component</u></strong> consists of two parts:</p>
<ul>
<li>UI part: <code>.hbs</code> file (<code>app/templates/components/list-filter.hbs</code>)</li>
<li>Logic Part: <code>component</code> object (<code>app/components/list-filter.js</code>)</li>
</ul>
</li>
<li><p>A <strong><u>template</u></strong> can also have its own logic part: <code>controller</code> object </p>
<ol>
<li>UI part: <code>.hbs</code> file (<code>app/templates/rentals.hbs</code>)</li>
<li>Logic Part: controller object (<code>app/controllers/rentals.js</code>)</li>
</ol>
</li>
<li><p>Ember.Object</p>
<ol>
<li><p>expand properties and methods on original JS object</p>
</li>
<li><p>make it <code>observable</code> (design pattern), used heavily in Ember env system</p>
</li>
<li><p>Issue: <code>create()</code> to instantiate a object with preset properties, using <code>init()</code> at the same time</p>
<ol>
<li><p>Problem: preset properties and init properties which one called first?</p>
<ol>
<li>properties in <code>init</code> beats instance preset properties</li>
<li><a href="https://github.com/emberjs/ember.js/issues/1557" target="_blank" rel="noopener">the hash passed to the create method is essentially treated as a mixin that is applied before init is run</a></li>
<li>My early exploration encounterring such issue: seem like this is a good sign, which give me an impression this framework is not with a simple philosophy. But hold on, let me dig on.</li>
</ol>
</li>
<li><p>How to overwrite <code>init</code> in <code>reopen</code>?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Person = Ember.Object.extend(&#123;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>.set(<span class="string">"shoppingList"</span>, Ember.A([<span class="string">'eggs'</span>, <span class="string">'cheese'</span>]));</span><br><span class="line">  &#125;, </span><br><span class="line">  addItem(item) &#123;</span><br><span class="line">    <span class="keyword">this</span>.shoppingList.pushObject(item);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Person.reopen(&#123;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>._super();</span><br><span class="line">    <span class="keyword">this</span>.set(<span class="string">"age"</span>, <span class="number">10</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = Person.create(&#123;</span><br><span class="line">  name: <span class="string">'Stefan Penner'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = Person.create(&#123;</span><br><span class="line">  name: <span class="string">'Robert Jackson'</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = Person.create(&#123;</span><br><span class="line">  name: <span class="string">"a"</span>,</span><br><span class="line">  age: <span class="number">199</span>,</span><br><span class="line">  kkk: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="string">"333"</span>)&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p1.age);</span><br><span class="line"><span class="built_in">console</span>.log(p2.age);</span><br><span class="line"><span class="built_in">console</span>.log(p3.age);</span><br><span class="line"></span><br><span class="line">p3.set(<span class="string">'age'</span>, <span class="number">3333</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p3.age);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/31/Evolve-your-app-to-MVC-pattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/31/Evolve-your-app-to-MVC-pattern/" itemprop="url">Evolve your app to MVC pattern</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-31T12:26:15-07:00">2019-08-31</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-What-is-it"><a href="#1-What-is-it" class="headerlink" title="1. What is it?"></a>1. What is it?</h3><p><strong>MVC</strong> is a pattern/framework decouple application into 3 parts: <u>modal</u>, <u>view</u>, and <u>controller</u>.</p>
<ul>
<li><strong>Modal</strong>: the single source of truth of your app, <u>responsible for data input and data output</u>;</li>
<li><strong>View</strong>: the UI part displayed to users, <u>responsible for display</u>;</li>
<li><strong>Controller</strong>: bind views to modal  organically in a desired way, <u>responsible for handling Modal(automatically resulting in View update)</u></li>
</ul>
<p><u><strong>[Note]:</strong></u> MVC is based on <a href="">Observer Pattern</a></p>
<h3 id="2-Why-use-it"><a href="#2-Why-use-it" class="headerlink" title="2. Why use it?"></a>2. Why use it?</h3><p>As app grow, the business logic between data and view become complicated. There could be a good chance that several component use same piece of data. It would be painful to call vanilla JS to update every component one by one. </p>
<p>It would be better if there is a way that we can update all those components in a batch automatically when that data piece changes. Here come in the MVC pattern. </p>
<ul>
<li><code>View</code> is html code snippet actually on frontend;</li>
<li><code>Modal</code> defines all single source of true for their views</li>
<li><code>Controller</code> will <ul>
<li>binds all <code>Views</code> to their corresponding <code>Modal</code>, so that Views will update automatically when the Modal changes.</li>
<li>via callback passed in, it updates<code>Modal</code>, leading to <code>Views</code> get updated</li>
</ul>
</li>
</ul>
<h3 id="3-How-to-use-it"><a href="#3-How-to-use-it" class="headerlink" title="3. How to use it?"></a>3. How to use it?</h3><p>The general way:</p>
<ol>
<li>Declare <code>modal</code> class prototype, and its APIs, which will be called by <code>controller</code></li>
<li>Specify to-be-bound <code>modal</code> for <code>view</code> components</li>
<li>pass intention callback to<code>controller</code> to specify how to update <code>modal</code></li>
</ol>
<h3 id="4-Evolve-to-MVC-pattern-eg-Timer"><a href="#4-Evolve-to-MVC-pattern-eg-Timer" class="headerlink" title="4. Evolve to MVC pattern (eg: Timer)"></a>4. Evolve to MVC pattern (eg: Timer)</h3><p>We will implement a very simple widget to show how to evolve an app to MVC pattern. The widget is to display whatever we get from API or from callback, and show it inside a <code>div</code>.</p>
<ol>
<li><p>No Pattern</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// View Part：</span></span><br><span class="line">&lt;div id=<span class="string">"div1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Logic Part：</span></span><br><span class="line"><span class="keyword">const</span> data = <span class="string">"This is the data"</span></span><br><span class="line"><span class="keyword">const</span> div = <span class="built_in">document</span>.getElementById(<span class="string">'div1'</span>);</span><br><span class="line">div.innerHTML = data;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li><p>Using <code>Observer Pattern</code></p>
<p>Now we don’t want to update view by ourselves. Instead, we hope data update will trigger view change automatically. <code>Observer Pattern</code> can be used here to let the view observe the modal, so whenever modal changes, view will get updated automatically.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Model</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._value = <span class="keyword">typeof</span> value === <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</span><br><span class="line">    <span class="keyword">this</span>._listeners = [];</span><br><span class="line">&#125;</span><br><span class="line">Model.prototype.set = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    self._value = value;</span><br><span class="line">    <span class="comment">// model value change will notify regisered callbacks</span></span><br><span class="line">    <span class="comment">// According to JS running principle, we apply callback asynchronously: WON'T Freeze UI</span></span><br><span class="line">    <span class="comment">// or use requestAnimationFrame, rather than setTimout</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        self._listeners.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">listener</span>) </span>&#123;</span><br><span class="line">            listener.call(self, value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">Model.prototype.watch = <span class="function"><span class="keyword">function</span> (<span class="params">listener</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// register callback</span></span><br><span class="line">    <span class="keyword">this</span>._listeners.push(listener);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// View：</span></span><br><span class="line">&lt;div id=<span class="string">"div1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Logic：</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> model = <span class="keyword">new</span> Model();</span><br><span class="line">    <span class="keyword">var</span> div1 = <span class="built_in">document</span>.getElementById(<span class="string">'div1'</span>);</span><br><span class="line">    model.watch(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        div1.innerHTML = value;</span><br><span class="line">    &#125;);</span><br><span class="line">    model.set(<span class="string">'hello, this is a div'</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="3">
<li><p>Bind <code>View</code> and <code>Modal</code></p>
<p>There is a drawback in the above approach: we need to make modal to <code>watch</code> each related views <u><strong>manually</strong></u>. But the truth is that all those work are duplicated, and conveys the same functionality: bind views to modal, or let modal watch related views.</p>
<p>We can encapsulate this feature onto modal actually, as follows:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Model.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// put `watch` and `common callback` inside bind</span></span><br><span class="line">    <span class="keyword">this</span>.watch(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        node.innerHTML = value;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// View：</span></span><br><span class="line">&lt;div id=<span class="string">"div1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;div id=<span class="string">"div2"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Logic：</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> model = <span class="keyword">new</span> Model();</span><br><span class="line">    model.bind(<span class="built_in">document</span>.getElementById(<span class="string">'div1'</span>));</span><br><span class="line">    model.bind(<span class="built_in">document</span>.getElementById(<span class="string">'div2'</span>));</span><br><span class="line">    model.set(<span class="string">'this is a div'</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="4">
<li><p>MVC Pattern</p>
<p>Now, it is better. We bind view and modal😄~ And we can bind as many as views to a modal as we want😱. </p>
<p>But still, we need to <strong><u>manually</u></strong> bind view to modal. Is there a way our code can handle it for us, as long as we tell the code which modal the view want to bind. </p>
<p>Yeah, You might already get it! We can specify modal piece for the view by using HTML attribute, like <code>&lt;div bind=&#39;modal1&#39; /&gt;</code>. Thus, the code can know the desired modal current view wants to bind.</p>
<p>We will create <strong><u>an util object</u></strong> that can </p>
<ul>
<li>firstly, automatically bind views to their modals,</li>
<li>secondly, receive a callback to update modal in programmer’s desired way</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Controller</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> models = &#123;&#125;;</span><br><span class="line">    <span class="comment">// find all views with `bind` attr</span></span><br><span class="line">    <span class="keyword">var</span> views = <span class="built_in">document</span>.querySelectorAll(<span class="string">'[bind]'</span>);</span><br><span class="line">    <span class="comment">// convert views into array</span></span><br><span class="line">    views = <span class="built_in">Array</span>.prototype.slice.call(views, <span class="number">0</span>);</span><br><span class="line">    views.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">view</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> modelName = view.getAttribute(<span class="string">'bind'</span>);</span><br><span class="line">        <span class="comment">// get the modal for this view, or create new one for it</span></span><br><span class="line">        models[modelName] = models[modelName] || <span class="keyword">new</span> Model();</span><br><span class="line">        <span class="comment">// bind view and its modal</span></span><br><span class="line">        models[modelName].bind(view);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// update modals using specified callback </span></span><br><span class="line">    callback.call(<span class="keyword">this</span>, models);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// View:</span></span><br><span class="line">&lt;div id=<span class="string">"div1"</span> bind=<span class="string">"model1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;div id=<span class="string">"div2"</span> bind=<span class="string">"model1"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="comment">// Controller：</span></span><br><span class="line"><span class="keyword">new</span> Controller(<span class="function"><span class="keyword">function</span> (<span class="params">models</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> model1 = models.model1;</span><br><span class="line">    model1.set(<span class="string">'this is a div'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>The whole MVC</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Model</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._value = <span class="keyword">typeof</span> value === <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</span><br><span class="line">    <span class="keyword">this</span>._listeners = [];</span><br><span class="line">&#125;</span><br><span class="line">Model.prototype.set = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    self._value = value;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        self._listeners.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">listener</span>) </span>&#123;</span><br><span class="line">            listener.call(self, value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">Model.prototype.watch = <span class="function"><span class="keyword">function</span> (<span class="params">listener</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>._listeners.push(listener);</span><br><span class="line">&#125;;</span><br><span class="line">Model.prototype.bind = <span class="function"><span class="keyword">function</span> (<span class="params">node</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.watch(<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        node.innerHTML = value;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Controller</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> models = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> views = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'[bind]'</span>), <span class="number">0</span>);</span><br><span class="line">    views.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">view</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> modelName = view.getAttribute(<span class="string">'bind'</span>);</span><br><span class="line">        (models[modelName] = models[modelName] || <span class="keyword">new</span> Model()).bind(view);</span><br><span class="line">    &#125;);</span><br><span class="line">    callback.call(<span class="keyword">this</span>, models);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="5-Test-our-MVC-framework"><a href="#5-Test-our-MVC-framework" class="headerlink" title="5. Test our MVC framework"></a>5. Test our MVC framework</h3><p>We will use our MVC framework to implement a Timer as follows</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// View:</span></span><br><span class="line">&lt;span bind=<span class="string">"hour"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">bind</span>=<span class="string">"minute"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">bind</span>=<span class="string">"second"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Controller:</span></span><br><span class="line"><span class="keyword">new</span> Controller(<span class="function"><span class="keyword">function</span> (<span class="params">models</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">setTime</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">        models.hour.set(date.getHours());</span><br><span class="line">        models.minute.set(date.getMinutes());</span><br><span class="line">        models.second.set(date.getSeconds());</span><br><span class="line">    &#125;</span><br><span class="line">    setTime();</span><br><span class="line">    setInterval(setTime, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="6-Thoughts"><a href="#6-Thoughts" class="headerlink" title="6. Thoughts"></a>6. Thoughts</h3><p>For almost all frameworks like <code>Redux</code>, <code>Flux</code>. It use similiar ways to handle View and Modal. Here we use <code>Observer Pattern</code> to implement <code>MVC</code>. </p>
<p>Based on my understanding, <code>Redux</code> and <code>Flux</code> use <code>Publisher-Subscriber Pattern</code> will handles events better than <code>Observer Pattern</code>.</p>
<h3 id="7-Reference"><a href="#7-Reference" class="headerlink" title="7. Reference"></a>7. Reference</h3><ol>
<li><a href="https://www.cnblogs.com/front-end-ralph/p/5190442.html" target="_blank" rel="noopener">30行代码实现Javascript中的MVC</a></li>
<li><a href="https://caomingkai.github.io/2018/10/07/Design-Pattern-JS/" target="_blank" rel="noopener">Design Pattern - JS</a></li>
<li><a href="https://addyosmani.com/resources/essentialjsdesignpatterns/book/" target="_blank" rel="noopener">Learning JavaScript Design Patterns</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/29/HOC-Redux-connect/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/29/HOC-Redux-connect/" itemprop="url">HOC & Redux connect()</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-29T00:18:53-07:00">2019-08-29</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="1-HOC"><a href="#1-HOC" class="headerlink" title="1. HOC"></a>1. HOC</h3><p>Frontend people are familiar with <strong><u>HOC</u></strong>(High Order Component) or <strong><u>HOF</u></strong>(Higher Order Function). It can be thought as as an enhanced version of the original Component. Recently, I read an article about <em>mixin pattern drawbacks in React</em> (<u>NOTE</u>: mixing pattern now is obsolete, and HOC are recommended by Facebook React Team).</p>
<p>Personally, I love the way React Doc delivers its concepts, which is very natural and follow the way of regular thought process. <strong><u>Do have a look at this part</u></strong>: <a href="https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html#higher-order-components-explained" target="_blank" rel="noopener"><strong>Higher-Order Components Explained</strong></a>. Thanks for the efforts from React Team.</p>
<h3 id="2-connect-from-Redux"><a href="#2-connect-from-Redux" class="headerlink" title="2. connect() from Redux"></a>2. <code>connect()</code> from Redux</h3><p>In React-Redux, we see <code>connect()()</code> a lot, actually it is a <code>HOC</code>. Let’s write one! Also note <code>this.context</code> actually passed from <code>&lt;Provider&gt;</code> created by Redux. And it use <code>context</code> in React to pass it to its children. </p>
<p><u><strong>[NOTE]</strong></u> The <u>return of <code>connect()</code></u> is: <u>a wrapper <strong>function</strong></u> that takes your component and returns a wrapper component with the additional props it injects.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> connect = <span class="function">(<span class="params">mapStateToProps, mapDispatchToProps</span>) =&gt;</span> (WrappedComponent) =&gt; &#123;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Connect</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">      store: PropTypes.object</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">      <span class="keyword">super</span>()</span><br><span class="line">      <span class="keyword">this</span>.state = &#123;</span><br><span class="line">        allProps: &#123;&#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    componentWillMount () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      <span class="keyword">this</span>._updateProps()</span><br><span class="line">      store.subscribe(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>._updateProps())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    _updateProps () &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; store &#125; = <span class="keyword">this</span>.context</span><br><span class="line">      <span class="keyword">let</span> stateProps = mapStateToProps ? mapStateToProps(store.getState(), <span class="keyword">this</span>.props): &#123;&#125; </span><br><span class="line">      <span class="keyword">let</span> dispatchProps = mapDispatchToProps? mapDispatchToProps(store.dispatch, <span class="keyword">this</span>.props) : &#123;&#125; </span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">        allProps: &#123;</span><br><span class="line">          ...stateProps,</span><br><span class="line">          ...dispatchProps,</span><br><span class="line">          ...this.props</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedComponent</span> &#123;<span class="attr">...this.state.allProps</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="xml">    &#125;</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">  return Connect</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="3-Reference"><a href="#3-Reference" class="headerlink" title="3. Reference"></a>3. Reference</h3><ol>
<li><p><a href="https://reactjs.org/docs/higher-order-components.html#use-hocs-for-cross-cutting-concerns" target="_blank" rel="noopener">Use HOCs For Cross-Cutting Concerns</a></p>
</li>
<li><p><a href="https://reactjs.org/blog/2016/07/13/mixins-considered-harmful.html" target="_blank" rel="noopener">Mixins Considered Harmful</a></p>
</li>
<li><p><a href="https://juejin.im/post/5cad39b3f265da03502b1c0a#heading-25" target="_blank" rel="noopener">Mixin to HOC to Hook</a></p>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/10/Front-end-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/10/Front-end-Notes/" itemprop="url">Front-end Notes</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-10T15:34:04-07:00">2019-08-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Array-prototype-sort-cb"><a href="#1-Array-prototype-sort-cb" class="headerlink" title="1. Array.prototype.sort(cb)"></a>1. <code>Array.prototype.sort(cb)</code></h2><p><strong><u>Always</u></strong> pass in comparison callback, as the default of <code>sort()</code> behavior is:</p>
<ul>
<li>first convert to <code>string</code> type</li>
<li>then, sort string array</li>
</ul>
<p>2 examples are given below:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> array1 = [<span class="number">1</span>, <span class="number">30</span>, <span class="number">4</span>, <span class="number">21</span>, <span class="number">100000</span>];</span><br><span class="line">array1.sort();</span><br><span class="line"><span class="built_in">console</span>.log(array1); <span class="comment">//BAD: Array [1, 100000, 21, 30, 4]</span></span><br><span class="line"></span><br><span class="line">array1.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line"><span class="built_in">console</span>.log(array1); <span class="comment">//GOOD: Array [1, 4, 21, 30, 100000]</span></span><br></pre></td></tr></table></figure>
<h2 id="2-NO-map-or-forEach-on-String"><a href="#2-NO-map-or-forEach-on-String" class="headerlink" title="2. NO map or forEach on String"></a>2. NO <code>map</code> or <code>forEach</code> on String</h2><p>String type is <code>array-like</code> data type, and immutable, no prototype method like <code>map()</code>, <code>forEach()</code>, <code>filter()</code>, <code>reduce()</code>. BUT, like other <code>array-like</code> data type, we can use index to access element: <code>str[i]</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"abcde"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// GOOD</span></span><br><span class="line">str[k]</span><br><span class="line"></span><br><span class="line"><span class="comment">// BAD</span></span><br><span class="line">str.map(<span class="function"><span class="params">c</span> =&gt;</span> c)</span><br><span class="line"></span><br><span class="line"><span class="comment">// GOOD</span></span><br><span class="line"><span class="built_in">Array</span>.from(str).map(<span class="function"><span class="params">c</span> =&gt;</span> <span class="string">'['</span> + c + <span class="string">']'</span>);</span><br><span class="line">str.split().map(<span class="function"><span class="params">c</span> =&gt;</span> <span class="string">'['</span> + c + <span class="string">']'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-oninput-vs-onchange"><a href="#3-oninput-vs-onchange" class="headerlink" title="3. oninput vs onchange"></a>3. <code>oninput</code> vs <code>onchange</code></h2><ul>
<li><code>oninput</code> will trigger every time there is a modification inside <code>&lt;input&gt;</code>, <code>textarea</code>, etc.</li>
<li><code>onchange</code> won’t necessarily trigger for each modification; but will do when <code>Enter</code> pressed or focus lost</li>
<li>inside <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, holding non-whitespace key without release won’t result in letter repeatition, instead, there will be only one letter types in.</li>
</ul>
<h2 id="4-Don’t-use-a-number-returned-comparator-directly"><a href="#4-Don’t-use-a-number-returned-comparator-directly" class="headerlink" title="4. Don’t use a number returned comparator directly"></a>4. Don’t use a <code>number</code> returned comparator directly</h2><p>Because <strong><u><code>0</code> is <code>falsy</code></u></strong>, we should use a <code>boolean</code> returned comparator instead, as follow:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BAD</span></span><br><span class="line"><span class="keyword">const</span> comparator = (a, b) = (a - b);</span><br><span class="line"><span class="keyword">if</span> (comparator) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// GOOD</span></span><br><span class="line"><span class="keyword">const</span> comparator = (a, b) = (a - b &gt; <span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span> (comparator) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-Event"><a href="#5-Event" class="headerlink" title="5. Event"></a>5. Event</h2><ol>
<li><p><strong>Event delegation</strong></p>
<ol>
<li><u>GOOD</u>: <ul>
<li>Less memory to register event handlers, saving memory    </li>
<li>Dynamically handle element event, eg.: newly added <code>&lt;li&gt;</code> can benefit from its parent <code>&lt;ul&gt;</code> to handle its own event</li>
<li>no memory leak: no need to <code>removeEventListener()</code> from a deleted <code>&lt;li&gt;</code></li>
</ul>
</li>
<li><u>BAD</u>:<ul>
<li>Too long time for some event to be handled if the delegation process is too long</li>
<li>Some event might be stopped by <code>event.stopPropagation()</code></li>
<li>Some event like <code>onFocus</code>, <code>onBlur</code> don’t support event delegation</li>
</ul>
</li>
<li><strong><u>NOTE</u></strong>: need to check if <code>event.target === desiredEle</code> to respond.</li>
</ol>
</li>
<li><p><strong>Default actions</strong></p>
<p><u>Event handlers</u> are called <strong><u>before</u></strong> the <u>default behavior</u> happens. Eg.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">link tag &lt;a&gt; won't redirect, because </span></span><br><span class="line"><span class="comment">  1. event handler is called</span></span><br><span class="line"><span class="comment">  2. event handler prevent the default behavior of &lt;a&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://developer.mozilla.org/"</span>&gt;</span>MDN<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> link = <span class="built_in">document</span>.querySelector(<span class="string">"a"</span>);</span></span><br><span class="line"><span class="javascript">  link.addEventListener(<span class="string">"click"</span>, event =&gt; &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">"Nope."</span>);</span></span><br><span class="line"><span class="undefined">    event.preventDefault();</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Key events: <u><code>keydown</code> is enough)</u></p>
<ul>
<li><p>cover all keys, while <code>keyup</code> only cover part of keys. <code></code></p>
</li>
<li><p>has default action and is cancelable, by using <code>preventDefault</code>; While <code>keyup</code> has no default action, and is not cancelable.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. e.keyCode</span></span><br><span class="line"><span class="comment">// 2. document.activeElement: the focused Element within the DOM</span></span><br><span class="line"><span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(e.keyCode === <span class="number">13</span>) &#123; <span class="comment">// The Enter/Return key</span></span><br><span class="line">    <span class="built_in">document</span>.activeElement.onclick(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<ul>
<li><p>compatible for all browser</p>
</li>
<li><p>keep firing when key is held (use<code>event.repeat</code> to avoid) </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'keydown'</span>, (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span>(event.repeat) &#123;</span><br><span class="line">    <span class="comment">// key is being held down</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// key is being pressed</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-How-does-new-work-when-instantiate-an-object"><a href="#6-How-does-new-work-when-instantiate-an-object" class="headerlink" title="6. How does new work when instantiate an object?"></a>6. How does <code>new</code> work when instantiate an object?</h2><p>credit_1: <a href="https://segmentfault.com/a/1190000017956545" target="_blank" rel="noopener">https://segmentfault.com/a/1190000017956545</a></p>
<p>credit_2: <a href="https://medium.com/tech-tajawal/javascript-this-4-rules-7354abdb274c" target="_blank" rel="noopener">https://medium.com/tech-tajawal/javascript-this-4-rules-7354abdb274c</a></p>
<p>The <code>new</code> operator is used before a function, like <code>new Foo(…)</code>. When the code  is executed, the following things happen:</p>
<ul>
<li><p>An empty object is created: <code>obj</code>;</p>
</li>
<li><p><code>Foo</code> is called on <code>obj</code>, so now <code>this</code> refer to <code>obj</code>;</p>
</li>
<li><p><code>obj</code> inherit from <code>Foo.prototype</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;        </span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Osama'</span>;</span><br><span class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"I am "</span> + <span class="keyword">this</span>.name; </span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Foo();</span><br><span class="line"></span><br><span class="line"><span class="comment">// The statement above is equal to [1][2][3] below: </span></span><br><span class="line"><span class="comment">// [1] create a new object using the object literal </span></span><br><span class="line"><span class="comment">// let obj = &#123;&#125;;  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [2] add instance properties and methods to `this`</span></span><br><span class="line"><span class="comment">// Foo.call(obj);  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [3] add proto property to `this`</span></span><br><span class="line"><span class="comment">// obj._proto_ = Foo.prototype;  </span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.name);  <span class="comment">//Osama  --- [3]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-global-window-default-one-if-no-obj-set-to-this"><a href="#7-global-window-default-one-if-no-obj-set-to-this" class="headerlink" title="7. global/window: default one, if no obj set to this"></a>7. <code>global/window</code>: default one, if no obj set to <code>this</code></h2><p>If there is no calling context, <code>this</code> will be bound to <code>global</code> or <code>window</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> context = <span class="string">"global"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123;  </span><br><span class="line">    context: <span class="string">"object"</span>,</span><br><span class="line">    method: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;                  </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> context = <span class="string">"function"</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span> + <span class="string">":"</span> +<span class="keyword">this</span>.context; </span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> f(); <span class="comment">//invoked without context, so it will default to `window`</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.method()); <span class="comment">//[object Window]:global</span></span><br></pre></td></tr></table></figure>
<h2 id="8-Foo-prototype-method-vs-Foo-prototype"><a href="#8-Foo-prototype-method-vs-Foo-prototype" class="headerlink" title="8. Foo.prototype.method=... vs Foo.prototype={...}"></a>8. <code>Foo.prototype.method=...</code> vs <code>Foo.prototype={...}</code></h2><p>Use <code>Foo.prototype.method=function () {...}</code>, rather than <code>Foo.prototype={...}</code>.</p>
<ul>
<li>The 1st approach didn’t modify <code>Foo.prototype.constructor</code>, so it is still <code>Foo</code>;</li>
<li>However, the 2nd one modify it to be <code>Object</code>, which is not disired.</li>
<li>Example below can be </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [Credit]: https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. define the Person Class  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.copy = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="comment">// return new Person(this.name); // just as bad</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">this</span>.constructor(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. define the Student class  </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name</span>) </span>&#123;  </span><br><span class="line">    Person.call(<span class="keyword">this</span>, name);</span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. inherit Person  </span></span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. Now what happens when we create a new Student and copy it?</span></span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> Student(<span class="string">"trinth"</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(student1.copy() <span class="keyword">instanceof</span> Student); <span class="comment">// =&gt; false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. The copy is not an instance of Student. This is because (without explicit checks), we'd have no way to return a Student copy from the "base" class. We can only return a Person. However, if we had reset the constructor:</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 6. correct the constructor pointer because it points to Person  </span></span><br><span class="line">Student.prototype.constructor = Student;</span><br><span class="line"><span class="keyword">var</span> student1 = <span class="keyword">new</span> Student(<span class="string">"trinth"</span>);  </span><br><span class="line"><span class="built_in">console</span>.log(student1.copy() <span class="keyword">instanceof</span> Student); <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<h2 id="9-AMD-vs-CommonJS-vs-import-export"><a href="#9-AMD-vs-CommonJS-vs-import-export" class="headerlink" title="9. AMD vs. CommonJS vs import/export"></a>9. AMD vs. CommonJS vs <code>import/export</code></h2><p><a href="https://michelenasti.com/2018/10/02/let-s-write-a-simple-version-of-the-require-function.html" target="_blank" rel="noopener">credit</a>    <a href="https://caomingkai.github.io/2018/10/02/Note-of-Eloquent-JavaScript/" target="_blank" rel="noopener">relavant blog</a></p>
<ol>
<li><p>CommonJS: <code>require</code> &amp; <code>module.exports</code> (<code>exports</code>)  <a href="https://caomingkai.github.io/2018/10/02/Note-of-Eloquent-JavaScript/" target="_blank" rel="noopener"><strong>relavant blog</strong></a></p>
<p><code>require</code> is a <strong><u>global utility function (obj)</u></strong>, with inner <code>cache</code> storing a <code>map &lt;filename, modulePublicAPI&gt;</code> , by firstly executing module functions, and then exporting module API with the help of <code>Closure</code></p>
<ul>
<li>get the <code>code string</code> of this module;</li>
<li>create empty hooks to link potential public interface</li>
<li>declare wrapper function</li>
<li>call wrapper function to execute module, and expose public interface to <code>module</code></li>
<li>store module public interface in require util obj</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://caomingkai.github.io/2018/10/02/Note-of-Eloquent-JavaScript/</span></span><br><span class="line"><span class="built_in">require</span>.cache = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">require</span>(<span class="params">fileObj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="built_in">require</span>.cache[fileObj.name]) &#123;</span><br><span class="line">    <span class="keyword">let</span> functionStr = fileObj.functionStr;  <span class="comment">// 1. get the `code string` of this module </span></span><br><span class="line">    <span class="keyword">let</span> <span class="built_in">module</span> = &#123;<span class="attr">exports</span>: <span class="literal">null</span>&#125;;   <span class="comment">// 2. create empty hooks to link potential public interface</span></span><br><span class="line">    <span class="keyword">const</span> wrapper = <span class="built_in">Function</span>(<span class="string">'require'</span>, <span class="string">'module'</span>, functionStr);  <span class="comment">// 3. declare wrapper function </span></span><br><span class="line">    wrapper(<span class="built_in">require</span>, <span class="built_in">module</span>);    <span class="comment">// 4. call wrapper function to execute module, and expose public interface to `module`</span></span><br><span class="line">    <span class="built_in">require</span>.cache[fileObj.name] = <span class="built_in">module</span>.exports; <span class="comment">// 5. store module public interface in require util obj</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">require</span>.cache[fileObj.name];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* TEST: </span></span><br><span class="line"><span class="comment">	`fileObj` simulates a file with name as `a`, and content as `functionStr`</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> fileObj = &#123;</span><br><span class="line">  name: <span class="string">"a"</span>,</span><br><span class="line">  functionStr: <span class="string">"let a = 0; function increA() &#123;a += 1;&#125;; function getA()&#123;return a;&#125; module.exports=&#123;increA, getA&#125;;"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"require module for 1st time------&gt;"</span>);</span><br><span class="line">  <span class="keyword">let</span> <span class="built_in">module</span> = <span class="built_in">require</span>(fileObj);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 0</span></span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 1</span></span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 2</span></span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 5</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"require module for 2nd time------&gt;"</span>);</span><br><span class="line">  <span class="built_in">module</span> = <span class="built_in">require</span>(fileObj);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 5</span></span><br><span class="line">  <span class="built_in">module</span>.increA();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.getA()); <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li><p>AMD (Asynchronous Module Definition )</p>
<p><a href="https://dojotoolkit.org/documentation/tutorials/1.10/modules/" target="_blank" rel="noopener"><strong>Credit_1</strong></a></p>
<p><a href="https://www.oreilly.com/library/view/learning-javascript-design/9781449334840/ch11s02.html" target="_blank" rel="noopener"><strong>Credit_2</strong></a></p>
</li>
<li><p><code>import</code> &amp; <code>export</code></p>
<p><a href="https://medium.com/@thejasonfile/a-simple-intro-to-javascript-imports-and-exports-389dd53c3fac" target="_blank" rel="noopener">Credit1</a></p>
</li>
</ol>
<h2 id="10-When-to-use-document-write"><a href="#10-When-to-use-document-write" class="headerlink" title="10. When to use document.write ?"></a>10. When to use <code>document.write</code> ?</h2><p><code>document.write</code> only works while the page is loading; If you call it after the page is done loading, it will overwrite the whole page.</p>
<p>The following is an legitimate use of <code>document.write</code> comes from the HTML5 Boilerplate <a href="https://github.com/h5bp/html5-boilerplate/blob/master/src/index.html" target="_blank" rel="noopener">index.html</a> example.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="xml">window.jQuery || document.write('<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/libs/jquery-1.6.3.min.js"</span>&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">\</span>/<span class="attr">script</span>&gt;</span>')</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="11-HTML-attribute-vs-DOM-property"><a href="#11-HTML-attribute-vs-DOM-property" class="headerlink" title="11. HTML attribute vs DOM property"></a>11. <code>HTML attribute</code> vs <code>DOM property</code></h2><p><strong>Attributes are defined by HTML. Properties are defined by the DOM (Document Object Model).</strong></p>
<ul>
<li>A few HTML attributes have 1:1 mapping to properties. <code>id</code> is one example.</li>
<li>Some HTML attributes don’t have corresponding properties. <code>colspan</code> is one example.</li>
<li>Some DOM properties don’t have corresponding attributes. <code>textContent</code> is one example.</li>
<li>Many HTML attributes appear to map to properties … but not in the way you might think!</li>
</ul>
<p><strong>Attributes initialize DOM properties and then they are done. Property values can change; attribute values can’t.</strong></p>
<p>For example, when the browser renders <code>&lt;input type=&quot;text&quot; value=&quot;Bob&quot;&gt;</code>, it creates a corresponding DOM node with a <code>value</code> property initialized to “Bob”.</p>
<p>When the user enters “Sally” into the input box, the DOM element <code>value</code> <em>property</em> becomes “Sally”. But the HTML <code>value</code> <em>attribute</em> remains unchanged as you discover if you ask the input element about that attribute: <code>input.getAttribute(&#39;value&#39;)</code> returns “Bob”.</p>
<p><strong>The HTML attribute <code>value</code> specifies the <em>initial</em> value; the DOM <code>value</code> property is the <em>current</em> value.</strong></p>
<h2 id="12-document-load-vs-document-DOMContentLoaded"><a href="#12-document-load-vs-document-DOMContentLoaded" class="headerlink" title="12. document.load() vs document DOMContentLoaded()"></a>12. <code>document.load()</code> vs <code>document DOMContentLoaded()</code></h2><ul>
<li><code>DomContentLoaded</code> fires after <code>domcument</code> is created; But css files，images and frame are not yet loaded</li>
<li><code>load</code> fires after all resources are loaded.</li>
</ul>
<h2 id="13-When-to-usePromise-resolve"><a href="#13-When-to-usePromise-resolve" class="headerlink" title="13. When to usePromise.resolve() ?"></a>13. When to use<code>Promise.resolve()</code> ?</h2><p><a href="https://caomingkai.github.io/2018/11/02/Write-Our-Own-Promise/" target="_blank" rel="noopener">refer this article</a></p>
<p><code>Promise.resolve()</code> will immediately <u>change the status and broadcast the value</u>, skipping the execution of executor. <u>The consumers</u> registered in <code>then()</code> will be invoked immediately.</p>
<p>So, we can use <code>promise.resolve()</code> , if we wanted to invoke consumers registered in <code>then()</code>, and don’t care the executor.</p>
<h2 id="14-CSS-preprocessor"><a href="#14-CSS-preprocessor" class="headerlink" title="14. CSS preprocessor"></a>14. CSS preprocessor</h2><p>Why use it?</p>
<ul>
<li><p>variables: </p>
<p><code>font-size: $fontSize;</code></p>
</li>
<li><p>nested selector: clear structure and less redundant selectors</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">  <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">li</span> &#123; <span class="attribute">display</span>: inline-block; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>will be converted to CSS as follows:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">nav</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>@mixin</code> and <code>@include</code>:  make groups of CSS declarations that you want to reuse throughout your site</p>
<p>[<strong><u>Best Practice:</u></strong>] use a mixin to inject dynamic values into repeated constructs</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">mixin</span> transform(<span class="variable">$property</span>) &#123;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="variable">$property</span>;</span><br><span class="line">  -ms-<span class="attribute">transform</span>: <span class="variable">$property</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="variable">$property</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.box</span> &#123; @<span class="keyword">include</span> transform(rotate(<span class="number">30deg</span>)); &#125;</span><br></pre></td></tr></table></figure>
<p>will be converted to CSS as follows:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">rotate</span>(30deg);</span><br><span class="line">  <span class="attribute">-ms-transform</span>: <span class="built_in">rotate</span>(30deg);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(30deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>inheritance selector:  <code>%name</code> and <code>@extend</code>: share a set of CSS properties from one selector to another;</p>
<p>[<strong><u>Best Practice:</u></strong>] Only use <code>@extend</code> when the rulesets that you are trying to DRY out are <u><strong>inherently</strong></u> and <u><strong>thematically related</strong></u></p>
</li>
</ul>
<h2 id="15-HTML-Accessibility"><a href="#15-HTML-Accessibility" class="headerlink" title="15. HTML Accessibility"></a>15. HTML Accessibility</h2><p><u><strong>[Why need it]</strong></u>: </p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. not only for &lt;u&gt;people with disability&lt;/u&gt; (better experience), </span><br><span class="line">2. but also for &lt;u&gt;device with disabilities&lt;/u&gt; (better rendering)</span><br><span class="line"></span><br><span class="line">ARIA: Accessible Rich Internet Applications</span><br></pre></td></tr></table></figure>
<ol>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML" target="_blank" rel="noopener">semantic HTML</a>. <a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS#Validation" target="_blank" rel="noopener">Validating it</a> is a good start, as is using an <a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility#Auditing_tools" target="_blank" rel="noopener">Auditing tool</a>.</li>
<li>Check that your content makes sense when the CSS is turned off.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility#Using_native_keyboard_accessibility" target="_blank" rel="noopener">keyboard accessible</a>. Test using Tab, Return/Enter, etc.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility#Text_alternatives" target="_blank" rel="noopener">text alternatives</a>. <code>&lt;img alt=&quot;Mingkai&#39;s Photo /&gt;&quot;</code></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Accessibility/HTML#Meaningful_text_labels" target="_blank" rel="noopener">element relationships</a>. <code>&lt;label for=&quot;name&quot;&gt;Fill in your name:&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;name /&gt;&quot;</code></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility#Color_and_color_contrast" target="_blank" rel="noopener">color contrast</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility#Hiding_content" target="_blank" rel="noopener">hidden content</a> is visible by screenreaders: Use <code>z-index</code>, instead of <code>visibility: hiden;</code>and <code>display: none</code>.</li>
<li><strong><u>client-side form validation</u></strong>: Make sure that functionality is usable without JavaScript wherever possible.</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" target="_blank" rel="noopener">ARIA: Accessible Rich Internet Applications</a></li>
</ol>
<h2 id="16-data-HTML-syntax-vs-JS-access-vs-CSS-access"><a href="#16-data-HTML-syntax-vs-JS-access-vs-CSS-access" class="headerlink" title="16.  data-*: HTML syntax vs. JS access vs. CSS access"></a>16.  <code>data-*</code>: HTML syntax vs. JS access vs. CSS access</h2><p><strong>credit</strong>: <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes" target="_blank" rel="noopener">MDN: Using data attributes</a></p>
<p><code>data-*</code> allow us to store extra information on <u>standard, semantic</u> HTML elements.</p>
<ul>
<li><p>HTML syntax: <code>data-columns</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">article</span></span></span><br><span class="line"><span class="tag">  <span class="attr">id</span>=<span class="string">"electric-cars"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-columns</span>=<span class="string">"3"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-index-number</span>=<span class="string">"12314"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">data-parent</span>=<span class="string">"cars"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>JS access: <code>dataset</code> (<strong><u>NOTE</u></strong>: dashes are converted to <strong><u>camelCase</u></strong>)</p>
<p><strong><u>[Read &amp; Write:]</u></strong> each property is a string and can be read and written. In the above case setting <code>article.dataset.columns = 5</code> would change that <u>attribute</u> to <code>&quot;5&quot;</code>.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1st approach: standard (Read &amp; Written)</span></span><br><span class="line"><span class="keyword">const</span> article = <span class="built_in">document</span>.querySelector(<span class="string">'#electric-cars'</span>);</span><br><span class="line">article.dataset.columns <span class="comment">// "3"</span></span><br><span class="line">article.dataset.indexNumber <span class="comment">// "12314"</span></span><br><span class="line">article.dataset.parent <span class="comment">// "cars"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2nd approach: getAttribute() (ONLY Read)</span></span><br><span class="line">article.getAttribute(<span class="string">'data-columns'</span>) <span class="comment">// "3"</span></span><br><span class="line">article.getAttribute(<span class="string">'data-index-number'</span>) <span class="comment">// "12314"</span></span><br><span class="line">article.getAttribute(<span class="string">'data-parent'</span>) <span class="comment">// "cars"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>CSS access: <code>attr(name)</code> to get attribute value for <code>name</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// use case 1:</span><br><span class="line"><span class="selector-tag">article</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">attr</span>(data-parent);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// use case 2:</span><br><span class="line"><span class="selector-tag">article</span><span class="selector-attr">[data-columns='3']</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">article</span><span class="selector-attr">[data-columns='4']</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="17-How-does-browser-render-a-webpage"><a href="#17-How-does-browser-render-a-webpage" class="headerlink" title="17. How does browser render a webpage?"></a>17. How does browser render a webpage?</h2><p><a href="https://www.w3cplus.com/performance/understanding-the-critical-rendering-path.html" target="_blank" rel="noopener">credit1</a> <a href="https://ithelp.ithome.com.tw/articles/10187285" target="_blank" rel="noopener">credit2</a> <a href="https://varvy.com/pagespeed/style-script-order.html" target="_blank" rel="noopener">credit3</a></p>
<ol>
<li>Critical Rendering Path: (<u>DON’T put any other task like <code>img</code> download in CRP</u>)<ul>
<li>1.1 <code>HTML</code> =&gt; <code>DOM tree</code></li>
<li>1.2 <code>CSS</code>  =&gt; <code>CSSOM tree</code></li>
<li>1.3 <code>JS</code> download &amp; execute</li>
<li>2.0 <code>DOM Tree</code> + <code>CSSOM Tree</code> + <code>JS</code> =&gt; <code>Render Tree</code></li>
<li>3.0 <code>Layout</code> (<code>ReFlow</code>: related to <code>position</code>, <code>layout</code>, <code>height</code>, <code>width</code>)</li>
<li>4.0 <code>Paint</code> (<code>RePain</code>: related to <code>color</code>, etc not related to layout)</li>
</ul>
</li>
<li><code>CSS</code> is  <strong><u>render-blocking source</u></strong>, as it is cascading, has to parse to the end to form a determinated rendering rule; It <u><strong>can also block JS</strong></u>, as JS has to wait complete CSSOM tree to finish, to modify the CSS</li>
<li><code>JS</code> is <u><strong>HTML parse-blocking source</strong></u>, as it don’t need to wait DOM to finish, rather, it can change the DOM in the fly.<ol>
<li><strong>regular script</strong>: download &amp; execution will block HTML parsing</li>
<li><strong>script async</strong>: download won’t block (async download), execution will block HTML parsing</li>
<li><strong>script defer</strong>: download won’t block (async download),, execution won’t block HTML parsing</li>
</ol>
</li>
</ol>
<h2 id="18-CSS-float-set-amp-clear"><a href="#18-CSS-float-set-amp-clear" class="headerlink" title="18. CSS: float set &amp; clear"></a>18. CSS: <code>float</code> set &amp; clear</h2><ul>
<li><p><code>float</code> will put element on its left/right side of its container(box model)</p>
</li>
<li><p>floated element is <u>removed from <strong>normal</strong> flow</u>, <u>but still remaining a <strong>part of flow</strong></u></p>
</li>
<li><p><code>float</code> will force some value of <code>display</code> to be <code>block</code>, like: <code>display: inline</code>, <code>inline-block</code>, <code>table-cell</code></p>
</li>
<li><p><code>clear</code> will specify an element must be <u><strong>moved below</strong></u> a floating element.</p>
</li>
<li><p>If an element contains only floated elements, its height collapses to nothing. Solution <strong><u>clearfix</u></strong> as following:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#container</span><span class="selector-pseudo">::after</span> &#123; </span><br><span class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">  <span class="attribute">display</span>: block; </span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="19-CSS-positioning"><a href="#19-CSS-positioning" class="headerlink" title="19. CSS: positioning"></a>19. CSS: positioning</h2><p><a href="https://caomingkai.github.io/2018/12/05/JS-common-interview-problems/" target="_blank" rel="noopener">blog_1</a></p>
<h2 id="20-HTML-People-you-may-know"><a href="#20-HTML-People-you-may-know" class="headerlink" title="20. HTML: People you may know"></a>20. HTML: People you may know</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.class-name</span> &#123;</span></span><br><span class="line"><span class="undefined">    box-shadow: </span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"card-people-may-known"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__ignore-btn"</span>&gt;</span></span><br><span class="line">     X</span><br><span class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__profile-info"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__name-link"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span> <span class="attr">alt</span>=<span class="string">"Mingkai's photo"</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__photo"</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden"</span>&gt;</span>Person's Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tooltip-container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__name"</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>        </span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tooltip-container__tooltip-text"</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"hidden"</span>&gt;</span>Person's Name<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tooltip-container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"card-people-may-known__position"</span>&gt;</span>&#123;position&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tooltip-container__tooltip-text"</span>&gt;</span>&#123;name&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"footer"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span> connect this person <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">role</span>=<span class="string">"connect"</span>&gt;</span> connect <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="21-UI-create-a-tooltip"><a href="#21-UI-create-a-tooltip" class="headerlink" title="21. UI: create a tooltip"></a>21. UI: create a tooltip</h2><p>写一个类似tooltip的widget，当用户把鼠标放在LinkedIn页面上某个联系人的名字上时，会出现一个类似tooltip的预览框，里面有该用户的头像，姓名，degree以及title。要求先用HTML以及CSS mock up下大致的layout，然后用AJAX得到所需要显示的用户信息。？</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.tooltip</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: relative;</span></span><br><span class="line"><span class="undefined">  display: inline-block;</span></span><br><span class="line"><span class="undefined">  border-bottom: 1px dotted black;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.tooltip</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="undefined">  visibility: hidden;</span></span><br><span class="line"><span class="undefined">  width: 120px;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#555</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">  text-align: center;</span></span><br><span class="line"><span class="undefined">  border-radius: 6px;</span></span><br><span class="line"><span class="undefined">  padding: 5px 0;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  z-index: 1;</span></span><br><span class="line"><span class="undefined">  bottom: 125%;</span></span><br><span class="line"><span class="undefined">  left: 50%;</span></span><br><span class="line"><span class="undefined">  margin-left: -60px;</span></span><br><span class="line"><span class="undefined">  opacity: 0;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">transition</span>: <span class="selector-tag">opacity</span> 0<span class="selector-class">.3s</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.tooltip</span> <span class="selector-class">.tooltiptext</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="undefined">  content: "";</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="undefined">  top: 100%;</span></span><br><span class="line"><span class="undefined">  left: 50%;</span></span><br><span class="line"><span class="undefined">  margin-left: -5px;</span></span><br><span class="line"><span class="undefined">  border-width: 5px;</span></span><br><span class="line"><span class="undefined">  border-style: solid;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">border-color</span>: <span class="selector-id">#555</span> <span class="selector-tag">transparent</span> <span class="selector-tag">transparent</span> <span class="selector-tag">transparent</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.tooltip</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.tooltiptext</span> &#123;</span></span><br><span class="line"><span class="undefined">  visibility: visible;</span></span><br><span class="line"><span class="undefined">  opacity: 1;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">a &#123;</span></span><br><span class="line"><span class="undefined">text-decoration: none;&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"text-align:center;"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Tooltip<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Move the mouse over the text below:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tooltip"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_tooltip"</span>&gt;</span></span><br><span class="line">   Hover over me</span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"tooltiptext"</span>&gt;</span>Tooltip text<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="22-JS-memorize-function"><a href="#22-JS-memorize-function" class="headerlink" title="22. JS: memorize function"></a>22. JS: memorize function</h2><p>Create a memo function take a function and returns a new one. The returned function can cache the result for corresponding parameters.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Approach 1: store result onto returned function (self-contained)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cachify_1</span>(<span class="params">fn, resolver</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// use `!=` instead of `!==`, since </span></span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> fn != <span class="string">'function'</span> || (resolver != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> resolver != <span class="string">'function'</span>)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Not a function"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> fn_memoized = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> key = resolver ? resolver.apply(<span class="literal">null</span>, args) : args[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> cache = fn_memoized.cache;</span><br><span class="line">    <span class="keyword">if</span> (cache.has(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span> cache.get(key);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> result = fn.apply(<span class="literal">null</span>, args);</span><br><span class="line">    cache.set(key, result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">  fn_memoized.cache = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> fn_memoized;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params">para</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (i &lt; <span class="number">10000</span>) &#123;</span><br><span class="line">    result += para;</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cachedTest1 = cachify_1(test1);</span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"test1_1st"</span>);</span><br><span class="line"><span class="keyword">let</span> res1 = cachedTest1(<span class="number">9</span>);</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"test1_1st"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"test1_1st: "</span>, res1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">"test1_2nd"</span>);</span><br><span class="line">res1 = cachedTest1(<span class="number">9</span>);</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"test1_2nd"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"test1_2nd: "</span>, res1);</span><br></pre></td></tr></table></figure>
<h2 id="23-UI-Inifinite-scroll"><a href="#23-UI-Inifinite-scroll" class="headerlink" title="23. UI: Inifinite scroll"></a>23. UI: Inifinite scroll</h2><h2 id="24-JS-lazy-load"><a href="#24-JS-lazy-load" class="headerlink" title="24. JS: lazy load"></a>24. JS: lazy load</h2><p><a href="https://w3bits.com/async-javascript/" target="_blank" rel="noopener">[Credit]</a> web browser renders a webpage by reading it’s markup (HTML). If the markup contains an external JavaScript file, the browser stops loading the markup and starts downloading that external JavaScript – this causes a block in webpage rendering (known as <strong>render blocking</strong> or <strong>parser blocking</strong>).</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> s = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);</span><br><span class="line">    s.type = <span class="string">'text/javascript'</span>;</span><br><span class="line">    s.async = <span class="literal">true</span>;</span><br><span class="line">    s.src = <span class="string">'http://yourdomain.com/script.js'</span>;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'script'</span>)[<span class="number">0</span>];</span><br><span class="line">    x.parentNode.insertBefore(s, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="26-UI-autocomplete"><a href="#26-UI-autocomplete" class="headerlink" title="26. UI: autocomplete"></a>26. UI: autocomplete</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">* &#123;</span></span><br><span class="line"><span class="undefined">  box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">body &#123;</span></span><br><span class="line"><span class="undefined">  font: 16px Arial;  </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/*the container must be positioned relative:*/</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.autocomplete</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: relative;</span></span><br><span class="line"><span class="undefined">  display: inline-block;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">input &#123;</span></span><br><span class="line"><span class="undefined">  border: 1px solid transparent;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#f1f1f1</span>;</span></span><br><span class="line"><span class="undefined">  padding: 10px;</span></span><br><span class="line"><span class="undefined">  font-size: 16px;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-tag">input</span><span class="selector-attr">[type=text]</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#f1f1f1</span>;</span></span><br><span class="line"><span class="undefined">  width: 100%;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-tag">input</span><span class="selector-attr">[type=submit]</span> &#123;</span></span><br><span class="line"><span class="undefined">  background-color: DodgerBlue;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line"><span class="undefined">  cursor: pointer;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.autocomplete-items</span> &#123;</span></span><br><span class="line"><span class="undefined">  position: absolute;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#d4d4d4</span>;</span></span><br><span class="line"><span class="undefined">  border-bottom: none;</span></span><br><span class="line"><span class="undefined">  border-top: none;</span></span><br><span class="line"><span class="undefined">  z-index: 99;</span></span><br><span class="line"><span class="css">  <span class="comment">/*position the autocomplete items to be the same width as the container:*/</span></span></span><br><span class="line"><span class="undefined">  top: 100%;</span></span><br><span class="line"><span class="undefined">  left: 0;</span></span><br><span class="line"><span class="undefined">  right: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.autocomplete-items</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="undefined">  padding: 10px;</span></span><br><span class="line"><span class="undefined">  cursor: pointer;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#fff</span>; </span></span><br><span class="line"><span class="css">  <span class="selector-tag">border-bottom</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#d4d4d4</span>; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/*when hovering an item:*/</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.autocomplete-items</span> <span class="selector-tag">div</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#e9e9e9</span>; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="comment">/*when navigating through the items using the arrow keys:*/</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.autocomplete-active</span> &#123;</span></span><br><span class="line"><span class="undefined">  background-color: DodgerBlue !important; </span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#ffffff</span>; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span>     </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Autocomplete<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Start typing:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--Make sure the form has the autocomplete function switched off:--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> <span class="attr">action</span>=<span class="string">"/action_page.php"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"autocomplete"</span> <span class="attr">style</span>=<span class="string">"width:300px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"myInput"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"myCountry"</span> <span class="attr">placeholder</span>=<span class="string">"Country"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">autocomplete</span>(<span class="params">inp, arr</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">/*the autocomplete function takes two arguments,</span></span></span><br><span class="line"><span class="javascript">  the text field element and an array <span class="keyword">of</span> possible autocompleted values:*<span class="regexp">/</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> currentFocus;</span></span><br><span class="line"><span class="javascript">  <span class="comment">/*execute a function when someone writes in the text field:*/</span></span></span><br><span class="line"><span class="javascript">  inp.addEventListener(<span class="string">"input"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> a, b, i, val = <span class="keyword">this</span>.value;</span></span><br><span class="line"><span class="javascript">      <span class="comment">/*close any already open lists of autocompleted values*/</span></span></span><br><span class="line"><span class="undefined">      closeAllLists();</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!val) &#123; <span class="keyword">return</span> <span class="literal">false</span>;&#125;</span></span><br><span class="line"><span class="undefined">      currentFocus = -1;</span></span><br><span class="line"><span class="javascript">      <span class="comment">/*create a DIV element that will contain the items (values):*/</span></span></span><br><span class="line"><span class="javascript">      a = <span class="built_in">document</span>.createElement(<span class="string">"DIV"</span>);</span></span><br><span class="line"><span class="javascript">      a.setAttribute(<span class="string">"id"</span>, <span class="keyword">this</span>.id + <span class="string">"autocomplete-list"</span>);</span></span><br><span class="line"><span class="javascript">      a.setAttribute(<span class="string">"class"</span>, <span class="string">"autocomplete-items"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="comment">/*append the DIV element as a child of the autocomplete container:*/</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.parentNode.appendChild(a);</span></span><br><span class="line"><span class="javascript">      <span class="comment">/*for each item in the array...*/</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*check if the item starts with the same letters as the text field value:*/</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (arr[i].substr(<span class="number">0</span>, val.length).toUpperCase() == val.toUpperCase()) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">/*create a DIV element for each matching element:*/</span></span></span><br><span class="line"><span class="javascript">          b = <span class="built_in">document</span>.createElement(<span class="string">"DIV"</span>);</span></span><br><span class="line"><span class="javascript">          <span class="comment">/*make the matching letters bold:*/</span></span></span><br><span class="line"><span class="javascript">          b.innerHTML = <span class="string">"&lt;strong&gt;"</span> + arr[i].substr(<span class="number">0</span>, val.length) + <span class="string">"&lt;/strong&gt;"</span>;</span></span><br><span class="line"><span class="undefined">          b.innerHTML += arr[i].substr(val.length);</span></span><br><span class="line"><span class="javascript">          <span class="comment">/*insert a input field that will hold the current array item's value:*/</span></span></span><br><span class="line"><span class="xml">          b.innerHTML += "<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'hidden'</span> <span class="attr">value</span>=<span class="string">'" + arr[i] + "'</span>&gt;</span>";</span></span><br><span class="line"><span class="javascript">          <span class="comment">/*execute a function when someone clicks on the item value (DIV element):*/</span></span></span><br><span class="line"><span class="javascript">          b.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="comment">/*insert the value for the autocomplete text field:*/</span></span></span><br><span class="line"><span class="javascript">              inp.value = <span class="keyword">this</span>.getElementsByTagName(<span class="string">"input"</span>)[<span class="number">0</span>].value;</span></span><br><span class="line"><span class="javascript">              <span class="comment">/*close the list of autocompleted values,</span></span></span><br><span class="line"><span class="javascript">              (or any other open lists <span class="keyword">of</span> autocompleted values:*<span class="regexp">/</span></span></span><br><span class="line"><span class="undefined">              closeAllLists();</span></span><br><span class="line"><span class="undefined">          &#125;);</span></span><br><span class="line"><span class="undefined">          a.appendChild(b);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="javascript">  <span class="comment">/*execute a function presses a key on the keyboard:*/</span></span></span><br><span class="line"><span class="javascript">  inp.addEventListener(<span class="string">"keydown"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> x = <span class="built_in">document</span>.getElementById(<span class="keyword">this</span>.id + <span class="string">"autocomplete-list"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (x) x = x.getElementsByTagName(<span class="string">"div"</span>);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (e.keyCode == <span class="number">40</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*If the arrow DOWN key is pressed,</span></span></span><br><span class="line"><span class="undefined">        increase the currentFocus variable:*/</span></span><br><span class="line"><span class="undefined">        currentFocus++;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*and and make the current item more visible:*/</span></span></span><br><span class="line"><span class="undefined">        addActive(x);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.keyCode == <span class="number">38</span>) &#123; <span class="comment">//up</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">/*If the arrow UP key is pressed,</span></span></span><br><span class="line"><span class="undefined">        decrease the currentFocus variable:*/</span></span><br><span class="line"><span class="undefined">        currentFocus--;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*and and make the current item more visible:*/</span></span></span><br><span class="line"><span class="undefined">        addActive(x);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">/*If the ENTER key is pressed, prevent the form from being submitted,*/</span></span></span><br><span class="line"><span class="undefined">        e.preventDefault();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (currentFocus &gt; <span class="number">-1</span>) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">/*and simulate a click on the "active" item:*/</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (x) x[currentFocus].click();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">addActive</span>(<span class="params">x</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">/*a function to classify an item as "active":*/</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (!x) <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript">    <span class="comment">/*start by removing the "active" class on all items:*/</span></span></span><br><span class="line"><span class="undefined">    removeActive(x);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (currentFocus &gt;= x.length) currentFocus = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (currentFocus &lt; <span class="number">0</span>) currentFocus = (x.length - <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">/*add class "autocomplete-active":*/</span></span></span><br><span class="line"><span class="javascript">    x[currentFocus].classList.add(<span class="string">"autocomplete-active"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">removeActive</span>(<span class="params">x</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">/*a function to remove the "active" class from all autocomplete items:*/</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; x.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">      x[i].classList.remove(<span class="string">"autocomplete-active"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">closeAllLists</span>(<span class="params">elmnt</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">/*close all autocomplete lists in the document,</span></span></span><br><span class="line"><span class="javascript">    except the one passed <span class="keyword">as</span> an argument:*<span class="regexp">/</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> x = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"autocomplete-items"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; x.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (elmnt != x[i] &amp;&amp; elmnt != inp) &#123;</span></span><br><span class="line"><span class="undefined">        x[i].parentNode.removeChild(x[i]);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="comment">/*execute a function when someone clicks in the document:*/</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">      closeAllLists(e.target);</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">/*An array containing all the country names in the world:*/</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> countries = [<span class="string">"Afghanistan"</span>,<span class="string">"Albania"</span>,<span class="string">"Algeria"</span>,<span class="string">"Andorra"</span>,<span class="string">"Angola"</span>,<span class="string">"Anguilla"</span>,<span class="string">"Antigua &amp; Barbuda"</span>,<span class="string">"Argentina"</span>,<span class="string">"Armenia"</span>,<span class="string">"Aruba"</span>,<span class="string">"Australia"</span>,<span class="string">"Austria"</span>,<span class="string">"Azerbaijan"</span>,<span class="string">"Bahamas"</span>,<span class="string">"Bahrain"</span>,<span class="string">"Bangladesh"</span>,<span class="string">"Barbados"</span>,<span class="string">"Belarus"</span>,<span class="string">"Belgium"</span>,<span class="string">"Belize"</span>,<span class="string">"Benin"</span>,<span class="string">"Bermuda"</span>,<span class="string">"Bhutan"</span>,<span class="string">"Bolivia"</span>,<span class="string">"Bosnia &amp; Herzegovina"</span>,<span class="string">"Botswana"</span>,<span class="string">"Brazil"</span>,<span class="string">"British Virgin Islands"</span>,<span class="string">"Brunei"</span>,<span class="string">"Bulgaria"</span>,<span class="string">"Burkina Faso"</span>,<span class="string">"Burundi"</span>,<span class="string">"Cambodia"</span>,<span class="string">"Cameroon"</span>,<span class="string">"Canada"</span>,<span class="string">"Cape Verde"</span>,<span class="string">"Cayman Islands"</span>,<span class="string">"Central Arfrican Republic"</span>,<span class="string">"Chad"</span>,<span class="string">"Chile"</span>,<span class="string">"China"</span>,<span class="string">"Colombia"</span>,<span class="string">"Congo"</span>,<span class="string">"Cook Islands"</span>,<span class="string">"Costa Rica"</span>,<span class="string">"Cote D Ivoire"</span>,<span class="string">"Croatia"</span>,<span class="string">"Cuba"</span>,<span class="string">"Curacao"</span>,<span class="string">"Cyprus"</span>,<span class="string">"Czech Republic"</span>,<span class="string">"Denmark"</span>,<span class="string">"Djibouti"</span>,<span class="string">"Dominica"</span>,<span class="string">"Dominican Republic"</span>,<span class="string">"Ecuador"</span>,<span class="string">"Egypt"</span>,<span class="string">"El Salvador"</span>,<span class="string">"Equatorial Guinea"</span>,<span class="string">"Eritrea"</span>,<span class="string">"Estonia"</span>,<span class="string">"Ethiopia"</span>,<span class="string">"Falkland Islands"</span>,<span class="string">"Faroe Islands"</span>,<span class="string">"Fiji"</span>,<span class="string">"Finland"</span>,<span class="string">"France"</span>,<span class="string">"French Polynesia"</span>,<span class="string">"French West Indies"</span>,<span class="string">"Gabon"</span>,<span class="string">"Gambia"</span>,<span class="string">"Georgia"</span>,<span class="string">"Germany"</span>,<span class="string">"Ghana"</span>,<span class="string">"Gibraltar"</span>,<span class="string">"Greece"</span>,<span class="string">"Greenland"</span>,<span class="string">"Grenada"</span>,<span class="string">"Guam"</span>,<span class="string">"Guatemala"</span>,<span class="string">"Guernsey"</span>,<span class="string">"Guinea"</span>,<span class="string">"Guinea Bissau"</span>,<span class="string">"Guyana"</span>,<span class="string">"Haiti"</span>,<span class="string">"Honduras"</span>,<span class="string">"Hong Kong"</span>,<span class="string">"Hungary"</span>,<span class="string">"Iceland"</span>,<span class="string">"India"</span>,<span class="string">"Indonesia"</span>,<span class="string">"Iran"</span>,<span class="string">"Iraq"</span>,<span class="string">"Ireland"</span>,<span class="string">"Isle of Man"</span>,<span class="string">"Israel"</span>,<span class="string">"Italy"</span>,<span class="string">"Jamaica"</span>,<span class="string">"Japan"</span>,<span class="string">"Jersey"</span>,<span class="string">"Jordan"</span>,<span class="string">"Kazakhstan"</span>,<span class="string">"Kenya"</span>,<span class="string">"Kiribati"</span>,<span class="string">"Kosovo"</span>,<span class="string">"Kuwait"</span>,<span class="string">"Kyrgyzstan"</span>,<span class="string">"Laos"</span>,<span class="string">"Latvia"</span>,<span class="string">"Lebanon"</span>,<span class="string">"Lesotho"</span>,<span class="string">"Liberia"</span>,<span class="string">"Libya"</span>,<span class="string">"Liechtenstein"</span>,<span class="string">"Lithuania"</span>,<span class="string">"Luxembourg"</span>,<span class="string">"Macau"</span>,<span class="string">"Macedonia"</span>,<span class="string">"Madagascar"</span>,<span class="string">"Malawi"</span>,<span class="string">"Malaysia"</span>,<span class="string">"Maldives"</span>,<span class="string">"Mali"</span>,<span class="string">"Malta"</span>,<span class="string">"Marshall Islands"</span>,<span class="string">"Mauritania"</span>,<span class="string">"Mauritius"</span>,<span class="string">"Mexico"</span>,<span class="string">"Micronesia"</span>,<span class="string">"Moldova"</span>,<span class="string">"Monaco"</span>,<span class="string">"Mongolia"</span>,<span class="string">"Montenegro"</span>,<span class="string">"Montserrat"</span>,<span class="string">"Morocco"</span>,<span class="string">"Mozambique"</span>,<span class="string">"Myanmar"</span>,<span class="string">"Namibia"</span>,<span class="string">"Nauro"</span>,<span class="string">"Nepal"</span>,<span class="string">"Netherlands"</span>,<span class="string">"Netherlands Antilles"</span>,<span class="string">"New Caledonia"</span>,<span class="string">"New Zealand"</span>,<span class="string">"Nicaragua"</span>,<span class="string">"Niger"</span>,<span class="string">"Nigeria"</span>,<span class="string">"North Korea"</span>,<span class="string">"Norway"</span>,<span class="string">"Oman"</span>,<span class="string">"Pakistan"</span>,<span class="string">"Palau"</span>,<span class="string">"Palestine"</span>,<span class="string">"Panama"</span>,<span class="string">"Papua New Guinea"</span>,<span class="string">"Paraguay"</span>,<span class="string">"Peru"</span>,<span class="string">"Philippines"</span>,<span class="string">"Poland"</span>,<span class="string">"Portugal"</span>,<span class="string">"Puerto Rico"</span>,<span class="string">"Qatar"</span>,<span class="string">"Reunion"</span>,<span class="string">"Romania"</span>,<span class="string">"Russia"</span>,<span class="string">"Rwanda"</span>,<span class="string">"Saint Pierre &amp; Miquelon"</span>,<span class="string">"Samoa"</span>,<span class="string">"San Marino"</span>,<span class="string">"Sao Tome and Principe"</span>,<span class="string">"Saudi Arabia"</span>,<span class="string">"Senegal"</span>,<span class="string">"Serbia"</span>,<span class="string">"Seychelles"</span>,<span class="string">"Sierra Leone"</span>,<span class="string">"Singapore"</span>,<span class="string">"Slovakia"</span>,<span class="string">"Slovenia"</span>,<span class="string">"Solomon Islands"</span>,<span class="string">"Somalia"</span>,<span class="string">"South Africa"</span>,<span class="string">"South Korea"</span>,<span class="string">"South Sudan"</span>,<span class="string">"Spain"</span>,<span class="string">"Sri Lanka"</span>,<span class="string">"St Kitts &amp; Nevis"</span>,<span class="string">"St Lucia"</span>,<span class="string">"St Vincent"</span>,<span class="string">"Sudan"</span>,<span class="string">"Suriname"</span>,<span class="string">"Swaziland"</span>,<span class="string">"Sweden"</span>,<span class="string">"Switzerland"</span>,<span class="string">"Syria"</span>,<span class="string">"Taiwan"</span>,<span class="string">"Tajikistan"</span>,<span class="string">"Tanzania"</span>,<span class="string">"Thailand"</span>,<span class="string">"Timor L'Este"</span>,<span class="string">"Togo"</span>,<span class="string">"Tonga"</span>,<span class="string">"Trinidad &amp; Tobago"</span>,<span class="string">"Tunisia"</span>,<span class="string">"Turkey"</span>,<span class="string">"Turkmenistan"</span>,<span class="string">"Turks &amp; Caicos"</span>,<span class="string">"Tuvalu"</span>,<span class="string">"Uganda"</span>,<span class="string">"Ukraine"</span>,<span class="string">"United Arab Emirates"</span>,<span class="string">"United Kingdom"</span>,<span class="string">"United States of America"</span>,<span class="string">"Uruguay"</span>,<span class="string">"Uzbekistan"</span>,<span class="string">"Vanuatu"</span>,<span class="string">"Vatican City"</span>,<span class="string">"Venezuela"</span>,<span class="string">"Vietnam"</span>,<span class="string">"Virgin Islands (US)"</span>,<span class="string">"Yemen"</span>,<span class="string">"Zambia"</span>,<span class="string">"Zimbabwe"</span>];</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="comment">/*initiate the autocomplete function on the "myInput" element, and pass along the countries array as possible autocomplete values:*/</span></span></span><br><span class="line"><span class="javascript">autocomplete(<span class="built_in">document</span>.getElementById(<span class="string">"myInput"</span>), countries);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="27-UI-widget"><a href="#27-UI-widget" class="headerlink" title="27. UI: widget"></a>27. UI: widget</h2><p>build a widget with 4 lists and 3 nested list, nested can be span/collapse when clicking on parents, highlight txt when hover大概是<ul class="clickable">  <li>     <ul class="tobeExpand">        <li></li></ul></li></ul></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.accordion</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#eee</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">color</span>: <span class="selector-id">#444</span>;</span></span><br><span class="line"><span class="undefined">  cursor: pointer;</span></span><br><span class="line"><span class="undefined">  padding: 18px;</span></span><br><span class="line"><span class="undefined">  width: 100%;</span></span><br><span class="line"><span class="undefined">  border: none;</span></span><br><span class="line"><span class="undefined">  text-align: left;</span></span><br><span class="line"><span class="undefined">  outline: none;</span></span><br><span class="line"><span class="undefined">  font-size: 15px;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">transition</span>: 0<span class="selector-class">.4s</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.active</span>, <span class="selector-class">.accordion</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background-color</span>: <span class="selector-id">#ccc</span>; </span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.panel</span> &#123;</span></span><br><span class="line"><span class="undefined">  padding: 0 18px;</span></span><br><span class="line"><span class="undefined">  display: none;</span></span><br><span class="line"><span class="undefined">  background-color: white;</span></span><br><span class="line"><span class="undefined">  overflow: hidden;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Accordion<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span>Section 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span>Section 2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span>Section 3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> acc = <span class="built_in">document</span>.getElementsByClassName(<span class="string">"accordion"</span>);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> i;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; acc.length; i++) &#123;</span></span><br><span class="line"><span class="javascript">  acc[i].addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.classList.toggle(<span class="string">"active"</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> panel = <span class="keyword">this</span>.nextElementSibling;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (panel.style.display === <span class="string">"block"</span>) &#123;</span></span><br><span class="line"><span class="javascript">      panel.style.display = <span class="string">"none"</span>;</span></span><br><span class="line"><span class="javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">      panel.style.display = <span class="string">"block"</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="28-Browser-GET-v-s-POST"><a href="#28-Browser-GET-v-s-POST" class="headerlink" title="28: Browser: GET v.s. POST"></a>28: Browser: GET v.s. POST</h2><h2 id="29-UI-thumb-up"><a href="#29-UI-thumb-up" class="headerlink" title="29. UI: thumb up"></a>29. UI: thumb up</h2><p>写一个类似于点赞功能的ui，点赞之后旁边的数字+1，取消之后-1写html的时候问了怎么改进accessiblity和symentic？用了一些<header><footer>之类的标签，加了role属性。写了个js函数来处理button toggle，事件绑定在外层容器上用了事件代理来处理点击操作</footer></header></p>
<h2 id="30-JS"><a href="#30-JS" class="headerlink" title="30. JS:"></a>30. JS:</h2><ol>
<li>几座小岛那题</li>
<li>Lowest Common Ancestor of a Binary Search Tree 还没不及写完 只是讲一下做法而已</li>
<li>衣而期 </li>
<li>衣而溜</li>
</ol>
<p>Debounce &amp; Throttle</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br></pre></td><td class="code"><pre><span class="line">function debounce_leading(fn, period) &#123;</span><br><span class="line">  let allowed = true;</span><br><span class="line">  let timeOut = null;</span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    if (allowed) &#123;</span><br><span class="line">      allowed = false;</span><br><span class="line">      fn(...args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    clearTimeout(timeOut);</span><br><span class="line">    timeOut = setTimeout(() =&gt; &#123;</span><br><span class="line">      allowed = true;</span><br><span class="line">    &#125;, period);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function debounce_trailing(fn, period) &#123;</span><br><span class="line">  let timeOut = null;</span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    clearTimeout(timeOut);</span><br><span class="line">    timeOut = setTimeout(() =&gt; &#123;</span><br><span class="line">      fn(...args);</span><br><span class="line">    &#125;, period);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by thephpjo on 21.04.14.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by thephpjo on 21.04.14.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">var helpers = &#123;</span><br><span class="line">  /*</span><br><span class="line">  debounce: function(func, wait, scope) &#123;</span><br><span class="line">    var timeout;</span><br><span class="line">    return function() &#123;</span><br><span class="line">      var context = scope || this,</span><br><span class="line">        args = arguments;</span><br><span class="line">      var later = function() &#123;</span><br><span class="line">        timeout = null;</span><br><span class="line">        func.apply(context, args);</span><br><span class="line">      &#125;;</span><br><span class="line">      clearTimeout(timeout);</span><br><span class="line">      timeout = setTimeout(later, wait);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  */</span><br><span class="line"></span><br><span class="line">  /*</span><br><span class="line"></span><br><span class="line">  throttle: function(fn, threshhold, scope) &#123;</span><br><span class="line">    threshhold || (threshhold = 250);</span><br><span class="line">    var last, deferTimer;</span><br><span class="line">    return function() &#123;</span><br><span class="line">      var context = scope || this;</span><br><span class="line"></span><br><span class="line">      var now = +new Date(),</span><br><span class="line">        args = arguments;</span><br><span class="line">      if (last &amp;&amp; now <span class="tag">&lt; <span class="attr">last</span> + <span class="attr">threshhold</span>) &#123;</span></span><br><span class="line"><span class="tag">        // <span class="attr">hold</span> <span class="attr">on</span> <span class="attr">to</span> <span class="attr">it</span></span></span><br><span class="line"><span class="tag">        <span class="attr">clearTimeout</span>(<span class="attr">deferTimer</span>);</span></span><br><span class="line"><span class="tag">        <span class="attr">deferTimer</span> = <span class="string">setTimeout(function()</span> &#123;</span></span><br><span class="line"><span class="tag">          <span class="attr">last</span> = <span class="string">now;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fn.apply</span>(<span class="attr">context</span>, <span class="attr">args</span>);</span></span><br><span class="line"><span class="tag">        &#125;, <span class="attr">threshhold</span>);</span></span><br><span class="line"><span class="tag">      &#125; <span class="attr">else</span> &#123;</span></span><br><span class="line"><span class="tag">        <span class="attr">last</span> = <span class="string">now;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fn.apply</span>(<span class="attr">context</span>, <span class="attr">args</span>);</span></span><br><span class="line"><span class="tag">      &#125;</span></span><br><span class="line"><span class="tag">    &#125;;</span></span><br><span class="line"><span class="tag">  &#125;</span></span><br><span class="line"><span class="tag">  */</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag"><span class="attr">throttle:</span> <span class="attr">function</span>(<span class="attr">func</span>, <span class="attr">wait</span>, <span class="attr">context</span>, <span class="attr">options</span>) &#123;</span></span><br><span class="line"><span class="tag">  <span class="attr">var</span> <span class="attr">timeout</span>, <span class="attr">args</span>, <span class="attr">result</span>;</span></span><br><span class="line"><span class="tag">  <span class="attr">var</span> <span class="attr">previous</span> = <span class="string">0;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">if</span> (!<span class="attr">options</span>) <span class="attr">options</span> = <span class="string">&#123;&#125;;</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">  <span class="attr">var</span> <span class="attr">later</span> = <span class="string">function()</span> &#123;</span></span><br><span class="line"><span class="tag">    <span class="attr">previous</span> = <span class="string">options.leading</span> === <span class="string">false</span> ? <span class="attr">0</span> <span class="attr">:</span> <span class="attr">Date.now</span>();</span></span><br><span class="line"><span class="tag">    <span class="attr">timeout</span> = <span class="string">null;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">result</span> = <span class="string">func.apply(context,</span> <span class="attr">args</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">if</span> (!<span class="attr">timeout</span>) <span class="attr">context</span> = <span class="string">args</span> = <span class="string">null;</span></span></span><br><span class="line"><span class="tag">  &#125;;</span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">  <span class="attr">var</span> <span class="attr">throttled</span> = <span class="string">function()</span> &#123;</span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">now</span> = <span class="string">Date.now();</span></span></span><br><span class="line"><span class="tag">    <span class="attr">if</span> (!<span class="attr">previous</span> &amp;&amp; <span class="attr">options.leading</span> === <span class="string">false)</span> <span class="attr">previous</span> = <span class="string">now;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">var</span> <span class="attr">remaining</span> = <span class="string">wait</span> <span class="attr">-</span> (<span class="attr">now</span> <span class="attr">-</span> <span class="attr">previous</span>);</span></span><br><span class="line"><span class="tag">    <span class="attr">context</span> = <span class="string">this;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">args</span> = <span class="string">arguments;</span></span></span><br><span class="line">    if (remaining &lt;= 0 || remaining &gt; wait) &#123;</span><br><span class="line">      if (timeout) &#123;</span><br><span class="line">        clearTimeout(timeout);</span><br><span class="line">        timeout = null;</span><br><span class="line">      &#125;</span><br><span class="line">      previous = now;</span><br><span class="line">      result = func.apply(context, args);</span><br><span class="line">      if (!timeout) context = args = null;</span><br><span class="line">    &#125; else if (!timeout &amp;&amp; options.trailing !== false) &#123;</span><br><span class="line">      timeout = setTimeout(later, remaining);</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  throttled.cancel = function() &#123;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line">    previous = 0;</span><br><span class="line">    timeout = context = args = null;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return throttled;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// Returns a function, that, as long as it continues to be invoked, will not</span><br><span class="line">// be triggered. The function will be called after it stops being called for</span><br><span class="line">// N milliseconds. If `immediate` is passed, trigger the function on the</span><br><span class="line">// leading edge, instead of the trailing.</span><br><span class="line">debounce: function(func, wait, context, immediate) &#123;</span><br><span class="line">  var timeout, result;</span><br><span class="line"></span><br><span class="line">  var later = function(args) &#123;</span><br><span class="line">    timeout = null;</span><br><span class="line">    if (args) result = func.apply(context, args);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  var debounced = function(...args) &#123;</span><br><span class="line">    if (timeout) clearTimeout(timeout);</span><br><span class="line">    if (immediate) &#123;</span><br><span class="line">      var callNow = !timeout;</span><br><span class="line">      timeout = setTimeout(later, wait);</span><br><span class="line">      if (callNow) result = func.apply(this, args);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // timeout = _.delay(later, wait, this, args);</span><br><span class="line">      timeout = setTimeout(function() &#123;</span><br><span class="line">        return later.apply(this, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return result;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  debounced.cancel = function() &#123;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line">    timeout = null;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return debounced;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">debounce_leading: function(fn, wait, context) &#123;</span><br><span class="line">  let allowed = true;</span><br><span class="line">  let timeout = null;</span><br><span class="line"></span><br><span class="line">  let debounced = function(...args) &#123;</span><br><span class="line">    if (allowed) &#123;</span><br><span class="line">      allowed = false;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      clearTimeout(timeout);</span><br><span class="line">      timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        allowed = true;</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  return debounced;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">debounce_max: function bouncify(fn, wait, context, maxWait) &#123;</span><br><span class="line">  let timeout = null;</span><br><span class="line">  let previous = null;</span><br><span class="line">  let firstTime = true;</span><br><span class="line"></span><br><span class="line">  const bounced = function(...args) &#123;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line"></span><br><span class="line">    if (firstTime) &#123;</span><br><span class="line">      firstTime = false;</span><br><span class="line">      previous = Date.now();</span><br><span class="line">    &#125;</span><br><span class="line">    let now = Date.now();</span><br><span class="line">    if (now - previous &gt;= maxWait) &#123;</span><br><span class="line">      previous = now;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      // console.log("debouce: ", now - previous)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        previous = Date.now();</span><br><span class="line">        fn.apply(context, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return bounced;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">throttle_leading: function (fn, wait, context, options) &#123;</span><br><span class="line">  let scheduled = true;</span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    if (scheduled) &#123;</span><br><span class="line">      scheduled = false;</span><br><span class="line">      fn.apply(this, args);</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        scheduled = true;</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">throttle_trailing: function (fn, wait, context, options) &#123;</span><br><span class="line">  let scheduled = false;</span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    if (!scheduled) &#123;</span><br><span class="line">      scheduled = true;</span><br><span class="line">      setTimeout(() =&gt; &#123;</span><br><span class="line">        scheduled = false;</span><br><span class="line">        fn.apply(this, args);</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">throttle_trailing_2: function (fn, wait, context, options) &#123;</span><br><span class="line">  let lastInvoke = null;</span><br><span class="line">  let timeout = null;</span><br><span class="line"></span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    let context = this;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line">    if (!lastInvoke) &#123;</span><br><span class="line">      timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        fn.apply(this, args);</span><br><span class="line">        lastInvoke = Date.now();</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      let remain = wait - (Date.now - lastInvoke);</span><br><span class="line">      </span><br><span class="line">      timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        fn.apply(this, args);</span><br><span class="line">        lastInvoke = Date.now();</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// same as below</span><br><span class="line">throttle_leading_version2: function (fn, wait, context, options) &#123;</span><br><span class="line">  let lastInvoke = null;</span><br><span class="line">  let timeout = null;</span><br><span class="line"></span><br><span class="line">  return function(...args) &#123;</span><br><span class="line">    let context = this;</span><br><span class="line">    if (!lastInvoke) &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">      lastInvoke = Date.now();</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      const remain = wait - (Date.now() - lastInvoke);</span><br><span class="line">      clearTimeout(timeout);</span><br><span class="line">      timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">        fn.apply(context, args);</span><br><span class="line">        lastInvoke = Date.now();</span><br><span class="line">      &#125;, remain)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">// same as above</span><br><span class="line">throttle_with_last_call: (func, limit, context) =&gt; &#123;</span><br><span class="line">  let lastFunc</span><br><span class="line">  let lastRan</span><br><span class="line">  return function() &#123;</span><br><span class="line">    const args = arguments</span><br><span class="line"></span><br><span class="line">    // 只第一次执行</span><br><span class="line">    if (!lastRan) &#123;</span><br><span class="line">      func.apply(context, args)</span><br><span class="line">      lastRan = Date.now()</span><br><span class="line">    // 后续重复执行</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      clearTimeout(lastFunc)</span><br><span class="line">      let remain = limit - (Date.now() - lastRan);</span><br><span class="line">      if (remain <span class="tag">&lt;<span class="name">=</span> <span class="attr">0</span>) &#123;</span></span><br><span class="line"><span class="tag">        <span class="attr">func.apply</span>(<span class="attr">context</span>, <span class="attr">args</span>);</span></span><br><span class="line"><span class="tag">        <span class="attr">lastRan</span> = <span class="string">Date.now();</span></span></span><br><span class="line"><span class="tag">      &#125; <span class="attr">else</span> &#123;</span></span><br><span class="line"><span class="tag">        <span class="attr">lastFunc</span> = <span class="string">setTimeout(function()</span> &#123;</span></span><br><span class="line"><span class="tag">          // <span class="attr">if</span> ((<span class="attr">Date.now</span>() <span class="attr">-</span> <span class="attr">lastRan</span>) &gt;</span>= limit) &#123;</span><br><span class="line">            func.apply(context, args)</span><br><span class="line">            lastRan = Date.now()</span><br><span class="line">          // &#125;</span><br><span class="line">        &#125;, remain)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by thephpjo on 21.04.14.</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">function NIM_demo() &#123;</span><br><span class="line">  this.canvas = document.getElementById("paintonme");</span><br><span class="line">  this.context = this.canvas.getContext("2d");</span><br><span class="line"></span><br><span class="line">  this.movearea = document.getElementById("moveonme");</span><br><span class="line"></span><br><span class="line">  this.canvasTimeScale = 5 * 1000;</span><br><span class="line"></span><br><span class="line">  this.paintColors = ["#bbd", "#464", "#d88"];</span><br><span class="line">  this.totalLanes = this.paintColors.length;</span><br><span class="line"></span><br><span class="line">  this.leftMargin = 100;</span><br><span class="line"></span><br><span class="line">  var self = this;</span><br><span class="line"></span><br><span class="line">  this.init = function() &#123;</span><br><span class="line">    this.canvas.width = window.innerWidth - 250;</span><br><span class="line">    this.flush();</span><br><span class="line">    this.movearea.addEventListener("mousemove", this.regularHandler);</span><br><span class="line">    this.movearea.addEventListener(</span><br><span class="line">      "mousemove",</span><br><span class="line">      // helpers.debounce(self.debounceHandler, 1000, this)</span><br><span class="line">      helpers.debounce_leading(self.debounceHandler, 1000, this)</span><br><span class="line">      </span><br><span class="line">      // helpers.debounce_max(self.debounceHandler, 500, this, 1000)</span><br><span class="line">      // helpers.throttle_leading_version2(self.debounceHandler, 1000, this)</span><br><span class="line">      // helpers.throttle_trailing_2(self.debounceHandler, 1000, this)</span><br><span class="line">      </span><br><span class="line">    );</span><br><span class="line">    this.movearea.addEventListener(</span><br><span class="line">      "mousemove",</span><br><span class="line">      helpers.debounce(self.throttleHander, 1000, this)</span><br><span class="line"></span><br><span class="line">      // helpers.throttle(self.throttleHander, 500, this, &#123;trailing: true, leading: true&#125;)</span><br><span class="line">      // helpers.throttle_leading(self.throttleHander, 1000, this, &#123;trailing: true, leading: false&#125;)</span><br><span class="line">      // helpers.throttle_trailing(self.throttleHander, 1000, this, &#123;trailing: true, leading: false&#125;)</span><br><span class="line">      // helpers.throttle_with_last_call(self.throttleHander, 1000, this, &#123;trailing: true, leading: true&#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * painting the rectangle / line</span><br><span class="line">   * @param lane</span><br><span class="line">   * @param time</span><br><span class="line">   */</span><br><span class="line">  this.paintRect = function(lane, time) &#123;</span><br><span class="line">    if (time &gt; this.canvasTimeScale) &#123;</span><br><span class="line">      this.startTime += time;</span><br><span class="line">      time = 0;</span><br><span class="line">      this.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    //            console.log(lane,time);</span><br><span class="line">    this.context.fillStyle = this.paintColors[lane];</span><br><span class="line"></span><br><span class="line">    var x =</span><br><span class="line">      ((this.canvas.width - this.leftMargin) / this.canvasTimeScale) * time +</span><br><span class="line">      this.leftMargin;</span><br><span class="line">    var y = (this.canvas.height / this.totalLanes) * lane;</span><br><span class="line">    var height = this.canvas.height / this.totalLanes;</span><br><span class="line">    var width = 1;</span><br><span class="line"></span><br><span class="line">    this.context.fillRect(x, y, width, height);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  this.flush = function() &#123;</span><br><span class="line">    this.context.fillStyle = "#ffffff";</span><br><span class="line">    this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);</span><br><span class="line"></span><br><span class="line">    this.context.font = "200 18px Roboto,Helvetica,Arial";</span><br><span class="line">    this.context.fillStyle = this.paintColors[0];</span><br><span class="line">    this.context.fillText("Regular", 0, 100);</span><br><span class="line"></span><br><span class="line">    this.context.fillStyle = this.paintColors[1];</span><br><span class="line">    this.context.fillText("debounce", 0, 300);</span><br><span class="line"></span><br><span class="line">    this.context.fillStyle = this.paintColors[2];</span><br><span class="line">    this.context.fillText("throttle", 0, 500);</span><br><span class="line">  &#125;;</span><br><span class="line">  /**</span><br><span class="line">   * get the time difference</span><br><span class="line">   * @returns &#123;number&#125;</span><br><span class="line">   */</span><br><span class="line">  this.getTimeDiff = function() &#123;</span><br><span class="line">    var time = new Date().getTime();</span><br><span class="line">    if (!this.startTime) &#123;</span><br><span class="line">      this.startTime = time;</span><br><span class="line">    &#125;</span><br><span class="line">    time -= this.startTime;</span><br><span class="line">    return time;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  this.regularHandler = function() &#123;</span><br><span class="line">    self.paintRect(0, self.getTimeDiff());</span><br><span class="line">  &#125;;</span><br><span class="line">  this.debounceHandler = function() &#123;</span><br><span class="line">    self.paintRect(1, self.getTimeDiff());</span><br><span class="line">  &#125;;</span><br><span class="line">  this.throttleHander = function() &#123;</span><br><span class="line">    self.paintRect(2, self.getTimeDiff());</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let params = [];</span><br><span class="line">function startExecutePeriodically() &#123;</span><br><span class="line">  if (params.length &gt; 0) &#123;</span><br><span class="line">    set</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function queue(fn, wait) &#123;</span><br><span class="line">  let params = [];</span><br><span class="line">  let context = null;</span><br><span class="line">  let firstTime = true;</span><br><span class="line">  function startExecutePeriodically() &#123;</span><br><span class="line">    if(params.length &gt; 0) &#123;</span><br><span class="line">      setTimeout(()=&gt;&#123;</span><br><span class="line">          fn.apply(context, params.shift());</span><br><span class="line">          startExecutePeriodically();</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  let queuedFun = function(...args) &#123;</span><br><span class="line">    context = this;</span><br><span class="line">    params.push(args);</span><br><span class="line">    if (firstTime) &#123;</span><br><span class="line">      firstTime = false;</span><br><span class="line">      startExecutePeriodically();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return queuedFun;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>debounce &amp; throttle demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        body &#123;</span></span><br><span class="line"><span class="undefined">            font-family: "Roboto","Helvetica",Arial;</span></span><br><span class="line"><span class="undefined">            font-weight: 200;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#777</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#moveonme</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            height: 600px;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">            padding: 25px;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="undefined">            font-size: 18px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.backtoblog</span> &#123;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">          padding: 10px;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">background</span>: <span class="selector-id">#f5f5f5</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">color</span>: <span class="selector-id">#777</span>;</span></span><br><span class="line"><span class="undefined">          display: inline-block;</span></span><br><span class="line"><span class="undefined">          text-decoration: none;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">transition</span>: 0<span class="selector-class">.2s</span> <span class="selector-tag">all</span>;</span></span><br><span class="line"><span class="undefined">          box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">          position: relative;</span></span><br><span class="line"><span class="undefined">          top: -1px;</span></span><br><span class="line"><span class="undefined">          text-align: center;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-class">.backtoblog</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">          background: transparent;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"moveonme"</span> &gt;</span></span><br><span class="line">    move your mouse here</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"paintonme"</span> <span class="attr">height</span>=<span class="string">"600"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">style</span>=<span class="string">"float:right;"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;a href="http://blog.nimius.net/2014/04/javascript-debounce-throttle/" class="backtoblog"&gt; &lt; zur&amp;uuml;ck zum Blog&lt;/a&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"bbb.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> demo = <span class="keyword">new</span> NIM_demo();</span></span><br><span class="line"><span class="undefined">    demo.init();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">// 饿了么</span><br><span class="line">var throttle = function (fn, delay) &#123;</span><br><span class="line">  var now, lastExec, timer, context, args; </span><br><span class="line"></span><br><span class="line">  var execute = function () &#123;</span><br><span class="line">    fn.apply(context, args);</span><br><span class="line">    lastExec = now;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  return function () &#123;</span><br><span class="line">    context = this;</span><br><span class="line">    args = arguments;</span><br><span class="line"></span><br><span class="line">    now = Date.now();</span><br><span class="line"></span><br><span class="line">    if (timer) &#123;</span><br><span class="line">      clearTimeout(timer);</span><br><span class="line">      timer = null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (lastExec) &#123;</span><br><span class="line">      var diff = delay - (now - lastExec);</span><br><span class="line">      if (diff <span class="tag">&lt; <span class="attr">0</span>) &#123;</span></span><br><span class="line"><span class="tag">        <span class="attr">execute</span>();</span></span><br><span class="line"><span class="tag">      &#125; <span class="attr">else</span> &#123;</span></span><br><span class="line"><span class="tag">        <span class="attr">timer</span> = <span class="string">setTimeout(()</span> =&gt;</span> &#123;</span><br><span class="line">          execute();</span><br><span class="line">        &#125;, diff);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      execute();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Autocomplete"><a href="#Autocomplete" class="headerlink" title="Autocomplete"></a>Autocomplete</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br></pre></td><td class="code"><pre><span class="line">function ele(id) &#123;</span><br><span class="line">  return document.getElementById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let inputBox = ele("inputBox");</span><br><span class="line">let suggestionList = ele("suggestionList");</span><br><span class="line"></span><br><span class="line">inputBox.oninput = debouce(inputBoxHandler, 500);</span><br><span class="line">suggestionList.onclick = suggestionClickHandler;</span><br><span class="line"></span><br><span class="line">// 1. call API</span><br><span class="line">// 2. Debounce</span><br><span class="line">// 3. update SuggestionList</span><br><span class="line">function inputBoxHandler(e) &#123;</span><br><span class="line">  callAPI(e.target.value).then(function(data) &#123;</span><br><span class="line">    updateSuggestionList(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 1. update inputBox</span><br><span class="line">// 2. hide suggestionList</span><br><span class="line">function suggestionClickHandler(e) &#123;</span><br><span class="line">  if (e.target.tagName === "LI") &#123;</span><br><span class="line">    inputBox.value = e.target.textContent;</span><br><span class="line">    suggestionList.classList.toggle("hide", true);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// util to debounce an action</span><br><span class="line">function debouce(fn, wait) &#123;</span><br><span class="line">  let timeout = null;</span><br><span class="line">  let deboucedFun = function(...args) &#123;</span><br><span class="line">    const context = this;</span><br><span class="line">    clearTimeout(timeout);</span><br><span class="line">    timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;, wait);</span><br><span class="line">  &#125;;</span><br><span class="line">  return deboucedFun;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// DOM update</span><br><span class="line">function updateSuggestionList(list) &#123;</span><br><span class="line">  console.log(list.length);</span><br><span class="line">  if (list.length === 0) &#123;</span><br><span class="line">    suggestionList.classList.toggle("hide", true);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line">  let htmlText = "";</span><br><span class="line">  list.forEach(item =&gt; &#123;</span><br><span class="line">    htmlText += `<span class="tag">&lt;<span class="name">li</span>&gt;</span>$&#123;item&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    `;</span><br><span class="line">  &#125;);</span><br><span class="line">  suggestionList.innerHTML = htmlText;</span><br><span class="line">  suggestionList.classList.toggle("hide", false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// API</span><br><span class="line">function callAPI(prefix) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    if (prefix.length === 0) &#123;</span><br><span class="line">      resolve([]);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    let res = countries.filter(</span><br><span class="line">      country =&gt;</span><br><span class="line">        country.toLowerCase().slice(0, prefix.length) === prefix.toLowerCase()</span><br><span class="line">    );</span><br><span class="line">    resolve(res);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">var countries = [</span><br><span class="line">  "Afghanistan",</span><br><span class="line">  "Albania",</span><br><span class="line">  "Algeria",</span><br><span class="line">  "Andorra",</span><br><span class="line">  "Angola",</span><br><span class="line">  "Anguilla",</span><br><span class="line">  "Antigua &amp; Barbuda",</span><br><span class="line">  "Argentina",</span><br><span class="line">  "Armenia",</span><br><span class="line">  "Aruba",</span><br><span class="line">  "Australia",</span><br><span class="line">  "Austria",</span><br><span class="line">  "Azerbaijan",</span><br><span class="line">  "Bahamas",</span><br><span class="line">  "Bahrain",</span><br><span class="line">  "Bangladesh",</span><br><span class="line">  "Barbados",</span><br><span class="line">  "Belarus",</span><br><span class="line">  "Belgium",</span><br><span class="line">  "Belize",</span><br><span class="line">  "Benin",</span><br><span class="line">  "Bermuda",</span><br><span class="line">  "Bhutan",</span><br><span class="line">  "Bolivia",</span><br><span class="line">  "Bosnia &amp; Herzegovina",</span><br><span class="line">  "Botswana",</span><br><span class="line">  "Brazil",</span><br><span class="line">  "British Virgin Islands",</span><br><span class="line">  "Brunei",</span><br><span class="line">  "Bulgaria",</span><br><span class="line">  "Burkina Faso",</span><br><span class="line">  "Burundi",</span><br><span class="line">  "Cambodia",</span><br><span class="line">  "Cameroon",</span><br><span class="line">  "Canada",</span><br><span class="line">  "Cape Verde",</span><br><span class="line">  "Cayman Islands",</span><br><span class="line">  "Central Arfrican Republic",</span><br><span class="line">  "Chad",</span><br><span class="line">  "Chile",</span><br><span class="line">  "China",</span><br><span class="line">  "Colombia",</span><br><span class="line">  "Congo",</span><br><span class="line">  "Cook Islands",</span><br><span class="line">  "Costa Rica",</span><br><span class="line">  "Cote D Ivoire",</span><br><span class="line">  "Croatia",</span><br><span class="line">  "Cuba",</span><br><span class="line">  "Curacao",</span><br><span class="line">  "Cyprus",</span><br><span class="line">  "Czech Republic",</span><br><span class="line">  "Denmark",</span><br><span class="line">  "Djibouti",</span><br><span class="line">  "Dominica",</span><br><span class="line">  "Dominican Republic",</span><br><span class="line">  "Ecuador",</span><br><span class="line">  "Egypt",</span><br><span class="line">  "El Salvador",</span><br><span class="line">  "Equatorial Guinea",</span><br><span class="line">  "Eritrea",</span><br><span class="line">  "Estonia",</span><br><span class="line">  "Ethiopia",</span><br><span class="line">  "Falkland Islands",</span><br><span class="line">  "Faroe Islands",</span><br><span class="line">  "Fiji",</span><br><span class="line">  "Finland",</span><br><span class="line">  "France",</span><br><span class="line">  "French Polynesia",</span><br><span class="line">  "French West Indies",</span><br><span class="line">  "Gabon",</span><br><span class="line">  "Gambia",</span><br><span class="line">  "Georgia",</span><br><span class="line">  "Germany",</span><br><span class="line">  "Ghana",</span><br><span class="line">  "Gibraltar",</span><br><span class="line">  "Greece",</span><br><span class="line">  "Greenland",</span><br><span class="line">  "Grenada",</span><br><span class="line">  "Guam",</span><br><span class="line">  "Guatemala",</span><br><span class="line">  "Guernsey",</span><br><span class="line">  "Guinea",</span><br><span class="line">  "Guinea Bissau",</span><br><span class="line">  "Guyana",</span><br><span class="line">  "Haiti",</span><br><span class="line">  "Honduras",</span><br><span class="line">  "Hong Kong",</span><br><span class="line">  "Hungary",</span><br><span class="line">  "Iceland",</span><br><span class="line">  "India",</span><br><span class="line">  "Indonesia",</span><br><span class="line">  "Iran",</span><br><span class="line">  "Iraq",</span><br><span class="line">  "Ireland",</span><br><span class="line">  "Isle of Man",</span><br><span class="line">  "Israel",</span><br><span class="line">  "Italy",</span><br><span class="line">  "Jamaica",</span><br><span class="line">  "Japan",</span><br><span class="line">  "Jersey",</span><br><span class="line">  "Jordan",</span><br><span class="line">  "Kazakhstan",</span><br><span class="line">  "Kenya",</span><br><span class="line">  "Kiribati",</span><br><span class="line">  "Kosovo",</span><br><span class="line">  "Kuwait",</span><br><span class="line">  "Kyrgyzstan",</span><br><span class="line">  "Laos",</span><br><span class="line">  "Latvia",</span><br><span class="line">  "Lebanon",</span><br><span class="line">  "Lesotho",</span><br><span class="line">  "Liberia",</span><br><span class="line">  "Libya",</span><br><span class="line">  "Liechtenstein",</span><br><span class="line">  "Lithuania",</span><br><span class="line">  "Luxembourg",</span><br><span class="line">  "Macau",</span><br><span class="line">  "Macedonia",</span><br><span class="line">  "Madagascar",</span><br><span class="line">  "Malawi",</span><br><span class="line">  "Malaysia",</span><br><span class="line">  "Maldives",</span><br><span class="line">  "Mali",</span><br><span class="line">  "Malta",</span><br><span class="line">  "Marshall Islands",</span><br><span class="line">  "Mauritania",</span><br><span class="line">  "Mauritius",</span><br><span class="line">  "Mexico",</span><br><span class="line">  "Micronesia",</span><br><span class="line">  "Moldova",</span><br><span class="line">  "Monaco",</span><br><span class="line">  "Mongolia",</span><br><span class="line">  "Montenegro",</span><br><span class="line">  "Montserrat",</span><br><span class="line">  "Morocco",</span><br><span class="line">  "Mozambique",</span><br><span class="line">  "Myanmar",</span><br><span class="line">  "Namibia",</span><br><span class="line">  "Nauro",</span><br><span class="line">  "Nepal",</span><br><span class="line">  "Netherlands",</span><br><span class="line">  "Netherlands Antilles",</span><br><span class="line">  "New Caledonia",</span><br><span class="line">  "New Zealand",</span><br><span class="line">  "Nicaragua",</span><br><span class="line">  "Niger",</span><br><span class="line">  "Nigeria",</span><br><span class="line">  "North Korea",</span><br><span class="line">  "Norway",</span><br><span class="line">  "Oman",</span><br><span class="line">  "Pakistan",</span><br><span class="line">  "Palau",</span><br><span class="line">  "Palestine",</span><br><span class="line">  "Panama",</span><br><span class="line">  "Papua New Guinea",</span><br><span class="line">  "Paraguay",</span><br><span class="line">  "Peru",</span><br><span class="line">  "Philippines",</span><br><span class="line">  "Poland",</span><br><span class="line">  "Portugal",</span><br><span class="line">  "Puerto Rico",</span><br><span class="line">  "Qatar",</span><br><span class="line">  "Reunion",</span><br><span class="line">  "Romania",</span><br><span class="line">  "Russia",</span><br><span class="line">  "Rwanda",</span><br><span class="line">  "Saint Pierre &amp; Miquelon",</span><br><span class="line">  "Samoa",</span><br><span class="line">  "San Marino",</span><br><span class="line">  "Sao Tome and Principe",</span><br><span class="line">  "Saudi Arabia",</span><br><span class="line">  "Senegal",</span><br><span class="line">  "Serbia",</span><br><span class="line">  "Seychelles",</span><br><span class="line">  "Sierra Leone",</span><br><span class="line">  "Singapore",</span><br><span class="line">  "Slovakia",</span><br><span class="line">  "Slovenia",</span><br><span class="line">  "Solomon Islands",</span><br><span class="line">  "Somalia",</span><br><span class="line">  "South Africa",</span><br><span class="line">  "South Korea",</span><br><span class="line">  "South Sudan",</span><br><span class="line">  "Spain",</span><br><span class="line">  "Sri Lanka",</span><br><span class="line">  "St Kitts &amp; Nevis",</span><br><span class="line">  "St Lucia",</span><br><span class="line">  "St Vincent",</span><br><span class="line">  "Sudan",</span><br><span class="line">  "Suriname",</span><br><span class="line">  "Swaziland",</span><br><span class="line">  "Sweden",</span><br><span class="line">  "Switzerland",</span><br><span class="line">  "Syria",</span><br><span class="line">  "Taiwan",</span><br><span class="line">  "Tajikistan",</span><br><span class="line">  "Tanzania",</span><br><span class="line">  "Thailand",</span><br><span class="line">  "Timor L'Este",</span><br><span class="line">  "Togo",</span><br><span class="line">  "Tonga",</span><br><span class="line">  "Trinidad &amp; Tobago",</span><br><span class="line">  "Tunisia",</span><br><span class="line">  "Turkey",</span><br><span class="line">  "Turkmenistan",</span><br><span class="line">  "Turks &amp; Caicos",</span><br><span class="line">  "Tuvalu",</span><br><span class="line">  "Uganda",</span><br><span class="line">  "Ukraine",</span><br><span class="line">  "United Arab Emirates",</span><br><span class="line">  "United Kingdom",</span><br><span class="line">  "United States of America",</span><br><span class="line">  "Uruguay",</span><br><span class="line">  "Uzbekistan",</span><br><span class="line">  "Vanuatu",</span><br><span class="line">  "Vatican City",</span><br><span class="line">  "Venezuela",</span><br><span class="line">  "Vietnam",</span><br><span class="line">  "Virgin Islands (US)",</span><br><span class="line">  "Yemen",</span><br><span class="line">  "Zambia",</span><br><span class="line">  "Zimbabwe"</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//++++++++++++++++++++++</span><br><span class="line">body &#123;</span><br><span class="line">  font-family: sans-serif;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">#container &#123;</span><br><span class="line">  margin: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#inputBox &#123;</span><br><span class="line">  border: 1px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list &#123;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 100px;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">  list-style: none;</span><br><span class="line">  border: 1px solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list li:hover &#123;</span><br><span class="line">  background-color: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hide &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ================</span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Parcel Sandbox<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"src/styles.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span> &gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"inputBox"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"inputBox"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"suggestionList"</span> <span class="attr">class</span>=<span class="string">"list hide"</span> &gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"src/index.js"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">	</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="II-On-site"><a href="#II-On-site" class="headerlink" title="II.On-site"></a>II.On-site</h2><ol>
<li><h3 id="Web-amp-Browser"><a href="#Web-amp-Browser" class="headerlink" title="Web &amp; Browser"></a><strong><u>Web &amp; Browser</u></strong></h3><ol>
<li><p>Progressive web app</p>
</li>
<li><p>Security: XSS, </p>
</li>
<li><p>Http1.0 vs http1.1 vs http2</p>
<ol>
<li>keep alive: long polling</li>
<li>header compressed</li>
<li>binary stream transmission</li>
</ol>
</li>
<li><p>web socket vs. server side event(not supported by all) vs. long polling</p>
</li>
<li><p>Service worker vs. Web worker vs. Web socket</p>
</li>
<li><p>PWA：<a href="https://www.zhihu.com/question/46690207" target="_blank" rel="noopener">link</a></p>
<ol>
<li>Service Worker </li>
<li>Client side storage =&gt; Indexed DB</li>
<li>Web push/notification API (service worker)</li>
<li>App shell</li>
</ol>
</li>
<li><p>short connection &amp; persistent connect vs. long polling &amp; polling <a href="https://www.jianshu.com/p/3fc3646fad80" target="_blank" rel="noopener">reference</a></p>
</li>
<li><h5 id="HTTP与浏览器缓存"><a href="#HTTP与浏览器缓存" class="headerlink" title="HTTP与浏览器缓存"></a>HTTP与浏览器缓存</h5><ol>
<li>两方的流程<ol>
<li>图1：server 根据需求决定 cache 的config</li>
<li>图2：browser根据 server 发来的 cache config，决定是否应用cache，or直接请求</li>
<li>顺序<ol>
<li>Cache-Control —— 请求服务器之前</li>
<li>Expires —— 请求服务器之前</li>
<li>If-None-Match (Etag) —— 请求服务器</li>
<li>If-Modified-Since (Last-Modified) —— 请求服务器</li>
</ol>
</li>
</ol>
</li>
<li>Expires + Cache-Control: <u><strong>（强缓存）</strong></u></li>
<li><u>Cache-Control 优先级高于 Expires</u> </li>
<li><strong>强缓存 优先判断；然后判断弱缓存</strong></li>
<li>Last-Modified + If-Modified-Since <u><strong>（弱缓存）</strong></u><ol>
<li>server response 中带有<code>Last-Modified: time_k</code>, 让browser将资源缓存起来（attaching Last-Modified）</li>
<li>browser request 中带有 <code>If-Modified-Since:time_k</code>（attached Last-Modified），发给server，让其决定是否新鲜</li>
</ol>
</li>
<li>ETag + If-None-Match： <strong><u>（弱缓存）</u></strong>ETag is unique <strong><em>MD5</em></strong> digest of resource<ol>
<li>server response 中带有<code>ETag: val</code>, 让browser将资源缓存起来（attaching ETag）</li>
<li>browser request 中带有 <code>If-None-Match: val</code>（attached Last-Modified），发给server，让其决定是否新鲜</li>
</ol>
</li>
<li><strong><code>ETag</code>的优先级比<code>Last-Modified</code>更高</strong></li>
<li>cache control: no cache vs no store<ol>
<li>no cache: 告诉browser：不能直接用cache，browser必须发请求，server不反悔 content，而是告诉browser： 可以使用cache（304并且会显示一个Not Modified）</li>
<li>no store：告诉browser：请求得到的内容，你不可以缓存起来，每次都必须从server拿资源</li>
</ol>
</li>
</ol>
</li>
<li><p>Storage</p>
<ol>
<li><p>local storage（5M）: 永远存在（网页关闭也存在），limited to 域名</p>
<ol>
<li><p>storage event: </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'storage'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'key='</span> + e.key);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'oldValue='</span> + e.oldValue);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'newValue='</span> + e.newValue);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<pre><code>2. sessin storage（5M）：临时存在（网页关闭就消失），limited to 本域名、本网页存在期间

3. cookie（4k）: cookie可以设置路径path，所有他要比上面两个多了一层访问限制domain =&gt; path

4. session:
</code></pre><ol start="10">
<li><h5 id="JSONP-https-www-w3schools-com-js-js-json-jsonp-asp"><a href="#JSONP-https-www-w3schools-com-js-js-json-jsonp-asp" class="headerlink" title="JSONP: https://www.w3schools.com/js/js_json_jsonp.asp"></a>JSONP: <a href="https://www.w3schools.com/js/js_json_jsonp.asp" target="_blank" rel="noopener">https://www.w3schools.com/js/js_json_jsonp.asp</a></h5><ol>
<li>vs. CORS</li>
</ol>
</li>
<li><p>Optimistic UI update: like button</p>
</li>
<li><p><code>encodeURIComponent</code> vs <code>decodeURIComponent</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> </span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li><h3 id="CSS-HTML"><a href="#CSS-HTML" class="headerlink" title="CSS + HTML"></a><u><strong>CSS + HTML</strong></u></h3><ol>
<li><p>Accessibility: ARIA</p>
<ol>
<li><p>checklist:</p>
<ol>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles" target="_blank" rel="noopener">Check ARIA roles here</a></li>
<li><code>&lt;img alt=&quot;&quot; &gt;</code></li>
<li><code>&lt;div tabindex=&#39;0&#39; &gt;</code> keyboard nav using <strong><u>tab</u></strong></li>
<li><code>&lt;p tabindex=&#39;-1&#39;&gt;</code> keyboard focus using <strong><u>arrow</u></strong> (since children will also be tabable if parent is <code>tabindex=&#39;0&#39;</code> )</li>
<li><code>&lt;label for=&#39;name input&#39;&gt;</code>  <code>&lt;div aria-labelledby=&#39;title&#39;&gt;</code></li>
<li><code>&lt;div role=&#39;menu&#39;&gt;</code></li>
<li><code>&lt;div aria-valuemax=&#39;100&#39;&gt;</code> <code>&lt;div aria-valuenow=&#39;78&#39;&gt;</code></li>
<li><code>&lt;span aria-checked=&#39;false&#39;&gt;</code></li>
<li><code>&lt;input aria-required=&#39;true&#39;&gt;</code></li>
<li><code>&lt;span role=&#39;alert&#39;&gt;</code></li>
</ol>
</li>
<li><p>In HTML5, all ARIA attributes validate. The new landmark elements (<code>&lt;main&gt;</code>, <code>&lt;header&gt;</code>, <code>&lt;nav&gt;</code> etc) have built-in ARIA roles, so <strong>there is no need to duplicate them</strong>.</p>
</li>
<li><p>温度计</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"percent-loaded"</span> </span></span><br><span class="line"><span class="tag">     <span class="attr">role</span>=<span class="string">"progressbar"</span> </span></span><br><span class="line"><span class="tag">     <span class="attr">aria-valuenow</span>=<span class="string">"75"</span> </span></span><br><span class="line"><span class="tag">     <span class="attr">aria-valuemin</span>=<span class="string">"0"</span> </span></span><br><span class="line"><span class="tag">     <span class="attr">aria-valuemax</span>=<span class="string">"100"</span> </span></span><br><span class="line"><span class="tag"> /&gt;</span></span><br><span class="line"></span><br><span class="line">// OR JS</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// Find the progress bar &lt;div&gt; in the DOM.</span></span></span><br><span class="line"><span class="javascript">   <span class="keyword">var</span> progressBar = <span class="built_in">document</span>.getElementById(<span class="string">"percent-loaded"</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// Set its ARIA roles and states, </span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// so that assistive technologies know what kind of widget it is.</span></span></span><br><span class="line"><span class="javascript">   progressBar.setAttribute(<span class="string">"role"</span>, <span class="string">"progressbar"</span>);</span></span><br><span class="line"><span class="javascript">   progressBar.setAttribute(<span class="string">"aria-valuemin"</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">   progressBar.setAttribute(<span class="string">"aria-valuemax"</span>, <span class="number">100</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// Create a function that can be called at any time to update </span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// the value of the progress bar.</span></span></span><br><span class="line"><span class="javascript">   <span class="function"><span class="keyword">function</span> <span class="title">updateProgress</span>(<span class="params">percentComplete</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">     progressBar.setAttribute(<span class="string">"aria-valuenow"</span>, percentComplete);</span></span><br><span class="line"><span class="undefined">   &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<ol start="2">
<li><p><a href="https://stackoverflow.com/questions/24427621/innertext-vs-innerhtml-vs-label-vs-text-vs-textcontent-vs-outertext" target="_blank" rel="noopener">innerText vs innerHtml vS textContent</a></p>
<ol>
<li><u><strong>innerText</strong></u> is aware of CSS styling, it will trigger a <strong>reflow</strong>, whereas textContent will not.</li>
<li><u><strong>innerText</strong></u> will not include text that is hidden by CSS</li>
<li><strong><u>textContent</u></strong> include text no matter the style is hidden or not! GOOD! NO Reflow!</li>
</ol>
</li>
<li><p>display vs. float vs. position</p>
</li>
<li><p>BFC(Box Formatting Context)</p>
<ol>
<li><p>BFC(Block formatting context)直译为”块级格式上下文”。它是一个独立的渲染区域，只有Block-level box参与， 它规定了内部的Block-level Box如何布局，并且与这个区域外部毫不相干</p>
</li>
<li><h5 id="BFC布局规则："><a href="#BFC布局规则：" class="headerlink" title="BFC布局规则："></a>BFC布局规则：</h5><ol>
<li>内部的Box会在垂直方向，一个接一个地放置。</li>
<li>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠</li>
<li>每个元素的margin box的左边， 与包含块border box的左边相接触(对于从左往右的格式化，否则相反)。即使存在浮动也是如此。</li>
<li>BFC的区域不会与float box重叠。</li>
<li>BFC就是页面上的一个隔离的独立容器，容器里面的子元素不会影响到外面的元素。反之也如此。</li>
<li>计算BFC的高度时，浮动元素也参与计算</li>
</ol>
</li>
<li><p>BFC 形成条件：</p>
<ol>
<li>根元素</li>
<li>float属性不为none</li>
<li>position为absolute或fixed</li>
<li>display为inline-block, table-cell, table-caption</li>
<li>overflow不为visible</li>
</ol>
</li>
</ol>
</li>
<li><p><code>&lt;form&gt;</code>: <code>&lt;fieldset&gt; + &lt;legent&gt; + &lt;input&gt; + &lt;label&gt;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">legend</span>&gt;</span>Your income is:<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"inc"</span> <span class="attr">value</span>=<span class="string">"0-50K"</span> <span class="attr">id</span>=<span class="string">"0-50K"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"0-50K"</span>&gt;</span>$0-50,000 USD<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"inc"</span> <span class="attr">value</span>=<span class="string">"50-100K"</span> <span class="attr">id</span>=<span class="string">"50-100K"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"50-100K"</span>&gt;</span>$50,000-100,000 USD<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"inc"</span> <span class="attr">value</span>=<span class="string">"100K+"</span> <span class="attr">id</span>=<span class="string">"100K+"</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"100K+"</span>&gt;</span>$100,000+ USD<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">fieldset</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">legend</span>&gt;</span>Your status is:<span class="tag">&lt;/<span class="name">legend</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"status"</span> <span class="attr">value</span>=<span class="string">"single"</span> <span class="attr">id</span>=<span class="string">"single"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"single"</span>&gt;</span>single<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"status"</span> <span class="attr">value</span>=<span class="string">"married"</span> <span class="attr">id</span>=<span class="string">"married"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"married"</span>&gt;</span>married<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"status"</span> <span class="attr">value</span>=<span class="string">"partner"</span> <span class="attr">id</span>=<span class="string">"partner"</span> /&gt;</span> </span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"partner"</span>&gt;</span>domestic partner<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">fieldset</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This form goes on with another 97 questions....<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>How to know which <code>&lt;input type=&#39;radio&#39; /&gt;</code> is selected? </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#n"</span> <span class="attr">name</span>=<span class="string">"theForm"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"gender"</span>&gt;</span>Gender: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"genderS"</span> <span class="attr">value</span>=<span class="string">"1"</span> <span class="attr">checked</span>&gt;</span> Male</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"genderS"</span> <span class="attr">value</span>=<span class="string">"0"</span> &gt;</span> Female<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: submitForm()"</span>&gt;</span>Search<span class="tag">&lt;/<span class="name">A</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> radios = <span class="built_in">document</span>.getElementsByName(<span class="string">'genderS'</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, length = radios.length; i &lt; length; i++)</span></span><br><span class="line"><span class="undefined">  &#123;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">if</span> (radios[i].checked)</span></span><br><span class="line"><span class="undefined">   &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// do whatever you want with the checked radio</span></span></span><br><span class="line"><span class="undefined">    alert(radios[i].value);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// only one radio can be logically checked, don't check the rest</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">   &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="5">
<li><p><code>&lt;button type=&#39;button&#39;&gt;</code> ??</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">If you include a button in a form element without specifying it's just a regular button, it defaults to a submit button.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>I will submit the form when clicked!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">vs</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">'button'</span>&gt;</span>I won't!<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;input type=&quot;button&quot; &gt; vs &lt;button type=&#39;button&#39;&gt;</code></p>
<p>Unlike <code>&lt;input&gt;</code> tags, <code>&lt;button&gt;</code>‘s can contain other html elements as their labels. <code>&lt;input type=&quot;button&quot;&gt;</code> can only accept a string as its label text (css styles not withstanding).</p>
<p>Additionally, the <code>&lt;button&gt;</code> element accepts a wide range of uncommon but useful attributes regarding multiple forms and click actions. <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button" target="_blank" rel="noopener">See the MDN page for more details</a>.</p>
</li>
<li><p>HTML5</p>
<ol>
<li><p>New elements:  all new elements are <strong>block-level elements</strong></p>
</li>
<li><p>semantics</p>
<ol>
<li>article</li>
<li>aside</li>
<li>details</li>
<li>figcaption</li>
<li>figure</li>
<li>footer</li>
<li>header</li>
<li>main</li>
<li>mark</li>
<li>nav</li>
<li>section</li>
<li>summary</li>
<li>time</li>
</ol>
</li>
<li><p>HTML migration</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span>			<span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"menu"</span>&gt;</span>				<span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span>		<span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article"</span>&gt;</span>	<span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"footer"</span>&gt;</span>			<span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<pre><code>4. style guid

   1. `&lt;!doctype html&gt;`
   2. `&lt;html lang=&quot;en-US&quot;&gt;`
   3. `&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;/head&gt;`
   4. `&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;`
   5. all lower case
   6. `&lt;img alt=&quot;&quot; /&gt;`
</code></pre><ol start="8">
<li><p>AJAX</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">xhr.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (xhr.readyState = <span class="number">4</span> &amp;&amp; xhr.status == <span class="number">200</span>) &#123;</span><br><span class="line">    <span class="comment">// manipulate DOM</span></span><br><span class="line">    <span class="built_in">console</span>.log(xhr.responseText);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(xhr.status);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xhr.open(<span class="string">"GET"</span>, url, <span class="literal">true</span>);</span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure>
</li>
<li><p>How to lazy load <code>&lt;img&gt;</code> &amp; how to avoid unnecessary traffic?</p>
<ol>
<li><p>Browser first download, and then use image in document</p>
</li>
<li><p><code>new Image()</code>: The <strong>Image()</strong> constructor creates a new <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement" target="_blank" rel="noopener"><code>HTMLImageElement</code></a> instance. It is functionally equivalent to <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement" target="_blank" rel="noopener"><code>document.createElement(&#39;img&#39;)</code></a>.</p>
</li>
<li><p><code>img.onload</code></p>
</li>
<li><p><code>data-imgSrc</code> &lt;=&gt; <code>e.dataset.imgSrc</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// Page is loaded</span></span><br><span class="line">  <span class="keyword">const</span> objects = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'asyncImage'</span>);</span><br><span class="line">  <span class="built_in">Array</span>.from(objects).map(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// Start loading image</span></span><br><span class="line">    <span class="keyword">const</span> img = <span class="keyword">new</span> Image();</span><br><span class="line">    img.src = item.dataset.src;</span><br><span class="line">    <span class="comment">// Once image is loaded replace the src of the HTML element</span></span><br><span class="line">    img.onload = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      item.classList.remove(<span class="string">'asyncImage'</span>);</span><br><span class="line">      <span class="keyword">return</span> item.nodeName === <span class="string">'IMG'</span> ? </span><br><span class="line">        item.src = item.dataset.src :        </span><br><span class="line">        item.style.backgroundImage = <span class="string">`url(<span class="subst">$&#123;item.dataset.src&#125;</span>)`</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
<pre><code>5. `onscroll` lazy load

   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> lazyImages= [...document.querySelectorAll(<span class="string">'.lazy-image'</span>)];</span><br><span class="line"><span class="keyword">let</span> inAdvance = <span class="number">300</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyLoad</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	lazyImages.forEach(<span class="function"><span class="params">image</span> =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (image.offsetTop &lt; <span class="built_in">window</span>.innerHeight + <span class="built_in">window</span>.scrollY + inAdvance) &#123;</span><br><span class="line">			image.src = image.dataset.src;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">lazyLoad();</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, _.throttel(lazyLoad, <span class="number">50</span>));</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, _.throttel(lazyLoad, <span class="number">50</span>));</span><br></pre></td></tr></table></figure>

6. NEVER set `&lt;img src=&quot;&quot;&gt;`: will load this page 2nd time

7. 

   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="</span> <span class="attr">data-src</span>=<span class="string">"https://images.unsplash.com/photo-1524654458049-e36be0721fa2?ixlib=rb-0.3.5&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb&amp;ixid=eyJhcHBfaWQiOjE0NTg5fQ&amp;s=1a6782be5cdb94b780ed9d4a79de7041"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">// These styles keep the aspect ratio of img.</span></span><br><span class="line"><span class="undefined">img &#123;</span></span><br><span class="line"><span class="undefined">  max-width: 100%;</span></span><br><span class="line"><span class="undefined">  height: auto;</span></span><br><span class="line"><span class="undefined">  margin: 0 0 1rem;</span></span><br><span class="line"><span class="undefined">  border: 4px solid orange;</span></span><br><span class="line"><span class="undefined">  box-sizing: border-box;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  [...document.querySelectorAll(<span class="string">'[data-src]'</span>)]</span></span><br><span class="line"><span class="javascript">    .map(<span class="function"><span class="params">img</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    img.addEventListener(<span class="string">'click'</span>, e =&gt; &#123;</span></span><br><span class="line"><span class="undefined">      img.src = img.dataset.src)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre><ol start="3">
<li><h3 id="JS-Lib-scroll-API"><a href="#JS-Lib-scroll-API" class="headerlink" title="JS Lib: (scroll + API)"></a><u>JS Lib:</u> (scroll + API)</h3><ol>
<li><p>Write a Promise (then, catch, finally)</p>
</li>
<li><p>Debounce &amp; Throttle &amp; QueuedCall: </p>
<ol>
<li><p>⚠️： this 的处理，传入的fn 有可能内部带有this，那么debounced_fun有可能这样被调用: <code>this.debounced_fn(args)</code></p>
</li>
<li><p>throttle其实就是 debounce 的<u><strong>“覆盖式”</strong></u>调用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">throttle_with_last_call: <span class="function">(<span class="params">func, limit, context</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> lastFunc</span><br><span class="line">  <span class="keyword">let</span> lastRan</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> args = <span class="built_in">arguments</span></span><br><span class="line">    <span class="keyword">if</span> (!lastRan) &#123;</span><br><span class="line">      func.apply(context, args)</span><br><span class="line">      lastRan = <span class="built_in">Date</span>.now()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      clearTimeout(lastFunc)</span><br><span class="line">      lastFunc = setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// if ((Date.now() - lastRan) &gt;= limit) &#123;</span></span><br><span class="line">          func.apply(context, args)</span><br><span class="line">          lastRan = <span class="built_in">Date</span>.now()</span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      &#125;, limit - (<span class="built_in">Date</span>.now() - lastRan))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>QueuedCall: 对每次fn 调用都会执行，不会丢掉；但是是以固定频率执行的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">queue</span>(<span class="params">fn, wait</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> params = [];</span><br><span class="line">  <span class="keyword">let</span> context = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">let</span> isActive = <span class="literal">false</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">executePeriodically</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    isActive = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (params.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        fn.apply(context, params.shift());</span><br><span class="line">        executePeriodically();</span><br><span class="line">      &#125;, wait);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      isActive = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> queuedFun = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    context = <span class="keyword">this</span>;</span><br><span class="line">    params.push(args);</span><br><span class="line">    <span class="keyword">if</span> (!isActive) &#123;</span><br><span class="line">      executePeriodically();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> queuedFun;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Testing</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIncre</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> queuedFun = queue(loggingIncre, <span class="number">1000</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++) &#123;</span><br><span class="line">  queuedFun(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  queuedFun(<span class="number">1111</span>);</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    queuedFun(<span class="number">2222</span>);</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<ol start="3">
<li><p>Memoize: weakMap的使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoize</span>(<span class="params">func, resolver</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> func != <span class="string">'function'</span> || (resolver != <span class="literal">null</span> &amp;&amp; <span class="keyword">typeof</span> resolver != <span class="string">'function'</span>)) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">'Expected a function'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> memoized = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> key = resolver ? resolver.apply(<span class="keyword">this</span>, args) : args[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">const</span> cache = memoized.cache</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cache.has(key)) &#123;</span><br><span class="line">      <span class="keyword">return</span> cache.get(key)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> result = func.apply(<span class="keyword">this</span>, args)</span><br><span class="line">    memoized.cache = cache.set(key, result) || cache</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  memoized.cache = <span class="keyword">new</span> (memoize.Cache || <span class="built_in">Map</span>)</span><br><span class="line">  <span class="keyword">return</span> memoized</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">memoize.Cache = <span class="built_in">Map</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> memoize</span><br></pre></td></tr></table></figure>
</li>
<li><p>Infinite scroll</p>
<ol>
<li><p><code>Window.scrollY</code> vs.<code>element.scrollTop</code>: 都表示上侧滑出去多少</p>
</li>
<li><p><code>Window.scrollX</code> vs.<code>element.scrollLeft</code> 都表示左侧滑出去多少</p>
</li>
<li><p><code>onscroll</code>要绑定在 镶有滚动条的 div/window 上，而不是内容div上</p>
<ol>
<li><p>window上的距离判断: <u><strong>div mustn’t have gap from window</strong></u></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;body &gt;</span><br><span class="line">	&lt;div id=&quot;scrollContainer&quot;&gt;</span><br><span class="line">		&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt; ... &lt;br /&gt; </span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	const scrollContainer = document.getElementById(&quot;scrollContainer&quot;);</span><br><span class="line">  const rect = scrollContainer.getBoundingClientRect();</span><br><span class="line">  </span><br><span class="line">  const deltaBottom = rect.bottom - window.innerHeight;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<pre><code>2. div上的距离判断： 

   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"scrollContainer"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span> ... <span class="tag">&lt;<span class="name">br</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> scrollContainer = <span class="built_in">document</span>.getElementById(<span class="string">"scrollContainer"</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> rect = scrollContainer.getBoundingClientRect();</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> deltaBottom = scrollContainer.scrollHeight - scrollContainer.clientHeight - scrollContainer.scrollTop;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</code></pre><ol start="4">
<li>LeetCode:<ol>
<li>K Closest Points to Origin<ol>
<li>quick select</li>
<li>heap</li>
</ol>
</li>
<li>Maximum Subarray<ol>
<li>DP 2-d =&gt; DP 1-d</li>
<li>accum array</li>
</ol>
</li>
<li>Integer =&gt; String<ol>
<li>details: ‘’</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="Product-Taste"><a href="#Product-Taste" class="headerlink" title="Product Taste"></a>Product Taste</h3><ol>
<li><p>问最喜欢的app，<a href="http://redirect.viglink.com/?key=a1aa544c3b328def412653f9fc432107&amp;u=http%3A%2F%2Flinkedin.com" target="_blank" rel="noopener">linkedin</a>有什么要改进的地方，平时上那些技术网站论坛</p>
<ol>
<li>LinkedIn：<ul>
<li>like concise and clean UI,  without distraction (compared to FB)</li>
<li>like positive and supportive environment</li>
<li>like the new action button group, give more accurate react  (Thoughts on new buttons)</li>
<li><strong><u>Improvement:</u></strong> <ul>
<li>Click on link: pop out detail page, have to click close. Can we use touch?</li>
<li>Can we share file on home screen?</li>
</ul>
</li>
</ul>
</li>
<li><p>Stripe</p>
<ul>
<li>harmonious color skeme / animation</li>
<li>deliver more info with limited view port <ul>
<li>debate on this: <u>focus with margin</u> or <u>info with less margin</u></li>
<li>depends on business mode</li>
</ul>
</li>
</ul>
</li>
<li></li>
</ol>
</li>
<li><p>比如谈一次失败的经历；如果你和其他人意见不一致时怎么处理等。</p>
<ol>
<li>That not uncommon at work</li>
<li>Something didn’t handle well, exist ambiguity. Opportunity for improvement.</li>
<li>Talk directly, try to understand other’s point of view. If still cannot come to an agreement. No need to be hostile, as both parties’ goal is to improve sth<ol>
<li>time to bring more ideas in, from different perspectives: PM, designer, backend, frontend, CS, even customers</li>
<li>eg: whether we should use PureComponent in Redux project</li>
</ol>
</li>
</ol>
</li>
<li><p>谈谈你喜欢和不喜欢的App，以及LinkedIn App。我说我不怎么用LinkedIn App，谈谈网页版的行不行，他说没问题。</p>
</li>
<li><p>设计一个dashboard，dashboard是一个地图，当有新用户注册账号时，需要实时在dashboard上显示用户位置？<br>follow up：前端用什么library？(d3.js)，需要向前端发送哪些数据？（经纬度或者geohash），push vs pull？怎么实现push service？（消息队列）？怎么测试？</p>
</li>
<li><p>用网页写一个带简单 UI 的计算器。有点 Leetcode 224 的意思，但是 UI 的行为要符合简单的计算器，比如屏幕上显示 1 的时候，输入 2，要变成12，但是显示 0 的时候，输入 1，就要变成 1。Edge case 比较多，要好好跟考官交流。一开始只让写有 + 跟 = 就行了。写的不太好，这里又我面试完写的完全版： <a href="https://gist.github.com/d6u/2e982bdc965e14ce12a545e6996f0af4" target="_blank" rel="noopener">https://gist.github.com/d6u/2e982bdc965e14ce12a545e6996f0af4</a> 大家可以一起交流。带 +、-、*、/。面试的时候提了 reverse polish notation 但是没用。-baidu 1point3acres</p>
</li>
<li><p>11:00-12:00，一位面试官。题目是给了个地图，上面有很多点， 每个点是个object, x, y 坐标都给了， 比如{x: 5, y: 5}已知 包含所有点的 array, 某一个点，和半径d, 写一个function 返回到这个点的距离小于或等于d 的所有点。怎么优化。我当时答得是把整个地图分成小的区域，每一小块2d的正方形。然后找这个点所在的方块和周围的几个方块。这样就不用遍历地图里所有的点了。</p>
</li>
<li><p>这一轮和manager聊，学习经历和工作经历，全程聊天穿插一些behavior question。你想给LinkedIn增加哪些新功能。 </p>
</li>
<li><p>product and cultule fit。 说一个你最喜欢的应用， 为什么喜欢，还有哪些需要改进的地方。你想给LinkedIn增加哪些新功能（这一轮又问到了）。</p>
</li>
<li><p>1:00-2:00。还是两位面试官。 系统设计。linkedin新加的功能, 页面的右下角可以发messenger. 对于messenger这个feature, 先列一下有哪些功能要实现。然后对每个功能讲讲怎么实现。</p>
</li>
<li><p>题目是写一个function实现计算器里的undo以及redo功能。其实就是考数据结构里的stack。最后的拓展题感觉在问system design，问我如果这种undo以及redo操作是用在占据很大存储空间以及用户量很大的data上该怎么办，我说那就给每个数据加上index，undo以及redo只用在index上，最后再用index去取数据。。。</p>
</li>
<li><p>13:30-14:15，product and cultule fit。这轮主要就是扯淡。。。问到好多UI以及设计方面的问题，比如谈谈你对client side rendering以及server side rendering的理解，说一个你最喜欢的应用并列举下优缺点，LinkedIn还有哪些需要改进的地方等等等等。。。</p>
</li>
<li><p>主要根据简历的情况，很随机地问了很多behaviour的问题，所以简历里写的东西自己一定要熟悉，manager人好好呀，感觉特别亲和，有活力。</p>
</li>
<li><p>设计一个系统或者service，包括分析QPS， concurrent user那些，到后台用哪种database存，push or pull，这些，结果完全又不按套路出牌，<strong><u>让设计一个日历</u></strong>，要写detail的HTML和js代码，这一轮的面试小哥非常严肃，提示也比较confusing….楼主表示全程很懵逼，他问的问题也比较随机，看到你写到某个地方的时候，会突然根据你写的提出一个问题，感觉他有点想到什么问什么。</p>
</li>
<li><p>高频题：<strong><u>地图上显示新注册用户的位置</u></strong>。 很多很多follow up, 比如：更新频率如何设定，短时间大量用户注册怎么处理，后端api返回的数据结构，polling vs socket，是否需要实时更新等等。</p>
</li>
<li><p>这个是一个小时。主要考验你的是宏观的设计。例如后端该有什么 endpoint，前端什么时候要用这些 endpoint。前端每个 page 该怎么和对方交流。一般会叫你设计一个 Ap<strong><u>p。面试我的时候是给设计 linkedin 的 search</u></strong>。这轮之需要画一些 diagram 和 flowchart 就好，不需要写 code。</p>
</li>
<li><p>这一轮比较奇葩。要求你找一个你最喜欢的网站，然后讲你为什么喜欢。然后如果你是PM，你会怎么改进那个网站。考的更多的是你对 human computer interaction 的理解。大多数是学校里学 UI 时候学的东西。</p>
</li>
<li><p>Word ladder 1 / 2</p>
</li>
<li><p>简历</p>
<p>1. </p>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/10/Do-we-need-PureComponent-in-Redux-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/10/Do-we-need-PureComponent-in-Redux-project/" itemprop="url">Do we need PureComponent in Redux project?</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-10T00:21:29-07:00">2019-08-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-What"><a href="#I-What" class="headerlink" title="I. What"></a>I. What</h2><p>I had such question when I first join my current company. We use <code>react-redux</code> lib, and let <code>redux</code> to manage nearly all data in frontend.</p>
<ol>
<li><u><strong>[Fact 1</strong></u>]: We all know that the parent re-render will trigger children component re-render by default (if no <code>shouldComponentUpdate</code> provided in child component, it will always default to <code>true</code>). This way, it might introduce unnecessary re-render for children component even though it should NOT.</li>
<li><p><u><strong>[Fact 2]</strong></u>: Redux creating <strong><u>HoC Pure component</u></strong> for its corresponding UI components. That is, container components actually inherit <code>PureComponent</code> (by default, it implements <code>shouldComponentUpdate</code>  and return <code>false</code> if <code>props</code> and <code>state</code> stay the same). Thus, there is no need we use pure components for the UI components, as its container components already handle it</p>
</li>
<li><p><strong><u>[Question]</u></strong>: Does that means we don’t need <code>PureComponent</code> in <code>Redux</code> project? ——&gt;<u><strong>NO</strong></u></p>
</li>
</ol>
<h2 id="II-Why"><a href="#II-Why" class="headerlink" title="II. Why?"></a>II. Why?</h2><ol>
<li>Actually,  <strong>Redux</strong> uses <code>connect()</code> to create <strong><u>HoC Pure component</u></strong>, which actually inherits <code>PureComponent</code> (by default, it implements <code>shouldComponentUpdate</code>  and return <code>false</code> if <code>props</code> and <code>state</code> stay the same). All <u>UI components</u> now hide behind the <u>Container components</u>, which are <code>Pure.Components</code></li>
<li>But, we cannot guarantee all the components have a corresponding container components created by redux. Still, there exist react component not plugging into redux store. In this case, it will trigger child component re-render if the parent component re-render</li>
<li>So, we still need to inherit <code>PureComponent</code> in some case in redux project</li>
</ol>
<h2 id="III-Code"><a href="#III-Code" class="headerlink" title="III. Code"></a>III. Code</h2><p>Play with <strong>part_1</strong> and <strong>part_2</strong>, to see when:</p>
<ul>
<li><p>child plugging into redux;</p>
</li>
<li><p>child not plugging into redux;</p>
</li>
<li><p>child not plugging into redux, but with <code>shouldComponentUpdate()</code></p>
</li>
</ul>
<ol>
<li><p>App.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">"react-dom"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Parent <span class="keyword">from</span> <span class="string">"./Parent"</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">"./store"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">        &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">          &lt;Parent /&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Provider&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rootElement = <span class="built_in">document</span>.getElementById(<span class="string">"root"</span>);</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span>, rootElement);</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Parent.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Child <span class="keyword">from</span> <span class="string">"./Child"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cnt_parent = <span class="number">0</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      parentStr: <span class="string">"This is parent String"</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  clickHandler = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      parentStr: <span class="string">"Parent String changed!"</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"parent cnt: "</span>, cnt_parent++);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div</span><br><span class="line">        onClick=&#123;() =&gt; &#123;</span><br><span class="line">          <span class="keyword">this</span>.clickHandler();</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.state.parentStr&#125;</span><br><span class="line">        &lt;Child /&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Parent;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Child.jsx</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">"react-redux"</span>;</span><br><span class="line"><span class="keyword">let</span> cnt_child = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123; <span class="attr">childStr</span>: <span class="string">"This is child String"</span> &#125;;</span><br><span class="line">	<span class="comment">/* </span></span><br><span class="line"><span class="comment">		// Part_1</span></span><br><span class="line"><span class="comment">  	shouldComponentUpdate() &#123;</span></span><br><span class="line"><span class="comment">  		return false;</span></span><br><span class="line"><span class="comment">  	&#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"child cnt:  "</span>, cnt_child++);</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.childStr&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// Part_2</span></span><br><span class="line"><span class="comment">const mapStateToProps = state =&gt; (&#123;</span></span><br><span class="line"><span class="comment">  childStr: state.child</span></span><br><span class="line"><span class="comment">&#125;);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">const mapDispatchToProps = dispatch =&gt; &#123;&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">export default connect(</span></span><br><span class="line"><span class="comment">  mapStateToProps,</span></span><br><span class="line"><span class="comment">  null</span></span><br><span class="line"><span class="comment">)(Child);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Child;</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/08/03/Backtrack-Find-target-using/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/03/Backtrack-Find-target-using/" itemprop="url">Backtrack: Find target using '+', '-', '*', '/'</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-08-03T11:10:48-07:00">2019-08-03</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/categories/" itemprop="url" rel="index"><span itemprop="name">categories</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="I-What"><a href="#I-What" class="headerlink" title="I. What"></a>I. What</h1><p>Given an list of number (no ‘0’) and a target, combined with any operator from <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, check if they can  form into an formular which evaluated to be target.</p>
<p>example:</p>
<ol>
<li>Array: <code>[4, 2, 3, 1, 5, 6]</code></li>
<li>target: <code>10</code></li>
<li>should return true, as <code>[1, &quot;+&quot;, 5, &quot;+&quot;, 6, &quot;+&quot;, 4, &quot;-&quot;, 2, &quot;*&quot;, 3] = 10</code></li>
</ol>
<h1 id="II-Analysis"><a href="#II-Analysis" class="headerlink" title="II. Analysis"></a>II. Analysis</h1><p>try to put <strong>each element</strong> to be the n-th operand, followed by <strong>each operator</strong> as <u>a potential prefix</u> as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">							1						2						3						4						5</span><br><span class="line">				+ 	 -  	*  	/</span><br><span class="line">		 2 3 4 5</span><br><span class="line">+ - * /</span><br></pre></td></tr></table></figure>
<h1 id="III-Code"><a href="#III-Code" class="headerlink" title="III. Code"></a>III. Code</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number[]&#125; nums</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; S</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findTargetSumWays = <span class="function"><span class="keyword">function</span>(<span class="params">nums, t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> visited = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">let</span> len = nums.length;</span><br><span class="line">    <span class="keyword">let</span> prefix = [];</span><br><span class="line">    <span class="keyword">let</span> symbols = [<span class="string">'+'</span>, <span class="string">'-'</span>, <span class="string">'*'</span>, <span class="string">'/'</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">helper</span>(<span class="params">prefix</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (prefix.length === <span class="number">2</span> * len) &#123;</span><br><span class="line">            <span class="keyword">let</span> res = evaluate(prefix, t) </span><br><span class="line">            <span class="built_in">console</span>.log(prefix);</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            <span class="keyword">return</span> res === t;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!visited.has(i)) &#123;</span><br><span class="line">                visited.add(i);</span><br><span class="line">                prefix.push(nums[i]);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">                    prefix.push(symbols[j]);</span><br><span class="line">                    <span class="keyword">if</span> (helper(prefix)) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    prefix.pop()</span><br><span class="line">                &#125;</span><br><span class="line">                prefix.pop();</span><br><span class="line">                visited.delete(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> helper(prefix);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// evaluate such arr [1, "+", 5, "+", 6, "+", 4, "-", 2, "*", 3, "+"]</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">evaluate</span>(<span class="params">prefix</span>) </span>&#123;</span><br><span class="line">        prefix[prefix.length - <span class="number">1</span>] = <span class="string">'+'</span>;</span><br><span class="line">        <span class="keyword">let</span> operator = [];</span><br><span class="line">        <span class="keyword">let</span> operand = [];</span><br><span class="line">        </span><br><span class="line">        operand.push(<span class="number">0</span>);</span><br><span class="line">        operator.push(<span class="string">'+'</span>);</span><br><span class="line">        operand.push(prefix[<span class="number">0</span>]);</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; prefix.length; i += <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> symbol = prefix[i]</span><br><span class="line">            <span class="keyword">let</span> digit = prefix[i + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">let</span> lastSymbol = operator[operator.length - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (compare(symbol, lastSymbol) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> digitPre = operand.pop();</span><br><span class="line">                operand.push(evaluate(digitPre, symbol, digit));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> symbolPre = operator.pop();</span><br><span class="line">                <span class="keyword">let</span> digit2 = operand.pop();</span><br><span class="line">                <span class="keyword">let</span> digit1 = operand.pop();</span><br><span class="line">                operand.push(evaluate(digit1, symbolPre, digit2));</span><br><span class="line">                operand.push(digit);</span><br><span class="line">                operator.push(symbol);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        operand.pop()</span><br><span class="line">        <span class="keyword">return</span> operand.pop();</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">evaluate</span>(<span class="params">d1, s, d2</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">switch</span> (s) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'+'</span>: <span class="keyword">return</span> d1 + d2;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'-'</span>: <span class="keyword">return</span> d1 - d2;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'*'</span>: <span class="keyword">return</span> d1 * d2;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">'/'</span>: <span class="keyword">return</span> d1 / d2;</span><br><span class="line">                <span class="keyword">default</span>: <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">  	<span class="comment">// compare operator priority</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">compare</span>(<span class="params">s1, s2</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> evaluate(s1) - evaluate(s2);</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">evaluate</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (s === <span class="string">'*'</span> || s === <span class="string">'/'</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> nums = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> target = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> res = findTargetSumWays(nums, target);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/07/29/Priority-Queue-Binary-Heap-Implementation-in-JS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/29/Priority-Queue-Binary-Heap-Implementation-in-JS/" itemprop="url">Priority Queue/Binary Heap Implementation in JS</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-07-29T22:54:01-07:00">2019-07-29</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="I-Why"><a href="#I-Why" class="headerlink" title="I. Why?"></a>I. Why?</h1><p>Because in JS, there is <strong>NO</strong> such useful build-in data structure🤣…….</p>
<p><strong>[<u>Great Links</u>]</strong>: <a href="https://www.cs.usfca.edu/~galles/visualization/Heap.html" target="_blank" rel="noopener">https://www.cs.usfca.edu/~galles/visualization/Heap.html</a></p>
<h1 id="II-Time-Complexity"><a href="#II-Time-Complexity" class="headerlink" title="II. Time Complexity"></a>II. Time Complexity</h1><ol>
<li>construct: O(n)</li>
<li>peek: O(1)</li>
<li>offer: O(lgn)</li>
<li>poll: O(lgn)</li>
</ol>
<h1 id="III-Implementation"><a href="#III-Implementation" class="headerlink" title="III. Implementation"></a>III. Implementation</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Priority Queue</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Binary Heap implementation</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * clear: Removes all of the elements from this priority queue.</span></span><br><span class="line"><span class="comment"> * offer: Inserts the specified element into this priority queue.</span></span><br><span class="line"><span class="comment"> * peek: Retrieves, but does not remove, the head of this queue, or returns null if this queue is empty.</span></span><br><span class="line"><span class="comment"> * poll: Retrieves and removes the head of this queue, or returns null if this queue is empty.</span></span><br><span class="line"><span class="comment"> * size: Returns the number of elements in this collection.</span></span><br><span class="line"><span class="comment"> * toArray: Returns an array containing all of the elements in this queue.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinomialHeap</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(&#123;</span><br><span class="line">    comparator = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b, </span><br><span class="line">    initialValues = [] </span><br><span class="line">  &#125; = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>.comparator = comparator;</span><br><span class="line">    <span class="keyword">this</span>.data = initialValues;</span><br><span class="line">    <span class="keyword">this</span>.heapify();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line">  heapify() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.size(); i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.bubbleUp(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  offer(newNode) &#123;</span><br><span class="line">    <span class="keyword">this</span>.data.push(newNode);</span><br><span class="line">    <span class="keyword">this</span>.bubbleUp(<span class="keyword">this</span>.size() - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  poll() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">this</span>.data[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> last = <span class="keyword">this</span>.data.pop();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.data[<span class="number">0</span>] = last;</span><br><span class="line">      <span class="keyword">this</span>.sinkDown(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  peek() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  isEmpty() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.size() === <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data.length;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toArray() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data.slice();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  clear() &#123;</span><br><span class="line">    <span class="keyword">this</span>.data = [];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  bubbleUp(pos) &#123;</span><br><span class="line">    <span class="keyword">while</span> (pos &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> parentIndex = (pos - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.comparator(<span class="keyword">this</span>.data[parentIndex], <span class="keyword">this</span>.data[pos]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        [<span class="keyword">this</span>.data[parentIndex], <span class="keyword">this</span>.data[pos]] = [<span class="keyword">this</span>.data[pos], <span class="keyword">this</span>.data[parentIndex]];</span><br><span class="line">        pos = parentIndex;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  sinkDown(pos) &#123;</span><br><span class="line">    <span class="keyword">let</span> size = <span class="keyword">this</span>.size();</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> left = (pos &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">let</span> right = left + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">let</span> minIndex = pos;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (left &lt; size &amp;&amp; <span class="keyword">this</span>.comparator(<span class="keyword">this</span>.data[left], <span class="keyword">this</span>.data[minIndex]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        minIndex = left;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (right &lt; size &amp;&amp; <span class="keyword">this</span>.comparator(<span class="keyword">this</span>.data[right], <span class="keyword">this</span>.data[minIndex]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        minIndex = right;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (minIndex !== pos) &#123;</span><br><span class="line">        [<span class="keyword">this</span>.data[minIndex], <span class="keyword">this</span>.data[pos]] = [<span class="keyword">this</span>.data[pos], <span class="keyword">this</span>.data[minIndex]];</span><br><span class="line">        pos = minIndex;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST cases:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(k, v) &#123;</span><br><span class="line">    <span class="keyword">this</span>.k = k;</span><br><span class="line">    <span class="keyword">this</span>.v = v;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pq = <span class="keyword">new</span> BinomialHeap(&#123;</span><br><span class="line">  comparator: <span class="function">(<span class="params">n1, n2</span>) =&gt;</span> n1.v - n2.v,</span><br><span class="line">  initialValues: [</span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'c'</span>, <span class="number">3</span>), </span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'f'</span>, <span class="number">6</span>), </span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'b'</span>, <span class="number">2</span>), </span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'d'</span>, <span class="number">4</span>), </span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'a'</span>, <span class="number">1</span>), </span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'e'</span>, <span class="number">5</span>),</span><br><span class="line">    <span class="keyword">new</span> Node(<span class="string">'g'</span>, <span class="number">7</span>),</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"toArray(): should be [1, 2, 3, 6, 4, 5, 7]    "</span>, pq.toArray());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"smallest should be: Node &#123;k: 'a', v: 1&#125;   "</span>, pq.peek());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"size should be 7   "</span>, pq.size());</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> smallest = pq.poll();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"smallest should be: Node &#123;k: 'a', v: 1&#125;   "</span>, smallest);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"size should be 6   "</span>, pq.size());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"toArray(): should be [2, 4, 3, 6, 7, 5]    "</span>, pq.toArray());</span><br><span class="line"></span><br><span class="line">pq.offer(<span class="keyword">new</span> Node(<span class="string">'aa'</span>, <span class="number">1</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"toArray(): should be [1, 4, 2, 6, 7, 5, 3]    "</span>, pq.toArray());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"size should be 7   "</span>, pq.size());</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/27/JS-Inheritance-Insights/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/mingkai.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/27/JS-Inheritance-Insights/" itemprop="url">JS Inheritance Insights</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-27T16:08:05-07:00">2019-04-27</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Best-Practice-for-Object-Inheritance"><a href="#I-Best-Practice-for-Object-Inheritance" class="headerlink" title="I. Best Practice for Object Inheritance"></a>I. Best Practice for <u>Object Inheritance</u></h2><p><a href="https://stackoverflow.com/questions/17392857/benefits-of-using-object-create-for-inheritance" target="_blank" rel="noopener"><strong>What a “class” is made of in JavaScript:</strong></a></p>
<ol>
<li><strong><u>[private stuff]</u></strong> The <strong><em><code>constructor</code></em></strong> function. This function contains all the logic to create an instance of the “class”, i.e. <u>instance specific code</u> .</li>
<li><strong><u>[public stuff]</u></strong> The <strong><em><code>prototype</code></em></strong> object. This is the object the instance inherits from. It contains all methods (and other properties) that should be <u>shared</u> among all instances.</li>
</ol>
<blockquote>
<p>The <code>constructor</code> corresponds to <code>private</code>, and <code>prototype</code> corresponds to <code>public</code> in <strong>Java</strong></p>
</blockquote>
<p><strong><u>Steps to inherit from another object:</u></strong></p>
<ol>
<li><p>consturctor inherit</p>
</li>
<li><p>prototype inherit</p>
<ul>
<li><p><a href="https://stackoverflow.com/questions/17392857/benefits-of-using-object-create-for-inheritance" target="_blank" rel="noopener">Benefits of using <code>Object.create(Person)</code> for inheritance rather than <code>new Person()</code>?</a></p>
</li>
<li><p>Actully this works because an <code>Person instance</code> inherits from the <code>Person prototype</code> object. <strong>But</strong> it also implies that every dog inherits from <em>one</em> specific <code>Person</code> <em>instance</em>. That seems to be a bit strange. Shouldn’t instance specific code only be run in the <em><u>constructor</u></em> function? Suddenly <em><u>instance</u></em> specific code and <em><u>prototype</u></em> methods seem to be mixed.</p>
<p>We don’t actually want to run <code>Person</code> <em>instance</em> specific code at that moment, we only want all the methods from the <code>Person prototype</code> object. That is what <code>Object.create</code> lets us do</p>
</li>
</ul>
</li>
<li><p>prototype constructor correct</p>
<ul>
<li><a href="https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor" target="_blank" rel="noopener">Why is it necessary to set the prototype constructor?</a></li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* parent object: Person */</span></span><br><span class="line"><span class="comment">// 1.1 constructor</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">first, last, age, gender, interests</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = &#123;</span><br><span class="line">    first,</span><br><span class="line">    last</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.gender = gender;</span><br><span class="line">  <span class="keyword">this</span>.interests = interests;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 1.2 prototype </span></span><br><span class="line">Person.prototype.greeting = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'Hi! I\'m '</span> + <span class="keyword">this</span>.name.first + <span class="string">'.'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> John = <span class="keyword">new</span> Person(<span class="string">'John'</span>, <span class="string">'Doe'</span>, <span class="number">12</span>, <span class="string">'male'</span>, <span class="string">'pingpong'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* child object: Teacher */</span></span><br><span class="line"><span class="comment">// 2.1 constructor inherit</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">first, last, age, gender, interests, subject</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, first, last, age, gender, interests);</span><br><span class="line">  <span class="keyword">this</span>.subject = subject;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2.2 prototype inherit</span></span><br><span class="line">Teacher.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line"><span class="comment">// 2.3 prototype constructor correct</span></span><br><span class="line">Teacher.prototype.constructor = Teacher;  </span><br><span class="line"><span class="keyword">const</span> TeacherSam = <span class="keyword">new</span> Teacher(<span class="string">'Teacher'</span>, <span class="string">'Sam'</span>, <span class="number">43</span>, <span class="string">'male'</span>, <span class="string">'teaching'</span>, <span class="string">'math'</span>);</span><br></pre></td></tr></table></figure>
<h2 id="II-prototype-vs-proto"><a href="#II-prototype-vs-proto" class="headerlink" title="II. prototype vs __proto__"></a>II. <code>prototype</code> vs <code>__proto__</code></h2><ol>
<li><p>in JS, everything is an <code>object</code> except primitive value. objects can serve 2 goals:</p>
<ul>
<li><code>prototype</code> / <code>class</code> for other <code>sub-object</code> / <code>sub-class</code>. In this case, we can check <code>prototype</code> of a <code>constructor</code>‘s shared parent object [ie. prototype]</li>
<li><code>sub-object</code> / <code>sub-class</code> of other <code>prototype</code> / <code>class</code></li>
<li><strong><u>NOTE</u></strong>: <ul>
<li>an object created by <code>new</code> (constructor) doesn’t has <code>prototype</code> property, since it’s created with the hope to get an pure object! </li>
<li>If this object wants to have <code>prototype</code> property, then it must be the case we want this object to be a ‘super-class’, and inherited by ‘sub-class’. This way, we will need to attach <code>prototype</code> to this object. Also, we need to create shared field or method onto <code>prototype</code> (otherwise, if nothing inside <code>prototype</code>, are we dumb to create all fields in memory without putting shared stuff in<code>prototype</code>??? )</li>
<li>On the other hands, an object created by <code>new</code> (constructor) always has <code>__proto__</code> property, in which we can know: <ol>
<li>the <code>constructor</code> of this object</li>
<li>other <strong><u>shared</u></strong> <code>methods</code> or <code>fields</code> of its <code>prototype</code></li>
</ol>
</li>
<li>An <code>prototype</code> will always have a <code>constructor</code> property, to tell its corresponding U associated to this <u>‘class’ prototype</u></li>
</ul>
</li>
</ul>
</li>
<li><p><code>prototype</code> is the object that is used to build <code>__proto__</code> when you create an object with <code>new</code>. It is used by <code>constructor()</code> functions. It should’ve really been called something like, <strong><u>“prototypeToInstall”</u></strong>, since that’s what it is.</p>
</li>
<li><p><code>__proto__</code> is the actual object that is used in the lookup chain to resolve methods, pointing to its prototype. It is that <strong><u>“installed prototype”</u></strong> on an object (that was created/installed upon the object from said <code>constructor()</code> function)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">( <span class="keyword">new</span> Foo ).__proto__ === Foo.prototype;</span><br><span class="line">( <span class="keyword">new</span> Foo ).prototype === <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Inheritance" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Inheritance</a></li>
<li><a href="https://stackoverflow.com/questions/17392857/benefits-of-using-object-create-for-inheritance" target="_blank" rel="noopener">https://stackoverflow.com/questions/17392857/benefits-of-using-object-create-for-inheritance</a></li>
<li><a href="https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor" target="_blank" rel="noopener">https://stackoverflow.com/questions/8453887/why-is-it-necessary-to-set-the-prototype-constructor</a></li>
<li><a href="https://stackoverflow.com/questions/9959727/proto-vs-prototype-in-javascript" target="_blank" rel="noopener">https://stackoverflow.com/questions/9959727/proto-vs-prototype-in-javascript</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/mingkai.jpg"
                alt="Mingkai Cao" />
            
              <p class="site-author-name" itemprop="name">Mingkai Cao</p>
              <p class="site-description motion-element" itemprop="description">All-trade Jack, loves full-stack</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">86</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">136</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/caomingkai" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:mingkaic@usc.edu" target="_blank" title="E-Mail" rel="external nofollow"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mingkai Cao</span>

  

  
</div>


  



  <div class="powered-by">Powered by <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" rel="external nofollow" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.6</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  


<style>
    #comments .vempty{
        display: none;
    }
</style>

</body>
</html>
