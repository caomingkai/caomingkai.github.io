<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.6',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="All-trade Jack, loves full-stack">
<meta property="og:type" content="website">
<meta property="og:title" content="CMK">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="CMK">
<meta property="og:description" content="All-trade Jack, loves full-stack">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CMK">
<meta name="twitter:description" content="All-trade Jack, loves full-stack">






  <link rel="canonical" href="http://yoursite.com/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>CMK</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116541729-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116541729-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CMK</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Let's create something!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
</li>

      

      
    </ul>
  

  
    

    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  


  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/28/Cryptography-PKI-public-key-infrastructure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/28/Cryptography-PKI-public-key-infrastructure/" itemprop="url">Cryptography: PKI (public key infrastructure)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-28T16:02:51-08:00">2018-12-28</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/28/Cryptography-PKI-public-key-infrastructure/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/28/Cryptography-PKI-public-key-infrastructure/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Concepts"><a href="#I-Concepts" class="headerlink" title="I. Concepts"></a>I. Concepts</h2><p><strong><u>PKI:</u></strong> A security architecture that consists of several entities: Certificate Authority (CA), server, client; and covers following techs: public-private key pair, digital certificate, encryption algorithm, hash algorithm, asymmetric/ symmetric encryption</p>
<p><strong><u>Encryption algorithm:</u></strong> paired with a key to encrypt original message; to decrypt already encrytped message to original message</p>
<p><u><strong>symmetric encryption: </strong></u> use the same key for encryption/decryption</p>
<p><strong><u>asymmetric encryption:</u></strong> use public key for encryption; use private key for decryption</p>
<p><strong><u>hash algorithm:</u></strong> used to convert original message to a fixed length hashed string, which will be used as a unique fingerprint for this particular message. [data integrity]</p>
<p><u><strong>digital certificate: </strong></u> a certificate like ID, issued  by CA, to prove the holder is the real one as it claims</p>
<p><strong><u>CA:</u></strong> a well-known, trusted entity, issuing digital certificates/ID to web servers, in order to grant trust to them</p>
<p><u><strong>server: </strong></u> web servers like amazon.com, being visited by consumers via client; also being issued digital certificate by CA</p>
<p><u><strong>client: </strong></u> web browsers like Chrome, Firefox, make HTTP request to web server as the client for consumers</p>
<h2 id="II-Why-do-we-need-PKI"><a href="#II-Why-do-we-need-PKI" class="headerlink" title="II. Why do we need PKI"></a>II. Why do we need PKI</h2><p>In many cases, like email transportation, money transaction, we want the sensitive information to be <strong>secure</strong>, <strong>intact</strong>; We also want the two entities involved to be <strong>authenticated</strong> to be the real ones. Thus we have 3 requirements:</p>
<ul>
<li><u>data security</u>: encryption algorithm</li>
<li><u>data integrity</u>: hash algorithm</li>
<li><u>identity authentication</u>: digital certificate / CA</li>
</ul>
<h2 id="III-Steps-to-evolve-PKI"><a href="#III-Steps-to-evolve-PKI" class="headerlink" title="III. Steps to evolve PKI"></a>III. Steps to evolve PKI</h2><p><strong>Senario</strong>: A customer using Chrome as <u>client</u>, want to make transaction with web <u>server</u> bank.com. To make sensitive info secure, we evolve our PKI to provide data security, then data integrity, and identity authentication.</p>
<h2 id="IV-symmetric-encryption"><a href="#IV-symmetric-encryption" class="headerlink" title="IV. symmetric encryption"></a>IV. symmetric encryption</h2><ul>
<li>client &amp; server use symmetric encryption with a same key to communicate</li>
<li><u>drawback</u>: <ul>
<li>Hackers can get the shared key when server sends the key to client</li>
<li>Server cannot safely distribute the shared key to client</li>
</ul>
</li>
</ul>
<h2 id="V-asymmetric-encryption-RSA"><a href="#V-asymmetric-encryption-RSA" class="headerlink" title="V. asymmetric encryption (RSA)"></a>V. asymmetric encryption (RSA)</h2><ul>
<li>RSA algorithm: use public key and private key to encrypt info<ul>
<li>generated at server, </li>
<li>beginning with 2 large prime numbers, results with 3 prime numbers: <code>n</code>, <code>a</code>, <code>b</code></li>
<li>public key: <code>n</code>, <code>a</code></li>
<li>private key: <code>n</code>, <code>b</code></li>
<li>How to use RSA?<ul>
<li>original message <code>om</code>, encrypted message <code>em</code></li>
<li><code>em = om^a % n</code> for encryption using public key: <code>n</code>, <code>a</code></li>
<li><code>om = em^b % n</code> for decryptin using private key: <code>n</code>, <code>b</code></li>
</ul>
</li>
</ul>
</li>
<li><p>Feature: </p>
<ul>
<li>only private key can decrypt, public key can only used to encrypt info</li>
<li>In fact, any one of the two keys can be used to encrypt, but only the other one can decrypt the encrypted message </li>
<li>private key can also encrypt info, now only public key can decrypt info</li>
</ul>
</li>
<li><p>Steps:</p>
<ol>
<li>client request public key from server</li>
<li>server response the same public key to anyone who request it</li>
<li>client encrypt original info with public key, send encrypted message to server. Even though intercepted by hacker, he doesn’t have private key, can’t decrypt</li>
<li>server receive the encrypted info, use private key to decrypt</li>
</ol>
</li>
<li>Solution to first problem: cannot distribute symmetric key securely<ol>
<li>client &amp; server can use asymmetric encryption to distribute symmetric key</li>
<li>client request public key from server</li>
<li>server response the same public key to anyone who request it</li>
<li>client encrypt <u>symmetric key (</u><strong>symmetric encryption</strong>) with <u>public key (</u><strong>asymmetric encryption</strong>), send encrypted message to server. Even though intercepted by hacker, he doesn’t have private key, can’t get symmetric key</li>
<li>server receive the encrypted info (<u>symmetric key</u>), use private key to decrypt</li>
<li>Now, only client (browser) and server know symmetric key, which can be used to communicate.</li>
</ol>
</li>
</ul>
<h2 id="VI-identity-authentication"><a href="#VI-identity-authentication" class="headerlink" title="VI. identity authentication"></a>VI. identity authentication</h2><ul>
<li><u>Problem above:</u> client cannot assert the server is the real server it expect. If the conversation is hacked by hacker when client want to request public key from server, then the sensitive info of client will leak to hacker</li>
<li>So, before we request public key from server, we first authenticate the server is the real one we expect</li>
<li>How?<ul>
<li>CA is the authority, trusted by browser/server. It signs certificate for server who apply for, by encrypting certificate info (subject+issuer+valid time+public key of subject) with its own private key. Then encrypted info is the signature </li>
<li>web <u>server</u> has a digital certificate (ID) issued by <u>CA</u>, used for <u>client/browser</u> to check its identity. Server will first send its digital signature to client before sending its public key</li>
<li>client/browser has a local list of CA and its public key. When request public key from server, it first check the validity of server’s digital certificate, using the public key of the issuer listed on the certificate. If the decrypted info matches, it trust the server. Otherwist, the server is bad!</li>
</ul>
</li>
</ul>
<h2 id="VII-data-integrity"><a href="#VII-data-integrity" class="headerlink" title="VII. data integrity"></a>VII. data integrity</h2><ul>
<li>another problem: even though hackers cannot see the original info, they can still modify encrypted info, sometimes the modified info is still meaningful, but is not what we want</li>
<li>Solution: <u><strong>fingerprint</strong></u><ul>
<li>human kind uses <u>fingerprint</u> to uniquely identify a person, instead of all kinds of features of this person. It is short, and easy to check</li>
<li>In fact, it is a way to convert massive info to unique short info</li>
<li>For message, we use <u>hash algorithm</u> to get the fingerprint of that message. 4 features of hash algorithm:<ul>
<li><u>fixed length</u>, short</li>
<li><u>avalanche effect</u>: minor different in original message can lead to significant difference in fingerprints</li>
<li><u>no collision</u>: two different messages shouldn’t share same fingerprint</li>
<li><u>uniqueness</u>: two fingerprints shouldn’t be calculted by one message</li>
</ul>
</li>
</ul>
</li>
<li>Steps:<ol>
<li>server hashes message using a hash algorithm, then append the hashed fingerprint and hash algorithm. It then encryptes the 3 items using private key, and sends to clients</li>
<li>clients receive message from server, decrypt message using public key, obtaining original message, hashed result, hash algorithm. Client use the same algorithm to hash original message, and compared the result with the hashed result calculated by server. If they are the same, the message is intact. </li>
<li>Even though hacker can modify message, we can use hash result as fingerprint to check if the message is intact</li>
</ol>
</li>
</ul>
<h2 id="VIII-Summary"><a href="#VIII-Summary" class="headerlink" title="VIII. Summary"></a>VIII. Summary</h2><p>PKI provides secure information transfer, used in either <strong>SSL</strong>(Secure Socket Layer) or <strong>TLS</strong>(Transport Layer Security). It involves 3 technologies: </p>
<ul>
<li><u>symmetric/asymmetric encryption</u>: secured information transfer</li>
<li><u>hash algorithm</u>: data integrity</li>
<li><u>digital certificate</u>: server authentication, to prove the server is the authentic one</li>
</ul>
<p>When you request a HTTPS connection to a webpage, the website will initially send its SSL certificate to your browser. This certificate contains the public key needed to begin the secure session. Based on this initial exchange, your browser and the website then initiate the ‘SSL handshake’. The SSL handshake involves the generation of shared secrets to establish a uniquely secure connection between yourself and the website.</p>
<p>When a trusted SSL Digital Certificate is used during a <a href="https://www.instantssl.com/https-tutorials/what-is-https.html?entryURL=https%3A//www.instantssl.com/ssl-certificate-products/https.html&amp;referrerURL=https%3A//www.google.com/" target="_blank" rel="noopener">HTTPS</a> connection, users will see a padlock icon in the browser address bar. When an Extended Validation Certificate is installed on a web site, the address bar will turn green.</p>
<h2 id="IX-References"><a href="#IX-References" class="headerlink" title="IX. References"></a>IX. References</h2><ol>
<li><a href="https://www.instantssl.com/ssl-certificate-products/https.html" target="_blank" rel="noopener">https://www.instantssl.com/ssl-certificate-products/https.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Public_key_infrastructure" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Public_key_infrastructure</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/10/Counting-holes-in-number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/10/Counting-holes-in-number/" itemprop="url">Counting holes in number</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-10T16:32:18-08:00">2018-12-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/10/Counting-holes-in-number/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/10/Counting-holes-in-number/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Problem"><a href="#I-Problem" class="headerlink" title="I. Problem"></a>I. Problem</h2><p>Given a random number, count how many holes in total. Note: the holes for each digits are listed below</p>
<ul>
<li>0: 1hole</li>
<li>1: 0 hole</li>
<li>2: 0 hole</li>
<li>3: 0 hole</li>
<li>4: 1 hole</li>
<li>5: 0 hole</li>
<li>6: 1 hole</li>
<li>7: 0 hole</li>
<li>8: 2 holes</li>
<li>9: 1 hole</li>
</ul>
<h2 id="II-Solution"><a href="#II-Solution" class="headerlink" title="II. Solution"></a>II. Solution</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="keyword">let</span> n = getHoles(<span class="number">1234567</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">n = getHoles(<span class="number">1</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">n = getHoles(<span class="number">0</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">n = getHoles(<span class="number">9</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">n = getHoles(<span class="number">12</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line">n = getHoles(<span class="number">-14</span>)    </span><br><span class="line"><span class="built_in">console</span>.log(n)			<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getHoles</span>(<span class="params"> num </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num === <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">1</span>,<span class="number">0</span>],[<span class="number">2</span>,<span class="number">0</span>],[<span class="number">3</span>,<span class="number">0</span>],[<span class="number">4</span>,<span class="number">1</span>],[<span class="number">5</span>,<span class="number">0</span>],[<span class="number">6</span>,<span class="number">1</span>],[<span class="number">7</span>,<span class="number">0</span>],[<span class="number">8</span>,<span class="number">2</span>],[<span class="number">9</span>,<span class="number">1</span>]])</span><br><span class="line">    <span class="keyword">let</span> res = <span class="number">0</span></span><br><span class="line">    num = <span class="built_in">Math</span>.abs(num)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span>( num &gt; <span class="number">0</span> )&#123;</span><br><span class="line">        <span class="keyword">let</span> lastDigit = num % <span class="number">10</span></span><br><span class="line">        res += map.get(lastDigit)</span><br><span class="line">        num = <span class="built_in">Math</span>.floor(num/<span class="number">10</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="III-Complexity"><a href="#III-Complexity" class="headerlink" title="III. Complexity"></a>III. Complexity</h2><ul>
<li>Time: O(n)</li>
<li>Space: O(1) </li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/10/Trailing-zeros-of-n！/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/10/Trailing-zeros-of-n！/" itemprop="url">Trailing zeros of n！</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-10T16:31:24-08:00">2018-12-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/10/Trailing-zeros-of-n！/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/10/Trailing-zeros-of-n！/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Problem"><a href="#I-Problem" class="headerlink" title="I. Problem"></a>I. Problem</h2><p>Count how many trailing ‘0’ for the result of <code>n!</code></p>
<h2 id="II-Solution"><a href="#II-Solution" class="headerlink" title="II. Solution"></a>II. Solution</h2><p>The <code>0</code> are <strong><u>only</u></strong> contributed by both factor <code>2</code> and <code>5</code>, which means the number of trailing <code>0</code> equals the number of pairs of <code>2</code> &amp; <code>5</code></p>
<p>Thus, we only need to find out how many times of the factor <code>2</code> and factor <code>5</code> in this n! is good enogh; and then <code>min(num_2, num_5)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// // Test</span></span><br><span class="line"><span class="keyword">let</span> res = trailing_zeros_for_factorial_of(<span class="number">5</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)	<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">res = trailing_zeros_for_factorial_of(<span class="number">8</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)    <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">res = trailing_zeros_for_factorial_of(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)    <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">res = trailing_zeros_for_factorial_of(<span class="number">15</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)    <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">trailing_zeros_for_factorial_of</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> num_2 = <span class="number">0</span>    </span><br><span class="line">    <span class="keyword">let</span> num_5 = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> d = <span class="number">5</span></span><br><span class="line">    <span class="keyword">while</span>(n &gt;= d)&#123;</span><br><span class="line">        num_5 += <span class="built_in">Math</span>.floor(n / d)</span><br><span class="line">        d *= <span class="number">5</span> </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    d = <span class="number">2</span></span><br><span class="line">    <span class="keyword">while</span>(n &gt;= d)&#123;</span><br><span class="line">        num_2 += <span class="built_in">Math</span>.floor(n / d)</span><br><span class="line">        d *= <span class="number">2</span> </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.min(num_2, num_5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="III-Complexity"><a href="#III-Complexity" class="headerlink" title="III. Complexity"></a>III. Complexity</h2><ol>
<li>Time: O(n)</li>
<li>Space: O(1)</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/10/Sort-a-Map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/10/Sort-a-Map/" itemprop="url">Sort a Map</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-10T16:29:27-08:00">2018-12-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/10/Sort-a-Map/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/10/Sort-a-Map/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Problem"><a href="#I-Problem" class="headerlink" title="I. Problem"></a>I. Problem</h2><p>Given a map, whose key are integer, sort map entries by the order of its key</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>:[</span><br><span class="line">    [<span class="number">2</span>, <span class="string">'c'</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="string">'a'</span>],   </span><br><span class="line">    [<span class="number">4</span>, <span class="string">'a'</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="string">'e'</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">res: [</span><br><span class="line">    [<span class="number">1</span>, <span class="string">'a'</span>],    </span><br><span class="line">    [<span class="number">2</span>, <span class="string">'c'</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="string">'e'</span>],</span><br><span class="line">    [<span class="number">4</span>, <span class="string">'a'</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="II-Solution"><a href="#II-Solution" class="headerlink" title="II. Solution"></a>II. Solution</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">2</span>, <span class="string">'c'</span>], [<span class="number">1</span>, <span class="string">'a'</span>], [<span class="number">4</span>, <span class="string">'a'</span>], [<span class="number">3</span>, <span class="string">'e'</span>]])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sortMap</span>(<span class="params">map</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> resKey = []</span><br><span class="line">    map.forEach(<span class="function">(<span class="params">val, key</span>)=&gt;</span>&#123;</span><br><span class="line">        resKey.push(key)</span><br><span class="line">    &#125;)</span><br><span class="line">    resKey.sort()</span><br><span class="line">    <span class="keyword">return</span> resKey.map(<span class="function"><span class="params">item</span>=&gt;</span> [item, map.get(item)])</span><br><span class="line">&#125;</span><br><span class="line">                   </span><br><span class="line"><span class="built_in">console</span>.log(sortMap(map))</span><br></pre></td></tr></table></figure>
<h2 id="III-Complexity"><a href="#III-Complexity" class="headerlink" title="III. Complexity"></a>III. Complexity</h2><ol>
<li>Time: O(N*logN) </li>
<li>Space: O(N)</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/10/Reverse-all-words-in-a-string/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/10/Reverse-all-words-in-a-string/" itemprop="url">Reverse all words in a string</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-10T16:28:53-08:00">2018-12-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/10/Reverse-all-words-in-a-string/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/10/Reverse-all-words-in-a-string/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Problem"><a href="#I-Problem" class="headerlink" title="I. Problem"></a>I. Problem</h2><p>Given a string consisted of several words, reverse all words in this string.</p>
<p>Note: </p>
<ol>
<li>you need to trim starting &amp; trailing white space</li>
<li>reduce multiple spaces to only on space between each word</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"   This is a    test   string  "</span> </span><br><span class="line">  ==&gt; </span><br><span class="line"><span class="string">"string test a is This"</span></span><br></pre></td></tr></table></figure>
<h2 id="II-Solution"><a href="#II-Solution" class="headerlink" title="II. Solution"></a>II. Solution</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"   This is a test   string"</span></span><br><span class="line"><span class="keyword">let</span> res = reverseString(str)</span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// "string test a is This"</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"This    "</span></span><br><span class="line">res = reverseString(str) </span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// "This"</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"This is  "</span></span><br><span class="line">res = reverseString(str) </span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// "is This"</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"This"</span></span><br><span class="line">res = reverseString(str) </span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// "This"</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">""</span></span><br><span class="line">res = reverseString(str) </span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line">str = <span class="string">"  "</span></span><br><span class="line">res = reverseString(str) </span><br><span class="line"><span class="built_in">console</span>.log(res)	   		<span class="comment">// ""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverseString</span>  (<span class="params">str</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> arr = str.trim().split(<span class="regexp">/\s+/</span>)</span><br><span class="line">    <span class="keyword">let</span> n = arr.length</span><br><span class="line">    </span><br><span class="line">    reverse(arr, <span class="number">0</span>, n<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">let</span> start = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> end = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">1</span>; i &lt; n; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> prevChar = arr[i<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">let</span> currChar = arr[i]</span><br><span class="line">        <span class="keyword">if</span>( prevChar !== <span class="string">' '</span> &amp;&amp; currChar === <span class="string">' '</span> )&#123;</span><br><span class="line">            end = i<span class="number">-1</span></span><br><span class="line">            reverse(arr, start, end)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>( prevChar === <span class="string">' '</span> &amp;&amp; currChar !== <span class="string">' '</span> )&#123;</span><br><span class="line">            start = i</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(start!==<span class="number">0</span>) reverse(arr, start, n<span class="number">-1</span>)</span><br><span class="line">    <span class="keyword">return</span> arr.join(<span class="string">' '</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reverse</span> (<span class="params">arr, left, right</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>( left &lt; right )&#123;</span><br><span class="line">        [arr[left], arr[right]] = [arr[right], arr[left]]</span><br><span class="line">        left++</span><br><span class="line">        right--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="III-Complexity"><a href="#III-Complexity" class="headerlink" title="III. Complexity"></a>III. Complexity</h2><ol>
<li>Time: O(N)</li>
<li>Space: O(N)</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/09/How-to-Check-Data-Types-in-JS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/How-to-Check-Data-Types-in-JS/" itemprop="url">How to Check Data Types in JS?</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T22:34:31-08:00">2018-12-09</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/09/How-to-Check-Data-Types-in-JS/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/09/How-to-Check-Data-Types-in-JS/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Check-undeclared-undefined-or-null"><a href="#I-Check-undeclared-undefined-or-null" class="headerlink" title="I. Check undeclared, undefined or null"></a>I. Check <code>undeclared</code>, <code>undefined</code> or <code>null</code></h2><ol>
<li><p><code>undeclared</code> check: <code>try-catch-finally</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="keyword">var</span>;   	<span class="comment">// must use it here (in any way)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>(e) &#123;</span><br><span class="line">  <span class="keyword">if</span>(e.name === <span class="string">'ReferenceError'</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'var is undeclared'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>undefined</code> check: <code>typeof var</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> undefinedVar</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> undefinedVar === <span class="string">'undefined'</span>) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'var is undefined'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>null</code> check: <code>if(var===null)</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nullVar = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nullVar === <span class="literal">null</span>) &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'var is null'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="II-String"><a href="#II-String" class="headerlink" title="II. String"></a>II. String</h2><ol>
<li><p>Three ways to generate String</p>
<ul>
<li><u><strong>String</strong></u>: <code>let var = &#39;1&#39;</code></li>
<li><u><strong>String</strong></u>: <code>let var = String(1)</code></li>
<li><u><strong>[object String]</strong></u>: <code>let var = new String(1)</code></li>
</ul>
</li>
<li><p>How to check - [ <strong>primitive string  &amp; String object</strong> ]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive string</span></span><br><span class="line"><span class="comment">// String object</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">var</span> === <span class="string">'string'</span> || <span class="keyword">var</span> <span class="keyword">instanceof</span> <span class="built_in">String</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="III-Number"><a href="#III-Number" class="headerlink" title="III. Number"></a>III. Number</h2><ol>
<li><p>Check a Number</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// primitive string</span></span><br><span class="line"><span class="comment">// String object</span></span><br><span class="line"><span class="comment">// Must not `NaN`</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> <span class="keyword">var</span> === <span class="string">'number'</span> || value <span class="keyword">instanceof</span> <span class="keyword">var</span> ) &amp;&amp; <span class="built_in">isFinite</span>(<span class="keyword">var</span>) )</span><br></pre></td></tr></table></figure>
</li>
<li><p>Check <code>NaN</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. return true for all non-number</span></span><br><span class="line"><span class="built_in">isNaN</span>(<span class="keyword">var</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. only return true for exact 'NaN'</span></span><br><span class="line"><span class="built_in">Number</span>.isNaN(<span class="keyword">var</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="IV-Array"><a href="#IV-Array" class="headerlink" title="IV. Array"></a>IV. Array</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray(<span class="keyword">var</span>);</span><br></pre></td></tr></table></figure>
<h2 id="V-Function"><a href="#V-Function" class="headerlink" title="V. Function"></a>V. Function</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns if a value is a function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span> (<span class="params">var</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">typeof</span> <span class="keyword">var</span> === <span class="string">'function'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="VI-Boolean"><a href="#VI-Boolean" class="headerlink" title="VI. Boolean"></a>VI. Boolean</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns if a value is a boolean</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isBoolean</span> (<span class="params">var</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">typeof</span> <span class="keyword">var</span> === <span class="string">'boolean'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/09/Trie-Tree-Implementation-using-JS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/Trie-Tree-Implementation-using-JS/" itemprop="url">Trie Tree Implementation using JS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T12:20:29-08:00">2018-12-09</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/09/Trie-Tree-Implementation-using-JS/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/09/Trie-Tree-Implementation-using-JS/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-What-is-Trie"><a href="#I-What-is-Trie" class="headerlink" title="I. What is Trie"></a>I. What is Trie</h2><p>Trie is an efficient information <u><strong>reTrieval</strong></u> data structure. </p>
<ol>
<li><strong><u>search complexities</u></strong> can be brought to optimal limit (key length).</li>
<li>If we store keys in BST, a well balanced BST will need time proportional to <code>O(M*log N)</code>, where <code>M</code> is maximum string length, and <code>N</code> is number of keys in tree</li>
<li>Using Trie, we can search the key in <code>O(M)</code> time.</li>
</ol>
<h2 id="II-Use-case"><a href="#II-Use-case" class="headerlink" title="II. Use case"></a>II. Use case</h2><ol>
<li>Prefix matching</li>
<li>Check if a word exists in a dictionary</li>
<li>Word frequency in dictionary</li>
<li>Sort Words in dictionary</li>
</ol>
<h2 id="III-Implementation"><a href="#III-Implementation" class="headerlink" title="III. Implementation"></a>III. Implementation</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 			</span></span><br><span class="line"><span class="comment">				*</span></span><br><span class="line"><span class="comment">			 /  |  \</span></span><br><span class="line"><span class="comment">            a   c   o</span></span><br><span class="line"><span class="comment">          / |   |   |</span></span><br><span class="line"><span class="comment">         c  t   a   f</span></span><br><span class="line"><span class="comment">		/       | \</span></span><br><span class="line"><span class="comment">       e		t  b</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    For a word of length K, we need (K+1) nodes to store</span></span><br><span class="line"><span class="comment">	- `add`: [1] *.children.a  </span></span><br><span class="line"><span class="comment">			 [2] a.children.c </span></span><br><span class="line"><span class="comment">			 [3] c.children.d  </span></span><br><span class="line"><span class="comment">			 [4] e.children.isEnd = true</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.isEnd = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">this</span>.freq = <span class="number">0</span></span><br><span class="line">        <span class="keyword">this</span>.children = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>()&#123;</span><br><span class="line">        <span class="keyword">this</span>.root = <span class="keyword">new</span> TrieNode()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    insert(word)&#123;</span><br><span class="line">        <span class="keyword">if</span>( word.length === <span class="number">0</span> ) <span class="keyword">return</span> 	<span class="comment">// forbid empty string</span></span><br><span class="line">        <span class="keyword">let</span> letter, curNode = <span class="keyword">this</span>.root</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; word.length; i++ )&#123;</span><br><span class="line">            letter = word[i]</span><br><span class="line">            <span class="keyword">if</span>( !curNode.children.hasOwnProperty(letter) )&#123;</span><br><span class="line">                curNode.children[letter] = <span class="keyword">new</span> TrieNode()</span><br><span class="line">            &#125;</span><br><span class="line">            curNode = curNode.children[letter]</span><br><span class="line">        &#125;</span><br><span class="line">        curNode.isEnd = <span class="literal">true</span></span><br><span class="line">        curNode.freq = curNode.freq + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getNodeForPrefix(str)&#123;</span><br><span class="line">        <span class="keyword">let</span> letter, curNode = <span class="keyword">this</span>.root</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.length; i++ )&#123;</span><br><span class="line">            letter = str[i]</span><br><span class="line">            <span class="keyword">if</span>( !curNode.children.hasOwnProperty(letter) ) </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">            curNode = curNode.children[letter]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> curNode</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    isWord(word)&#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="keyword">this</span>.getNodeForPrefix(word) === <span class="literal">null</span> ) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getNodeForPrefix(word).isEnd</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getWordFreq(word)&#123;</span><br><span class="line">        <span class="keyword">if</span>( <span class="keyword">this</span>.getNodeForPrefix(word) === <span class="literal">null</span> ) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.getNodeForPrefix(word).freq</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* -------------------- Testing --------------------*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ace = <span class="string">"ace"</span></span><br><span class="line"><span class="keyword">let</span> at = <span class="string">"at"</span></span><br><span class="line"><span class="keyword">let</span> cat = <span class="string">"cat"</span></span><br><span class="line"><span class="keyword">let</span> cab = <span class="string">"cab"</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">of</span> = <span class="string">"of"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Trie()</span><br><span class="line">t.insert(ace)</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(ace))	  <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">t.insert(ace)	</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(ace))     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(ace))<span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">t.insert(at)	</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(at))      <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(at)) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">t.insert(cat)</span><br><span class="line">t.insert(cat)	</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(cat))     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(cat))<span class="comment">// 2</span></span><br><span class="line">t.insert(cat)	</span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(cat))<span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line">t.insert(cab)	</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(cab))     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(cab))<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">t.insert(<span class="keyword">of</span>)	</span><br><span class="line"><span class="built_in">console</span>.log(t.isWord(<span class="keyword">of</span>))     <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(t.getWordFreq(<span class="keyword">of</span>))<span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// check the internal representation of the Trie</span></span><br><span class="line"><span class="built_in">console</span>.log(t.root)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/05/JS-common-interview-problems/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/05/JS-common-interview-problems/" itemprop="url">JS common interview problems</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-05T21:31:41-08:00">2018-12-05</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/12/05/JS-common-interview-problems/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/12/05/JS-common-interview-problems/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Exclude-items-array-according-excludes-array"><a href="#Exclude-items-array-according-excludes-array" class="headerlink" title="Exclude items array according excludes array"></a>Exclude items array according excludes array</h2><p>Implement a function to exclude matching  items from <code>all</code> according to <code>excludes</code> array.</p>
<p>Assume there are <code>m</code> items in <code>all</code>,  <code>n</code> items in <code>excludes</code>. Below are 3 versions to solve this problem </p>
<ol>
<li><strong><u>Bad version:</u></strong> O(m*n)</li>
<li><strong><u>Decent version:</u></strong> O(m*n), but can return early in some case</li>
<li><strong><u>Good version:</u></strong> O(max(m, n))</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	all: is the original array</span></span><br><span class="line"><span class="comment">	exclude: is the array specifying properties for items to be excluded</span></span><br><span class="line"><span class="comment">	</span></span><br><span class="line"><span class="comment">	The result should be :</span></span><br><span class="line"><span class="comment"> 	[</span></span><br><span class="line"><span class="comment"> 		&#123;color: "blue", weight: 35, age: 1&#125;</span></span><br><span class="line"><span class="comment">		&#123;color: "green", weight: 10, age: 32&#125;</span></span><br><span class="line"><span class="comment">        &#123;color: "blue", weight: 89, age: 9&#125;</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> all = [</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"red"</span>, <span class="attr">weight</span>: <span class="number">14</span>, <span class="attr">age</span>: <span class="number">10</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"blue"</span>, <span class="attr">weight</span>: <span class="number">35</span>, <span class="attr">age</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"green"</span>, <span class="attr">weight</span>: <span class="number">4</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"green"</span>, <span class="attr">weight</span>: <span class="number">10</span>, <span class="attr">age</span>: <span class="number">32</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"red"</span>, <span class="attr">weight</span>: <span class="number">89</span>, <span class="attr">age</span>:<span class="number">9</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"blue"</span>, <span class="attr">weight</span>: <span class="number">89</span>, <span class="attr">age</span>:<span class="number">9</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">color</span>: <span class="string">"red"</span>, <span class="attr">weight</span>: <span class="number">9</span>, <span class="attr">age</span>:<span class="number">12</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> exclude = [ </span><br><span class="line">  &#123;<span class="attr">k</span>: <span class="string">"color"</span>,  <span class="attr">v</span>: <span class="string">'red'</span> &#125;,</span><br><span class="line">  &#123;<span class="attr">k</span>: <span class="string">"weight"</span>,  <span class="attr">v</span>: <span class="number">4</span> &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. BAD Version: O(m*n)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterBad</span>(<span class="params">all, exclude</span>)</span>&#123;</span><br><span class="line">    exclude.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">pair</span>)</span>&#123;</span><br><span class="line">        all = all.filter( <span class="function">(<span class="params">item</span>)=&gt;</span> item[pair.k] !== pair.v )</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"filter bad result: "</span>)</span><br><span class="line"><span class="built_in">console</span>.log(filterBad(all, exclude))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. Decent Version: O(m*n), but can return early in some case</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterDecent</span>(<span class="params">all, exclude</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> all.filter(<span class="function"><span class="keyword">function</span>(<span class="params">itemAll</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !exclude.some(<span class="function"><span class="keyword">function</span>(<span class="params">itemEx</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> itemAll[itemEx.k] === itemEx.v</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"filter decent result: "</span>)</span><br><span class="line"><span class="built_in">console</span>.log(filterDecent(all, exclude))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. GOOD Version: O(max(m, n))</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterGood</span>(<span class="params">all, exclude</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  exclude.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> key = item.k</span><br><span class="line">    <span class="keyword">let</span> val = item.v</span><br><span class="line">    <span class="keyword">if</span>(!map.has(key))  </span><br><span class="line">        map.set(key, <span class="keyword">new</span> <span class="built_in">Set</span>([val]))</span><br><span class="line">    map.get(key).add(val)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> all.filter(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="built_in">Object</span>.keys(item).some(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> map.has(key) ? map.get(key).has(item[key]) : <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"filter good result: "</span>)</span><br><span class="line"><span class="built_in">console</span>.log(filterGood(all, exclude))</span><br></pre></td></tr></table></figure>
<h2 id="Create-chaining-function"><a href="#Create-chaining-function" class="headerlink" title="Create chaining function"></a>Create chaining function</h2><p>Implement a function can take an <code>executor</code> , <code>onSuccess</code>, <code>onFail</code> callbacks, and call them in the right time. For the following example, please finish the <code>exec</code> function</p>
<ul>
<li><code>slow</code> is executor, defined by users</li>
<li><code>success(onSuccess)</code>: <code>onSuccess</code> also defined by users, to receive the successful generated result</li>
<li>fail(onFail)<code>:</code>onFail` also defined by users, to receive error message</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params">executor</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> promise = &#123;</span><br><span class="line">        result: &#123;</span><br><span class="line">            state: <span class="string">"pending"</span>,</span><br><span class="line">            data: <span class="literal">null</span>,</span><br><span class="line">            error: <span class="literal">null</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        doneConsumers:[],</span><br><span class="line">        failConsumers:[],</span><br><span class="line">        done: <span class="function"><span class="keyword">function</span>(<span class="params">onDone</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.doneConsumers.push(onDone)</span><br><span class="line">            <span class="keyword">return</span> promise</span><br><span class="line">        &#125;,</span><br><span class="line">        fail: <span class="function"><span class="keyword">function</span>(<span class="params">onFail</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.failConsumers.push(onFail)</span><br><span class="line">			<span class="keyword">return</span> promise</span><br><span class="line">        &#125;,</span><br><span class="line">        runExecutor: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            executor(<span class="keyword">this</span>.resultHooks.bind(<span class="keyword">this</span>))</span><br><span class="line">        &#125;,</span><br><span class="line">        resultHooks: <span class="function"><span class="keyword">function</span>(<span class="params">error, data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.result.data = data</span><br><span class="line">            <span class="keyword">this</span>.result.error = error</span><br><span class="line">            <span class="keyword">this</span>.result.state = data===<span class="literal">null</span> ? <span class="string">'failed'</span> : <span class="string">'done'</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.result.state === <span class="string">'done'</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.doneConsumers.splice(<span class="number">0</span>).forEach(<span class="function">(<span class="params">fn</span>)=&gt;</span>&#123;</span><br><span class="line">                    fn(<span class="keyword">this</span>.result.data)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">this</span>.result.state === <span class="string">'failed'</span>)&#123;</span><br><span class="line">                <span class="keyword">this</span>.failConsumers.splice(<span class="number">0</span>).forEach(<span class="function">(<span class="params">fn</span>)=&gt;</span>&#123;</span><br><span class="line">                    fn(<span class="keyword">this</span>.result.error)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    promise.runExecutor()</span><br><span class="line">    <span class="keyword">return</span> promise</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">slow</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> callback(<span class="string">"Error 417"</span>,<span class="literal">null</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        callback(<span class="literal">null</span>, &#123;<span class="attr">id</span>:<span class="number">123</span>&#125;)</span><br><span class="line">    &#125;,<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = exec(slow)</span><br><span class="line">.done(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"1st cb for DONE: "</span>);  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"2nd cb for DONE: "</span>);  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"3rd cb for DONE: "</span>);  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"1st cb for Error: "</span> + err);</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"2nd cb for Error: "</span> + err);</span><br><span class="line">&#125;).fail(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"3rd cb for Error: "</span> + err);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p)</span><br></pre></td></tr></table></figure>
<h2 id="Cache-expensive-function-execution"><a href="#Cache-expensive-function-execution" class="headerlink" title="Cache expensive function execution"></a>Cache expensive function execution</h2><p>If a function execution is very expensive, such as encoding function. Cachify the expensive function, so that next time it will instantly return last calculated result, when the same arguments passed in.</p>
<ol>
<li><p><strong>Barely Workable Version [ can only cache one function ]</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cachify</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    cache = &#123;&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> key = [].slice.call(<span class="built_in">arguments</span>).join(<span class="string">','</span>)</span><br><span class="line">        <span class="keyword">if</span>(cache[key]) </span><br><span class="line">            <span class="keyword">return</span> cache[key]</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            cache[key] = fn.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)</span><br><span class="line">            <span class="keyword">return</span> cache[key]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST</span></span><br><span class="line"><span class="keyword">let</span> timeConsumeFun = <span class="function"><span class="keyword">function</span>(<span class="params"> arg1, arg2 </span>)</span>&#123; </span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000000</span>; i++ )&#123;</span><br><span class="line">        arg1 += <span class="number">1</span>;</span><br><span class="line">        arg2 += <span class="number">1</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> cachedFun = cachify(timeConsumeFun)</span><br><span class="line"><span class="keyword">let</span> result1 = cachedFun(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> timeUsedFirstTime = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Result of first call should be 200000000: "</span>+ result1)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Time used for first call: "</span>+ timeUsedFirstTime)</span><br><span class="line"></span><br><span class="line">startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> result2 = cachedFun(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> timeUsedSecondTime = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Result of seconde call should be 200000000: "</span>+ result2)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Time used for second call: "</span>+ timeUsedSecondTime)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Good Version: [Can cache any function with different parameters]</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cachify</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		cache <span class="comment">// must use this var, in any way</span></span><br><span class="line">		<span class="built_in">console</span>.dir(cache)</span><br><span class="line">	&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">		<span class="keyword">if</span> (e.name === <span class="string">"ReferenceError"</span>)</span><br><span class="line">			cache = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">	&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">let</span> params = [].slice.call(<span class="built_in">arguments</span>).join(<span class="string">','</span>)</span><br><span class="line">			<span class="keyword">if</span> (cache.has(fn)) &#123;</span><br><span class="line">				<span class="keyword">if</span> (cache.get(fn).has(params))</span><br><span class="line">					<span class="keyword">return</span> cache.get(fn).get(params)</span><br><span class="line">				<span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">let</span> res = fn.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)</span><br><span class="line">					cache.get(fn).set(params, res)</span><br><span class="line">					<span class="keyword">return</span> res</span><br><span class="line">				&#125;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">let</span> res = fn.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)</span><br><span class="line">				cache.set(fn, <span class="keyword">new</span> <span class="built_in">Map</span>().set(params, res))</span><br><span class="line">				<span class="keyword">return</span> res</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST</span></span><br><span class="line"><span class="keyword">let</span> test1 = <span class="function"><span class="keyword">function</span> (<span class="params">arg1, arg2</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000000</span>; i++) &#123;</span><br><span class="line">		arg1 += <span class="number">1</span>;</span><br><span class="line">		arg2 += <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> arg1 + arg2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> cachedFun1 = cachify(test1)</span><br><span class="line"><span class="keyword">let</span> result11 = cachedFun1(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> timeUsedFirstTime = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Result of first call should be 20000000: "</span> + result11)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Time used for first call: "</span> + timeUsedFirstTime)</span><br><span class="line"></span><br><span class="line">startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> result12 = cachedFun1(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> timeUsedSecondTime = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Result of seconde call should be 20000000: "</span> + result12)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Time used for second call: "</span> + timeUsedSecondTime)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> test2 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br><span class="line"><span class="keyword">let</span> cachedFun2 = cachify(test2)</span><br><span class="line"><span class="keyword">let</span> result21 = cachedFun2(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result21)</span><br><span class="line"><span class="keyword">let</span> result22 = cachedFun2(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result22)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Polyfill-Array-prototype-forEach"><a href="#Polyfill-Array-prototype-forEach" class="headerlink" title="Polyfill Array.prototype.forEach"></a>Polyfill <code>Array.prototype.forEach</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Example to use forEach()</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item, index</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"item: "</span>+ item +<span class="string">", index: "</span>+index)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">Array</span>.prototype.forEach !== <span class="string">"function"</span>)&#123;</span><br><span class="line">    <span class="built_in">Array</span>.prototype.forEach = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++ )&#123;</span><br><span class="line">            cb(<span class="keyword">this</span>[i], i)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Polyfill-Array-prototype-reduce"><a href="#Polyfill-Array-prototype-reduce" class="headerlink" title="Polyfill Array.prototype.reduce"></a>Polyfill <code>Array.prototype.reduce</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if(Array.prototype.reduce)&#123;</span></span><br><span class="line">    <span class="built_in">Array</span>.prototype.reduce = <span class="function"><span class="keyword">function</span>(<span class="params">reducer, initial</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>( <span class="keyword">typeof</span> initial === <span class="string">'undefined'</span> ) </span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"No initial value provided"</span>)</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> initial</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> accum = <span class="keyword">typeof</span> initial === <span class="string">'undefined'</span> ? <span class="keyword">this</span>[<span class="number">0</span>] : initial</span><br><span class="line">        <span class="keyword">let</span> startIndex = <span class="keyword">typeof</span> initial === <span class="string">'undefined'</span> ? <span class="number">1</span> : <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span>( <span class="keyword">let</span> i = startIndex; i &lt; <span class="keyword">this</span>.length; i++ )&#123;</span><br><span class="line">            accum = reducer(accum, <span class="keyword">this</span>[i])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> accum</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line"><span class="comment">// TEST    </span></span><br><span class="line"><span class="keyword">let</span> reducer = <span class="function">(<span class="params">accum, item</span>)=&gt;</span>&#123; <span class="keyword">return</span> accum+item &#125;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> res = arr.reduce(reducer, <span class="number">1</span>) </span><br><span class="line"><span class="built_in">console</span>.log(res)				 <span class="comment">// 7</span></span><br><span class="line"></span><br><span class="line">arr = []</span><br><span class="line">res = arr.reduce(reducer, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)				 <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">10</span>]</span><br><span class="line">res = arr.reduce(reducer)</span><br><span class="line"><span class="built_in">console</span>.log(res)				 <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">10</span>]</span><br><span class="line">res = arr.reduce(reducer, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res)				 <span class="comment">// 11</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">arr = []</span><br><span class="line">res = arr.reduce(reducer)</span><br><span class="line"><span class="built_in">console</span>.log(res)	   <span class="comment">// Uncaught Error: No initial value provided</span></span><br></pre></td></tr></table></figure>
<h2 id="Closure-a-comparison"><a href="#Closure-a-comparison" class="headerlink" title="Closure: a comparison"></a>Closure: a comparison</h2><ul>
<li>ONLY variable inside a function can form into closure scope</li>
<li>only variable itself cannot be updated or </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Version 1: `countVal` is a function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">start</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = start;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        increment: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; count++; &#125;,</span><br><span class="line">        countVal: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> count; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = Counter(<span class="number">4</span>);</span><br><span class="line">foo.increment();</span><br><span class="line">foo.get(); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Version 2: `countVal` is a variable</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">start</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = start;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        increment: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; count++; &#125;,</span><br><span class="line">        countVal: count</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = Counter(<span class="number">4</span>);</span><br><span class="line">foo.increment();</span><br><span class="line">foo.get(); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
<h2 id="Variable-Hoisting"><a href="#Variable-Hoisting" class="headerlink" title="Variable Hoisting"></a>Variable Hoisting</h2><p>This following code snippet will parsed firstly into next code snippet</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bar();</span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> someValue = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line">test();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">        goo = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> goo = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> e = data[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The snippet will convert to the following: 上面代码在运行之前将会被转化。JavaScript 将会把 <code>var</code> 表达式和 <code>function</code> 声明提升到当前作用域的顶部。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var 表达式被移动到这里</span></span><br><span class="line"><span class="keyword">var</span> bar, someValue; <span class="comment">// 缺省值是 'undefined'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明也会提升</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> goo, i, e; <span class="comment">// 没有块级作用域，这些变量被移动到函数顶部</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">false</span>) &#123;</span><br><span class="line">        goo = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        goo = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">        e = data[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(); <span class="comment">// 出错：TypeError，因为 bar 依然是 'undefined'</span></span><br><span class="line">someValue = <span class="number">42</span>; <span class="comment">// 赋值语句不会被提升规则（hoisting）影响</span></span><br><span class="line">bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line">test();</span><br></pre></td></tr></table></figure>
<h2 id="Type-conversion-string-to-number"><a href="#Type-conversion-string-to-number" class="headerlink" title="Type conversion: string to number"></a>Type conversion: string to number</h2><ul>
<li><p><code>Number(&quot;10&quot;)</code>: return a <strong><u>primitive number</u></strong></p>
</li>
<li><p><code>new Number(&quot;10&quot;)</code>: return a <strong><u>number object</u></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">10</span>) === <span class="number">10</span>;     <span class="comment">// False, 对象与数字的比较</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="number">10</span>) === <span class="number">10</span>;         <span class="comment">// True, 数字与数字的比较</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">10</span>) + <span class="number">0</span> === <span class="number">10</span>; <span class="comment">// True, 由于隐式的类型转换</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="LeetCode-word-break"><a href="#LeetCode-word-break" class="headerlink" title="LeetCode: word break"></a>LeetCode: word break</h2><p>Given an array of strings and a target string, determin whether the target string can be formed using strings from the given array.</p>
<ol>
<li><p><strong><u>BAD version :</u></strong> many duplicate check for substrings</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">canFormTarget</span>(<span class="params"> arr, target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( target.length === <span class="number">0</span> ) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> prefix = target.substr(<span class="number">0</span>,i+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">let</span> suffix = target.substr(i+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>( arr.includes(prefix) &amp;&amp; canFormTarget(arr, suffix) )</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">"l"</span>, <span class="string">"e"</span>, <span class="string">"ee"</span>, <span class="string">"et"</span>, <span class="string">"co"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>]</span><br><span class="line"><span class="keyword">let</span> target = <span class="string">"leetcode"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> result = canFormTarget(arr, target)</span><br><span class="line"><span class="keyword">let</span> timeElasped = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Should true: "</span>+result +<span class="string">", using time: "</span>+timeElasped)</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><u>GOOD version :</u></strong> use <strong>DP with memoization</strong> to speed up process</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> strChecked = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">canFormTarget</span>(<span class="params"> arr, target </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>( target.length === <span class="number">0</span> ) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span>( strChecked.has(target) ) <span class="keyword">return</span> strChecked.get(target)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span>( <span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++ )&#123;</span><br><span class="line">        <span class="keyword">let</span> prefix = target.substr(<span class="number">0</span>,i+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">let</span> suffix = target.substr(i+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>( arr.includes(prefix) &amp;&amp; canFormTarget(arr, suffix) )&#123;</span><br><span class="line">            strChecked.set([target, <span class="literal">true</span>])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    strChecked.set([target, <span class="literal">false</span>])</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Test</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">"l"</span>, <span class="string">"e"</span>, <span class="string">"ee"</span>, <span class="string">"et"</span>, <span class="string">"co"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>]</span><br><span class="line"><span class="keyword">let</span> target = <span class="string">"leetcode"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="built_in">Date</span>.now()</span><br><span class="line"><span class="keyword">let</span> result = canFormTarget(arr, target)</span><br><span class="line"><span class="keyword">let</span> timeElasped = <span class="built_in">Date</span>.now() - startTime</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Should true: "</span>+result +<span class="string">", using time: "</span>+timeElasped)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Curry-Function"><a href="#Curry-Function" class="headerlink" title="Curry Function"></a>Curry Function</h2><p>Implement a curry function <code>addToBase</code> will return another function take an argument to be added on the base.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addToBase</span>(<span class="params">base</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">addOn</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> base+addOn</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST</span></span><br><span class="line"><span class="keyword">let</span> addToTen = addToBase(<span class="number">10</span>)</span><br><span class="line"><span class="built_in">console</span>.log(addToTen(<span class="number">1</span>)) <span class="comment">// 11</span></span><br><span class="line"><span class="built_in">console</span>.log(addToTen(<span class="number">3</span>)) <span class="comment">// 13</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> addToHundred = addToBase(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">console</span>.log(addToHundred(<span class="number">1</span>)) <span class="comment">// 101</span></span><br><span class="line"><span class="built_in">console</span>.log(addToHundred(<span class="number">3</span>)) <span class="comment">// 103</span></span><br></pre></td></tr></table></figure>
<h2 id="Counting-frequency-of-values-in-an-object"><a href="#Counting-frequency-of-values-in-an-object" class="headerlink" title="Counting frequency of values in an object"></a>Counting frequency of values in an object</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'Alice'</span>, <span class="string">'Bob'</span>, <span class="string">'Tiff'</span>, <span class="string">'Bruce'</span>, <span class="string">'Alice'</span>];</span><br><span class="line"><span class="keyword">let</span> res = names.reduce(<span class="function">(<span class="params">accum, item, index, names</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>( accum[item] )&#123;</span><br><span class="line">    accum[item]++</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    accum[item] = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> accum</span><br><span class="line">&#125;,&#123;&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(res)</span><br></pre></td></tr></table></figure>
<h2 id="Group-objects-by-a-certain-property"><a href="#Group-objects-by-a-certain-property" class="headerlink" title="Group objects by a certain property"></a>Group objects by a certain property</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> people = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"a"</span>, <span class="attr">age</span>: <span class="number">10</span>&#125;,    </span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"b"</span>, <span class="attr">age</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"c"</span>, <span class="attr">age</span>: <span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"d"</span>, <span class="attr">age</span>: <span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"e"</span>, <span class="attr">age</span>: <span class="number">12</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"f"</span>, <span class="attr">age</span>: <span class="number">14</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"g"</span>, <span class="attr">age</span>: <span class="number">15</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	OUTPUT should be: </span></span><br><span class="line"><span class="comment"> &#123; </span></span><br><span class="line"><span class="comment">   10: [</span></span><br><span class="line"><span class="comment">         &#123;name: "a", age: 10&#125;,    </span></span><br><span class="line"><span class="comment">         &#123;name: "b", age: 10&#125;,</span></span><br><span class="line"><span class="comment">       ],</span></span><br><span class="line"><span class="comment">   12: [</span></span><br><span class="line"><span class="comment">          &#123;name: "c", age: 12&#125;,</span></span><br><span class="line"><span class="comment">          &#123;name: "d", age: 12&#125;,</span></span><br><span class="line"><span class="comment">          &#123;name: "e", age: 12&#125;,</span></span><br><span class="line"><span class="comment">       ],</span></span><br><span class="line"><span class="comment">   14: [</span></span><br><span class="line"><span class="comment">   		  &#123;name: "f", age: 14&#125;</span></span><br><span class="line"><span class="comment">       ],</span></span><br><span class="line"><span class="comment">   15: [</span></span><br><span class="line"><span class="comment">     	  &#123;name: "g", age: 15&#125;</span></span><br><span class="line"><span class="comment">       ]</span></span><br><span class="line"><span class="comment"> &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">groupByAge</span>(<span class="params">accum, item, index, arr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(item.age <span class="keyword">in</span> accum)&#123;</span><br><span class="line">         accum[item.age].push(item)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        accum[item.age] = [item]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> accum</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> groupedPeople = people.reduce(groupByAge)</span><br><span class="line"><span class="built_in">console</span>.log(groupedPeople)</span><br></pre></td></tr></table></figure>
<h2 id="Function-composition-enabling-piping"><a href="#Function-composition-enabling-piping" class="headerlink" title="Function composition enabling piping"></a>Function composition enabling piping</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> double = <span class="function"><span class="params">x</span> =&gt;</span> x + x;</span><br><span class="line"><span class="keyword">const</span> triple = <span class="function"><span class="params">x</span> =&gt;</span> <span class="number">3</span> * x;</span><br><span class="line"><span class="keyword">const</span> quadruple = <span class="function"><span class="params">x</span> =&gt;</span> <span class="number">4</span> * x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function composition enabling pipe functionality</span></span><br><span class="line"><span class="keyword">const</span> pipe = <span class="function">(<span class="params">...funcs</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">input</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> funcs.reduce(<span class="function">(<span class="params">accum, fun</span>)=&gt;</span>&#123;</span><br><span class="line">      accum = fun(accum)</span><br><span class="line">      <span class="keyword">return</span> accum</span><br><span class="line">    &#125;, input)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// Composed functions for multiplication of specific values</span></span><br><span class="line"><span class="keyword">const</span> multiply6 = pipe(double, triple);</span><br><span class="line"><span class="keyword">const</span> multiply9 = pipe(triple, triple);</span><br><span class="line"><span class="keyword">const</span> multiply16 = pipe(quadruple, quadruple);</span><br><span class="line"><span class="keyword">const</span> multiply24 = pipe(double, triple, quadruple);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage</span></span><br><span class="line"><span class="built_in">console</span>.log(multiply6(<span class="number">6</span>)); <span class="comment">// 36</span></span><br><span class="line"><span class="built_in">console</span>.log(multiply9(<span class="number">9</span>)); <span class="comment">// 81</span></span><br><span class="line"><span class="built_in">console</span>.log(multiply16(<span class="number">16</span>)); <span class="comment">// 256</span></span><br><span class="line"><span class="built_in">console</span>.log(multiply24(<span class="number">10</span>)); <span class="comment">// 240</span></span><br></pre></td></tr></table></figure>
<h2 id="Another-composition-pipe-example"><a href="#Another-composition-pipe-example" class="headerlink" title="Another composition / pipe example"></a>Another composition / pipe example</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">...args</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args.reduce( <span class="function"><span class="keyword">function</span>(<span class="params">accum, item</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> item(accum)</span><br><span class="line">        &#125;, x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pipe = <span class="function">(<span class="params">...args</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args.reduceRight( <span class="function"><span class="keyword">function</span>(<span class="params">accum, item</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> item(accum)</span><br><span class="line">        &#125;, x)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// TEST</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">" TEST: compose &amp; pipe: "</span>)</span><br><span class="line"><span class="keyword">const</span> add = <span class="function"><span class="params">x</span> =&gt;</span> y =&gt; x + y</span><br><span class="line"><span class="keyword">const</span> multiply = <span class="function"><span class="params">x</span> =&gt;</span> y =&gt; x * y</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testCompose = compose(add(<span class="number">2</span>), multiply(<span class="number">3</span>), add(<span class="number">2</span>), multiply(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">console</span>.log(testCompose(<span class="number">1</span>)) <span class="comment">// ( (2+1) * 3 + 2 )*3 = 9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> testPipe = pipe(add(<span class="number">2</span>), multiply(<span class="number">3</span>), add(<span class="number">2</span>), multiply(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">console</span>.log(testPipe(<span class="number">1</span>))     <span class="comment">//( ( ( 1 * 3) + 2) * 3) + 2</span></span><br></pre></td></tr></table></figure>
<h2 id="Composition-vs-Inheritance"><a href="#Composition-vs-Inheritance" class="headerlink" title="Composition vs Inheritance"></a>Composition vs Inheritance</h2><p>Here we compare 2 ways to make an <code>Employee</code> object, using <strong><u>Composition</u></strong> and <strong><u>Inheritance</u></strong></p>
<ol>
<li><p>make <code>employee</code>  using <strong><u>Inheritance</u></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">fn, ln</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.firstName = fn;</span><br><span class="line">  <span class="keyword">this</span>.lastName = ln;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">Person.prototype.getInfo = <span class="function"><span class="keyword">function</span>(<span class="params">greetStr</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//In real life this method/function will be bigger</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;greetStr&#125;</span>, I am <span class="subst">$&#123;<span class="keyword">this</span>.firstName&#125;</span> <span class="subst">$&#123;<span class="keyword">this</span>.lastName&#125;</span>.`</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Employee</span>(<span class="params">fn, ln, empid</span>)</span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, fn, ln);</span><br><span class="line">  <span class="keyword">this</span>.empid = empid;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">Employee.prototype = <span class="built_in">Object</span>.create(Person.prototype);</span><br><span class="line">Employee.prototype.getId = <span class="function"><span class="keyword">function</span>(<span class="params">greetStr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;greetStr&#125;</span>, my employee id is <span class="subst">$&#123;<span class="keyword">this</span>.empid&#125;</span>.`</span>;</span><br><span class="line">&#125;s</span><br><span class="line"><span class="keyword">var</span> e1 = <span class="keyword">new</span> Employee(<span class="string">"John"</span>, <span class="string">"Doe"</span>, <span class="number">123</span>);</span><br><span class="line"><span class="built_in">console</span>.log( e1.getInfo(<span class="string">'Hi'</span>) ); <span class="comment">// Hi, I am John Doe.</span></span><br><span class="line"><span class="built_in">console</span>.log( e1.getId(<span class="string">'Hello'</span>) ); <span class="comment">// Hello, my employee id is 123.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>make <code>employee</code>  using <strong>Composition <u>[ Closure applied ]</u></strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">firstName, lastName, greetStr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;greetStr&#125;</span>, I am <span class="subst">$&#123;firstName&#125;</span> <span class="subst">$&#123;lastName&#125;</span>.`</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getId</span>(<span class="params">empid, greetStr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;greetStr&#125;</span>, my employee id is <span class="subst">$&#123;empid&#125;</span>.`</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createEmployee</span>(<span class="params">fn, ln, empid</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    empid: empid,</span><br><span class="line">    getId : <span class="function">(<span class="params">greetStr</span>) =&gt;</span> getId(empid, greetStr),</span><br><span class="line">    getInfo: <span class="function">(<span class="params">greetStr</span>) =&gt;</span> getInfo(fn, ln, greetStr) </span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> e1 = createEmployee(<span class="string">"john"</span>, <span class="string">"doe"</span>, <span class="number">123</span>);</span><br><span class="line"><span class="built_in">console</span>.log( e1.getInfo(<span class="string">'Hi'</span>) ); <span class="comment">// Hi, I am John Doe.</span></span><br><span class="line"><span class="built_in">console</span>.log( e1.getId(<span class="string">'Hello'</span>) ); <span class="comment">// Hello, my employee id is 123.</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="CSS-width-100-for-parent-with-position-relative-amp-position-absolute"><a href="#CSS-width-100-for-parent-with-position-relative-amp-position-absolute" class="headerlink" title="CSS: width:100% for parent with position:relative &amp; position:absolute"></a>CSS: <code>width:100%</code> for parent with <code>position:relative</code> &amp; <code>position:absolute</code></h2><ol>
<li><p><strong><u>will escape</u></strong> from <u>normal document flow</u>:</p>
<ul>
<li><code>position: absolute</code>: Note, if no <code>top</code>, <code>left</code>, <code>right</code>, <code>bottom</code> specified, it will stay at its original position</li>
<li><code>postion:fixed</code> </li>
</ul>
</li>
<li><p><strong><u>won’t escape</u></strong> from <u>normal document flow</u>:</p>
<ul>
<li><code>position: relative</code></li>
<li><code>float</code></li>
</ul>
</li>
<li><p><code>width:100%</code> : the percentage means relative to its <strong>parents</strong></p>
<ul>
<li><p><u>If still in normal document flow</u>: parent is its <u>container</u></p>
</li>
<li><p><u>if not in normal document flow:</u> parent is the element it <u>positioned</u> relative to</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-id">#outer</span>&#123;</span></span><br><span class="line"><span class="undefined">                width: 100px;            </span></span><br><span class="line"><span class="undefined">                height: 100px;</span></span><br><span class="line"><span class="undefined">                border: 1px red solid;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-id">#inner1</span>&#123;</span></span><br><span class="line"><span class="undefined">                position: relative;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">width</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">height</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line"><span class="undefined">                border: 1px green solid;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-id">#inner2</span>&#123;</span></span><br><span class="line"><span class="undefined">                position: absolute;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">width</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line"><span class="css">                <span class="selector-tag">height</span><span class="selector-pseudo">:100</span>%;</span></span><br><span class="line"><span class="undefined">                border: 1px blue solid;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"outer"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner2"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="Add-Remove-amp-Toggle-Classes-With-classList-in-JavaScript"><a href="#Add-Remove-amp-Toggle-Classes-With-classList-in-JavaScript" class="headerlink" title="Add, Remove&amp; Toggle Classes With classList in JavaScript"></a>Add, Remove&amp; Toggle Classes With <code>classList</code> in JavaScript</h2><p>Say we have an element like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;cool new shades&quot;&gt;</span><br><span class="line">  	content</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>We can get all class names using 2 ways:</p>
<ol>
<li><p><code>element.classList</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> shadesEl = <span class="built_in">document</span>.querySelector(<span class="string">'.cool'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shadesEl.classList);</span><br><span class="line"><span class="comment">// ["cool", "new", "shades", value: "cool new shades"]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shadesEl.classList[<span class="number">1</span>]); <span class="comment">// new</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>element.className</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> shadesEl = <span class="built_in">document</span>.querySelector(<span class="string">'.cool'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(shadesEl.className);</span><br><span class="line"><span class="comment">// "cool new shades"</span></span><br></pre></td></tr></table></figure>
<h4 id="add"><a href="#add" class="headerlink" title="add"></a><code>add</code></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shadesEl.classList.add(<span class="string">'make'</span>, <span class="string">'me'</span>, <span class="string">'look'</span>, <span class="string">'rad'</span>);</span><br><span class="line"><span class="comment">// &lt;div class="cool new shades make me look rad"&gt;content &lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="contains"><a href="#contains" class="headerlink" title="contains"></a>contains</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(shadesEl.classList.contains(<span class="string">'look'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<h4 id="item"><a href="#item" class="headerlink" title="item"></a>item</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(shadesEl.classList.item(<span class="number">3</span>));   <span class="comment">// make</span></span><br><span class="line"><span class="comment">// equals way</span></span><br><span class="line"><span class="built_in">console</span>.log(shadesEl.classList[<span class="number">3</span>]);  	   <span class="comment">// make</span></span><br></pre></td></tr></table></figure>
<h4 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shadesEl.classList.remove(<span class="string">'cool'</span>, <span class="string">'make'</span>, <span class="string">'me'</span>);</span><br><span class="line"><span class="comment">// &lt;div class="new shades look rad"&gt;content &lt;/div&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="toggle"><a href="#toggle" class="headerlink" title="toggle"></a>toggle</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GOOD version</span></span><br><span class="line">coolButton.addEventListener(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">  shadesEl.classList.toggle(<span class="string">'cool'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// BAD toggle</span></span><br><span class="line"><span class="keyword">if</span> (shadesEl.classList.contains(<span class="string">'rad'</span>)) &#123;</span><br><span class="line">  shadesEl.classList.remove(<span class="string">'rad'</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  shadesEl.classList.add(<span class="string">'rad'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/15/CSS-Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/15/CSS-Notes/" itemprop="url">CSS Notes</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-15T19:00:58-08:00">2018-11-15</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/15/CSS-Notes/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/15/CSS-Notes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Inherit-height-of-outer-div"><a href="#I-Inherit-height-of-outer-div" class="headerlink" title="I. Inherit height of outer div"></a>I. Inherit <code>height</code> of outer <code>div</code></h2><p><strong><u>Problem:</u></strong> how to make an inner div to inherit the <u>height</u> of its containing div ?</p>
<ol>
<li><p>If containing div already specified <code>height</code></p>
<p>use <code>height: 100%</code> to inherit the outer div</p>
</li>
<li><p>if containing div doesn’t specify <code>height</code></p>
<p>cannot use <code>height: 100%</code> to inherit the containing div. The computed height for the inner one will become <code>auto</code>, which means its height depends on its content</p>
<blockquote>
<p>If the height of the containing block is not specified explicitly (i.e., it depends on content height), and this element is not absolutely positioned, the value computes to <code>auto</code></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/height" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/CSS/height</a></p>
</blockquote>
<p><strong><u>Right way</u></strong>: containing div set <code>position:relative</code>; inner div set <code>position: absolute</code> and <code>top:0</code> &amp; <code>bottom:0</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"> </span></span><br><span class="line"><span class="undefined">    #container&#123;</span></span><br><span class="line"><span class="undefined">        border: 1px solid red;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">    &#125; </span></span><br><span class="line"><span class="undefined">    #fullHeight&#123;</span></span><br><span class="line"><span class="undefined">        border: 1px solid green;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        top: 0;</span></span><br><span class="line"><span class="undefined">        bottom: 0;</span></span><br><span class="line"><span class="undefined">        width:100%;</span></span><br><span class="line"><span class="undefined">        background-color: grey;</span></span><br><span class="line"><span class="undefined">   	 	opacity: 0.5;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    #noHeight&#123;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        width: 100%;</span></span><br><span class="line"><span class="undefined">        border: 1px solid blue;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"noHeight"</span> &gt;</span>ads <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"fullHeight"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dummy text. Dummy text. Dummy text. Dummy text. <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="II-Set-mask-to-a-div-to-disable-it"><a href="#II-Set-mask-to-a-div-to-disable-it" class="headerlink" title="II. Set mask to a div to disable it"></a>II. Set mask to a <code>div</code> to disable it</h2><p><u><strong>Problem:</strong></u> set a mask layer to cover its outer div</p>
<p><strong><u>Solution:</u></strong> use <code>position: absolute</code> &amp; <code>top: 0</code> &amp; <code>bottom: 0</code> to cover the whole <code>height</code> or its containing div, which set <code>position: relative</code> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"> </span></span><br><span class="line"><span class="undefined">    #container&#123;</span></span><br><span class="line"><span class="undefined">        border: 1px solid red;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">    &#125; </span></span><br><span class="line"><span class="undefined">    #inner &#123;</span></span><br><span class="line"><span class="undefined">        background-color: coral;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    #mask&#123;</span></span><br><span class="line"><span class="undefined">        border: 1px solid green;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        top: 0;</span></span><br><span class="line"><span class="undefined">        bottom: 0;</span></span><br><span class="line"><span class="undefined">        width: 100%;</span></span><br><span class="line"><span class="undefined">        height: 100%;</span></span><br><span class="line"><span class="undefined">        background-color: grey;</span></span><br><span class="line"><span class="undefined">        opacity: 0.5;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inner"</span> &gt;</span>myBox<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"mask"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dummy text. Dummy text. Dummy text. Dummy text. <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> inner = <span class="built_in">document</span>.getElementById(<span class="string">"inner"</span>)</span></span><br><span class="line"><span class="javascript">        inner.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"inner"</span>)&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> mask = <span class="built_in">document</span>.getElementById(<span class="string">"mask"</span>)</span></span><br><span class="line"><span class="javascript">        mask.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"mask"</span>)&#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> container = <span class="built_in">document</span>.getElementById(<span class="string">"container"</span>)</span></span><br><span class="line"><span class="javascript">        container.addEventListener(<span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;alert(<span class="string">"container"</span>)&#125;)</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/02/Write-Our-Own-Promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/02/Write-Our-Own-Promise/" itemprop="url">Write A Promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-02T13:25:27-07:00">2018-11-02</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/02/Write-Our-Own-Promise/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/02/Write-Our-Own-Promise/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-Why-do-we-need-Promise-“callback-hell”"><a href="#I-Why-do-we-need-Promise-“callback-hell”" class="headerlink" title="I. Why do we need Promise  - “callback hell”"></a>I. Why do we need <code>Promise</code>  - “callback hell”</h2><ol>
<li><p><strong><u>Asynchronous call</u></strong> is the core of JavaScript across browser and Node.js. </p>
</li>
<li><p><u>JavsScript runtime thread</u> use <code>callback</code> to execute result of asynchronous task handled by <u>other threads</u> (<strong>Ajax thread</strong>, <strong>Timer thread</strong>, <strong>Rendering Thread</strong>)</p>
</li>
<li><p>Example below are callback hell , which is a headache for programmer. For </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// when the nesting level exceeds 3, people will get crazy!!</span></span><br><span class="line">getData(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;				<span class="comment">// getData of x</span></span><br><span class="line">    getMoreData(x, <span class="function"><span class="keyword">function</span>(<span class="params">y</span>)</span>&#123;   	<span class="comment">// getMoreData of y, using x</span></span><br><span class="line">        getMoreData(y, <span class="function"><span class="keyword">function</span>(<span class="params">z</span>)</span>&#123; <span class="comment">// getMoreData of x, using y</span></span><br><span class="line">            ...</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Is there a way to <strong><u>flatten</u></strong> the nesting callbacks, in a chainable way?  =&gt; <code>Node</code></p>
<ul>
<li>Consider the <code>Node</code> data structure, it contains child node in itself, similar to our requirement!!</li>
<li><code>Promise</code> is such a <strong><u>stateful utility object</u></strong>, which can be chained to implement nested callbacks</li>
</ul>
</li>
</ol>
<h2 id="II-Promise-Usage"><a href="#II-Promise-Usage" class="headerlink" title="II. Promise Usage"></a>II. Promise Usage</h2><ol>
<li><p><strong>executer</strong>: </p>
<ul>
<li><p>execute asynchronous action, generating result</p>
</li>
<li><p>when create new Promise, need to pass in pre-defined executer</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// executer: a function with parameters: `resolve` and `reject`</span></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>)</span>&#123;</span><br><span class="line">    ajaxGet( url, <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(res.status == <span class="number">200</span>)  </span><br><span class="line">            resolve(res.data)</span><br><span class="line">        <span class="keyword">else</span>     			   </span><br><span class="line">            reject(res.error)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>callbacks</strong> in <code>then</code>:</p>
<ul>
<li><p><code>onFulfilled</code> &amp; <code>onRejected</code> specify how to handle the result of asynchronous action</p>
</li>
<li><p><strong>use case 1:</strong> <u>multiple callbacks on a promise</u></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume executor will: resolve(1)</span></span><br><span class="line"><span class="keyword">let</span> callback1 = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"This is from callback1: "</span> + res*<span class="number">1</span>) &#125;</span><br><span class="line"><span class="keyword">let</span> callback2 = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"This is from callback2: "</span> + res*<span class="number">2</span>)&#125;</span><br><span class="line">p.then(callback1)  <span class="comment">// This is from callback1: 1</span></span><br><span class="line">p.then(callback2)  <span class="comment">// This is from callback1: 2</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>use case 2:</strong> <u>chaining callbacks</u></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume executor will: resolve(1)</span></span><br><span class="line"><span class="keyword">let</span> callback1 = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123; <span class="keyword">return</span> res+<span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> callback2 = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123; <span class="keyword">return</span> res+<span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> callback3 = <span class="function"><span class="keyword">function</span>(<span class="params">res</span>)</span>&#123; <span class="built_in">console</span>.log(<span class="string">"The final res will be 3: "</span> + res) &#125;</span><br><span class="line">p.then(callback1).then(callback1).then(callback3)  <span class="comment">// The final res will be 3: 3</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="III-Promise-stateful-utility-object"><a href="#III-Promise-stateful-utility-object" class="headerlink" title="III. Promise: stateful utility object"></a>III. Promise: stateful utility object</h2><ol>
<li><p><strong>“Stateful”</strong></p>
<ul>
<li><p>Promise is an object, its properties are <strong><u>stateful</u></strong>, ie. property value can <u>change dynamially</u> </p>
</li>
<li><p>state can only change in 2 ways: <code>pending =&gt; fulfilled</code>,  <code>pending =&gt; rejected</code></p>
</li>
<li><p>the cause of stateful is: <u>asynchronous actions</u> inside the <strong><u>executor</u></strong>. Once instantiated to promise object, the executor will be executed inside promise object, and will update <code>state</code>,  <code>value</code>, <code>consumers</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span>(<span class="params"> executor </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">"pending"</span>  <span class="comment">// keep record of the state update</span></span><br><span class="line">	<span class="keyword">this</span>.value = <span class="literal">undefined</span>  <span class="comment">// store the result of asynchronous action</span></span><br><span class="line">	<span class="keyword">this</span>.consumers = []     <span class="comment">// place to store callbacks (actually child promises)</span></span><br><span class="line">    </span><br><span class="line">    executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>), <span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>)) <span class="comment">// run executor </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>resolve</code> &amp; <code>reject</code>: hooks to receive asynchronous result. </p>
<ul>
<li>The asynchronous function <code>executor</code> , will pass its result to Promise using its hooks: <code>resolve</code> and <code>reject</code></li>
</ul>
</li>
<li><p><code>then</code>: hooks to receive passed in callbacks  <code>onFulfilled</code> &amp; <code>onRejected</code></p>
<ul>
<li>the callbacks are passed to Promise using <code>then</code> hook</li>
<li>Promise will take care of executing callback, when asynchronous result is ready</li>
</ul>
</li>
<li><p>How to it chainable</p>
<ul>
<li>In fact, <code>then()</code> method can <strong><u>not only receive callbacks</u></strong>, </li>
<li><strong><u>but also can return a new Promise</u></strong>, which can be chained by using another <code>then</code>, …., and so on</li>
<li><code>then()</code> create a new Promise, then put the callbacks inside the newly created Promise, then put into the <code>consumers</code> array to consume the asynchronous result when its ready </li>
</ul>
</li>
</ol>
<h2 id="VI-Write-One"><a href="#VI-Write-One" class="headerlink" title="VI. Write One!"></a>VI. Write One!</h2><ol>
<li><p><strong><u>Promise state:</u></strong></p>
<p>There are only 2 state transitions allowed: from pending to fulfilled, and from pending to rejected. No other transition should be possible, and once a transition has been performed, the promise value (or rejection reason) should not change.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span>(<span class="params">executor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'pending'</span>;</span><br><span class="line">    <span class="keyword">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>), <span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// provide only two ways to transition</span></span><br><span class="line">MyPromise.prototype.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state !== <span class="string">'pending'</span>) <span class="keyword">return</span>; <span class="comment">// cannot transition anymore</span></span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'fulfilled'</span>; 		      <span class="comment">// can transition</span></span><br><span class="line">    <span class="keyword">this</span>.value = value; 				  <span class="comment">// must have a value</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyPromise.prototype.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state !== <span class="string">'pending'</span>) <span class="keyword">return</span>; <span class="comment">// cannot transition anymore</span></span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'rejected'</span>; 			  <span class="comment">// can transition</span></span><br><span class="line">    <span class="keyword">this</span>.value = reason; 				  <span class="comment">// must have a reason</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><u><strong><code>then</code> method: the core of chaining</strong></u></p>
<ul>
<li><p><strong>[Note 1]:</strong> each <code>then()</code> will return a new Promise!</p>
</li>
<li><p>The <code>then</code> method is the core to Promise, which can be chained using <code>then</code>. It has two tasks:</p>
<ul>
<li>receive callbacks, and store them for later use when asynchorous result is ready</li>
<li>create new promise, to make promise chainable</li>
</ul>
</li>
<li><p>In fact, we put callbacks of the current promise, into the newly created child promises. Each callback will correspond a new Promise creation</p>
</li>
<li><p>This way, we can also easily consume the <code>outcome</code> of the <code>callback(result)</code>, to <code>resolve(outcome)</code>for the child promises</p>
</li>
<li><p><strong>[Note 2]:</strong> </p>
<ul>
<li>child promise execute its parent’s callback ; </li>
<li>and resolve outcome of that callback, pass the outcome to promise created by next <code>then</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// For each then(), create a new Promise to embody this callback pair</span></span><br><span class="line">MyPromise.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> consumer = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ignore onFulfilled/onRejected if not a function</span></span><br><span class="line">    consumer.onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="literal">null</span>;</span><br><span class="line">    consumer.onRejected  = <span class="keyword">typeof</span> onRejected  === <span class="string">'function'</span> ? onRejected  : <span class="literal">null</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// put the consumer with parent's callbacks onto `this.consumers`</span></span><br><span class="line">    <span class="keyword">this</span>.consumers.push(consumer);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// It's possible that the promise was already resolved, </span></span><br><span class="line">    <span class="comment">// so, try to consume the resolved result </span></span><br><span class="line">    <span class="keyword">this</span>.broadcast();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// must return a promise to make it chainable</span></span><br><span class="line">    <span class="comment">// used by next potential `then()` in the chain</span></span><br><span class="line">    <span class="keyword">return</span> consumer;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>broadcase()</code>: Consume the asynchorous result</p>
<p>After the asynchronous action return a result, we need to</p>
<ul>
<li><p>first, update the state to <code>fulfilled</code> or <code>rejected</code></p>
</li>
<li><p>execute the each callback of  <code>onFulfilled</code>, <code>onRejected</code> (in child promise) collected by <code>then</code></p>
</li>
<li><p><code>onFulfilled</code>, <code>onRejected</code> must be called asynchronously</p>
<p>for example, <code>new Promise(executor).then(callback)</code>, callback execution must happen after executor. Thus, we can correctly get result even if executor is synchorous</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">MyPromise.prototype.broadcast = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> promise = <span class="keyword">this</span>;</span><br><span class="line">    <span class="comment">// only get called after promise is resolved</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'pending'</span>) <span class="keyword">return</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// callback must be executed by its corresponding promise</span></span><br><span class="line">    <span class="keyword">var</span> callbackName = <span class="keyword">this</span>.state == <span class="string">'fulfilled'</span> ? <span class="string">'onFulfilled'</span> : <span class="string">'onRejected'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// when no callback specified in then(), still need to resolve/reject it</span></span><br><span class="line">    <span class="keyword">var</span> resolver = <span class="keyword">this</span>.state == <span class="string">'fulfilled'</span> ? <span class="string">'resolve'</span> : <span class="string">'reject'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// onFulfilled/onRejected must be called asynchronously</span></span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// traverse in order &amp; call only once, using `splice(0)` for deletion</span></span><br><span class="line">        promise.consumers.splice(<span class="number">0</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">consumer</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> callback = consumer[callbackName];</span><br><span class="line">                <span class="comment">// if a functon, call callback as plain function</span></span><br><span class="line">                <span class="comment">// else, ignore callback</span></span><br><span class="line">                <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                    <span class="comment">// child promise resolve outcome of callback(value)</span></span><br><span class="line">                    consumer.resolve(callback(promise.value)); </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// child promise resolve value without callback</span></span><br><span class="line">                    consumer[resolver](promise.value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                consumer.reject(e);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, <span class="number">0</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>[Note 2]:</strong> the current <code>then</code> can only handle chainable promise when callback is pure function; Cannot handle when callback return a new Promise.</p>
</li>
</ul>
</li>
<li><p><u><strong>[TODO]: make <code>then</code> can response another Promise</strong></u></p>
</li>
</ol>
<h2 id="V-Test-Our-Own-Promise"><a href="#V-Test-Our-Own-Promise" class="headerlink" title="V. Test Our Own Promise"></a>V. Test Our Own Promise</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyPromise</span>(<span class="params">executor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'pending'</span>;</span><br><span class="line">    <span class="keyword">this</span>.value = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">this</span>.consumers = [];</span><br><span class="line">    executor(<span class="keyword">this</span>.resolve.bind(<span class="keyword">this</span>), <span class="keyword">this</span>.reject.bind(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// provide only two ways to transition</span></span><br><span class="line">MyPromise.prototype.resolve = <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state !== <span class="string">'pending'</span>) <span class="keyword">return</span>; </span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'fulfilled'</span>;</span><br><span class="line">    <span class="keyword">this</span>.value = value;</span><br><span class="line">    <span class="keyword">this</span>.broadcast();</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line">MyPromise.prototype.reject = <span class="function"><span class="keyword">function</span> (<span class="params">reason</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state !== <span class="string">'pending'</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">this</span>.state = <span class="string">'rejected'</span>; </span><br><span class="line">    <span class="keyword">this</span>.value = reason; </span><br><span class="line">    <span class="keyword">this</span>.broadcast();</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"><span class="comment">// A promise’s then method accepts two arguments:</span></span><br><span class="line">MyPromise.prototype.then = <span class="function"><span class="keyword">function</span>(<span class="params">onFulfilled, onRejected</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> consumer = <span class="keyword">new</span> MyPromise(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">    consumer.onFulfilled = <span class="keyword">typeof</span> onFulfilled === <span class="string">'function'</span> ? onFulfilled : <span class="literal">null</span>;</span><br><span class="line">    consumer.onRejected = <span class="keyword">typeof</span> onRejected === <span class="string">'function'</span> ? onRejected : <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>.consumers.push(consumer);</span><br><span class="line">    <span class="keyword">this</span>.broadcast();</span><br><span class="line">    <span class="keyword">return</span> consumer;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyPromise.prototype.broadcast = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> promise = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.state === <span class="string">'pending'</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">var</span> callbackName = <span class="keyword">this</span>.state == <span class="string">'fulfilled'</span> ? <span class="string">'onFulfilled'</span> : <span class="string">'onRejected'</span>;</span><br><span class="line">    <span class="keyword">var</span> resolver = <span class="keyword">this</span>.state == <span class="string">'fulfilled'</span> ? <span class="string">'resolve'</span> : <span class="string">'reject'</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        promise.consumers.splice(<span class="number">0</span>).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">consumer</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> callback = consumer[callbackName];</span><br><span class="line">                <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                    consumer.resolve(callback(promise.value)); </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    consumer[resolver](promise.value);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                consumer.reject(e);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ------------------ TEST ------------------ </span></span><br><span class="line"><span class="keyword">let</span> p0 = <span class="keyword">new</span> MyPromise(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123; resolve(<span class="number">0</span>) &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = p0.then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"p1 get result from p0, value should be 0: "</span> + res)</span><br><span class="line">    <span class="keyword">return</span> res+<span class="number">1</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = p0.then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"p2 get result from p0, value should be 0: "</span> + res)</span><br><span class="line">    <span class="keyword">return</span> res+<span class="number">2</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = p0.then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123; </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"p3 get result from p0, value should be 0: "</span> + res)</span><br><span class="line">    <span class="keyword">return</span> res+<span class="number">3</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"This should be an array of 3 Promises: "</span> + p0.consumers)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p4 = p1.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123; <span class="built_in">console</span>.log(<span class="string">"p4 get result from p1, value should be 1: "</span> + res)&#125;)</span><br><span class="line"><span class="keyword">let</span> p5 = p2.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123; <span class="built_in">console</span>.log(<span class="string">"p5 get result from p2, value should be 2: "</span> + res)&#125;)</span><br><span class="line"><span class="keyword">let</span> p6 = p3.then(<span class="function"><span class="params">res</span>=&gt;</span>&#123; <span class="built_in">console</span>.log(<span class="string">"p6 get result from p3, value should be 3: "</span> + res)&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Credits-to"><a href="#Credits-to" class="headerlink" title="Credits to:"></a>Credits to:</h2><ol>
<li><a href="https://stackoverflow.com/questions/23772801/basic-javascript-promise-implementation-attempt/42057900#42057900" target="_blank" rel="noopener">https://stackoverflow.com/questions/23772801/basic-javascript-promise-implementation-attempt/42057900#42057900</a></li>
<li><a href="https://www.promisejs.org/implementing/" target="_blank" rel="noopener">https://www.promisejs.org/implementing/</a></li>
<li><a href="https://javascript.info/promise-chaining" target="_blank" rel="noopener">https://javascript.info/promise-chaining</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise</a></li>
<li><a href="http://thecodebarbarian.com/write-your-own-node-js-promise-library-from-scratch.html" target="_blank" rel="noopener">http://thecodebarbarian.com/write-your-own-node-js-promise-library-from-scratch.html</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sea.jpg"
                alt="Mingkai Cao" />
            
              <p class="site-author-name" itemprop="name">Mingkai Cao</p>
              <p class="site-description motion-element" itemprop="description">All-trade Jack, loves full-stack</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">70</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">122</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/caomingkai" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:mingkaic@usc.edu" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mingkai Cao</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.6</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>

  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'hG8fgggWL7hK1jsXsRoVCNWv-MdYXbMMI',
        appKey: 'VRAYsgwdkRyyb8bAFQ5uii6o',
        placeholder: 'Any comment?',
        avatar:'',
        guest_info:guest,
        pageSize:'10' || 10,
    });
    // 新增以下代码即可，可以移除.info下所有子节点
    var infoEle = document.querySelector('#comments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0){
      infoEle.childNodes.forEach(function(item) {
        item.parentNode.removeChild(item);
      });
    }


  </script>



  





  

  

  

  

  
  

  

  

  

  


<style>
    #comments .vempty{
        display: none;
    }
</style>

</body>
</html>
