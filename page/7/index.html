<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.6" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.6">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.6">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.6" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.0.6',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="All-trade Jack, loves full-stack">
<meta property="og:type" content="website">
<meta property="og:title" content="CMK">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="CMK">
<meta property="og:description" content="All-trade Jack, loves full-stack">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CMK">
<meta name="twitter:description" content="All-trade Jack, loves full-stack">






  <link rel="canonical" href="http://yoursite.com/page/7/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>CMK</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-116541729-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-116541729-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CMK</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Let's create something!</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
</li>

      

      
    </ul>
  

  
    

    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    

  


  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/27/Web-Template-Engine/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/27/Web-Template-Engine/" itemprop="url">Web Template Engine</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-27T10:02:04-08:00">2018-02-27</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Portfolios/" itemprop="url" rel="index"><span itemprop="name">Portfolios</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/27/Web-Template-Engine/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/02/27/Web-Template-Engine/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="I-Main-idea"><a href="#I-Main-idea" class="headerlink" title="I. Main idea:"></a>I. Main idea:</h3><p>similar to Python string’s <strong>format method</strong> like “ A is {title} of B”.format(title=”father”); Whereas, <strong>template engine</strong> is also a formatter, but much more powerful.</p>
<blockquote>
<p>An important phase in any web application is generating HTML to be served to the browser.</p>
</blockquote>
<blockquote>
<p>Very few HTML pages are completely static: they involve at least a small amount of <strong>dynamic data</strong>, such as the user’s name. Usually, they contain a great deal of dynamic data: product listings, friends’ news updates, and so on.</p>
</blockquote>
<blockquote>
<p>The mostly-static style used in templates is the opposite of how most programming languages work.</p>
</blockquote>
<blockquote>
<p>A template language flips this around: <strong>the template file is mostly static literal text, with special notation to indicate the executable dynamic parts.</strong></p>
</blockquote>
<h3 id="II-tech-stacks"><a href="#II-tech-stacks" class="headerlink" title="II. tech stacks"></a>II. tech stacks</h3><p> <strong>Python – Template language Django</strong></p>
<p><strong>Github</strong>: <a href="https://github.com/caomingkai/500-Lines-Or-Less" target="_blank" rel="noopener">https://github.com/caomingkai/500-Lines-Or-Less</a></p>
<h3 id="III-template-syntax"><a href="#III-template-syntax" class="headerlink" title="III. template syntax"></a>III. template syntax</h3><ol>
<li><p>dot : </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;The price is: &#123;&#123;product.price&#125;&#125;, with a &#123;&#123;product.discount&#125;&#125;% discount.&lt;/p&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>filters with pipe character: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Short name: &#123;&#123;story.subject|slugify|lower&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure></p>
</li>
<li><p>logic control: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Products:&lt;/p&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">&#123;% for product in product_list %&#125;</span><br><span class="line">    &lt;li&gt;&#123;&#123; product.name &#125;&#125;: &#123;&#123; product.price|format_price &#125;&#125;&lt;/li&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>comment:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;# This is the best template ever! #&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="III-Two-approach-to-implement-the-Template-Engine"><a href="#III-Two-approach-to-implement-the-Template-Engine" class="headerlink" title="III. Two approach to implement the Template Engine"></a>III. Two approach to implement the Template Engine</h3><ol>
<li><p>Two main phases: <strong>parsing the template</strong>, and then <strong>rendering the template</strong></p>
</li>
<li><p>For ‘parsing phase’:</p>
</li>
</ol>
<ul>
<li>interpretation (Django )</li>
<li>compilation (Jinja2 and Mako | also, we will use)</li>
</ul>
<h3 id="IV-Compiling-to-Python"><a href="#IV-Compiling-to-Python" class="headerlink" title="IV. Compiling to Python"></a>IV. Compiling to Python</h3><ol>
<li>The template engine will compile templates to Python method called <strong>“render_function(context, do_dots)”</strong></li>
<li>context dictionary : carry kinds of dynamic variables to be embedded in template</li>
<li>do_dots method: passed-in method name, handling dot access</li>
</ol>
<h3 id="V-Code-bulider"><a href="#V-Code-bulider" class="headerlink" title="V. Code_bulider"></a>V. Code_bulider</h3><ol>
<li>Being called by template object, to help to read passed-in lines, using <strong>‘add-line()’</strong></li>
<li>Integrate lines into a well-formed python script</li>
<li>return to templage object the final executable script by calling “ exec(python_source, global_namespace)”</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Code-builder</span><br><span class="line">    |__   add_line()    : read in ready-to-run python lines</span><br><span class="line">    |__   add_section() : set aside space for later variable assignment</span><br><span class="line">    |__   indent()      : indent to form well-formed python</span><br><span class="line">    |__   dedent()      : dedent to form well-formed python</span><br><span class="line">    |__   get_globles() : 1- call "exec(python_source, global_namespace)"</span><br><span class="line">                          2- return executable script by calling get_globles()['render_function']</span><br></pre></td></tr></table></figure>
<h3 id="VI-Template"><a href="#VI-Template" class="headerlink" title="VI. Template"></a>VI. Template</h3><ol>
<li>used to handle template, and parse it into executable lines</li>
<li>call functions of Code-builder object, to produce an executable script to output ‘HTML string’</li>
<li>with helper function: do_dots()</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Template</span><br><span class="line">    |__   __init__(context):   1- read context( ie, values for var in template )</span><br><span class="line">    |                          2- break down template text by Regex into 4 cases</span><br><span class="line">    |                          3- call functions of Code_bulider to produce HTML</span><br><span class="line">    |</span><br><span class="line">    |__   4 cases:             1- Literal content(pure string)</span><br><span class="line">    |                          2- &#123;&#123; ..... &#125;&#125; variables, converted to string</span><br><span class="line">    |                             For case 1 and 2, just concatenate them;</span><br><span class="line">    |                          3- &#123;# ..... #&#125;</span><br><span class="line">    |                             Just ignore</span><br><span class="line">    |                          4- &#123;% ..... %&#125; control statements</span><br><span class="line">    |                             4.1- ops_stack() for nested control statements</span><br><span class="line">    |                             4.2- filter_handler() for 'var|upper'</span><br><span class="line">    |                             4.3- indent()/ dedent()</span><br><span class="line">    |</span><br><span class="line">    |__   self._render_function() = code.get_globles['render_function'];</span><br><span class="line">    |</span><br><span class="line">    |__   render():             calls self._render_function() with context param</span><br></pre></td></tr></table></figure>
<h3 id="VII-Template-Test"><a href="#VII-Template-Test" class="headerlink" title="VII. Template Test"></a>VII. Template Test</h3><ul>
<li>great introduction of unittest: <a href="https://www.jianshu.com/p/38948d0d73f5" target="_blank" rel="noopener">https://www.jianshu.com/p/38948d0d73f5</a></li>
<li>unittest是Python自带的单元测试框架，我们可以用其来作为我们自动化测试框架的用例组织执行框架</li>
</ul>
<ol>
<li>unittest的流程：写好TestCase，然后由TestLoader加载TestCase到TestSuite，然后由TextTestRunner来运行TestSuite，运行的结果保存在TextTestResult中，我们通过命令行或者unittest.main()执行时，main会调用TextTestRunner中的run来执行，或者我们可以直接通过TextTestRunner来执行用例。</li>
<li>一个class继承unittest.TestCase即是一个TestCase，其中以 test 开头的方法在load时被加载为一个真正的TestCase。</li>
<li>verbosity参数可以控制执行结果的输出，0 是简单报告、1 是一般报告、2 是详细报告。<br>可以通过addTest和addTests向suite中添加case或suite，可以用TestLoader的loadTestsFrom__()方法</li>
<li>用 setUp()、tearDown()、setUpClass()以及 tearDownClass()可以在用例执行前布置环境，以及在用例执行后清理环境</li>
<li>我们可以通过skip，skipIf，skipUnless装饰器跳过某个case，或者用TestCase.skipTest方法。<br>参数中加stream，可以将报告输出到文件：可以用TextTestRunner输出txt报告，以及可以用HTMLTestRunner输出html报告。</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/27/Weather-Chat/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/27/Weather-Chat/" itemprop="url">Weather Chat</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-27T09:22:46-08:00">2018-01-27</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Portfolios/" itemprop="url" rel="index"><span itemprop="name">Portfolios</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/27/Weather-Chat/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/01/27/Weather-Chat/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>A weather query web application, enabling real-time group chat and scrolling message display</p>
<p>Tech stacks: <strong>HTML, Bootstrap, AngularJS, Wilddog NoSQL Database</strong></p>
<p><a href="http://www-scf.usc.edu/~mingkaic/Interactive%20Weather%20Forcast%20Panel/#/" target="_blank" rel="noopener"><br>    <img src="/2018/01/27/Weather-Chat/weather_chat.jpg" title="This is an image"><br></a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/10/ES6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/10/ES6/" itemprop="url">ES6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-10T20:21:44-08:00">2018-01-10</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/10/ES6/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/01/10/ES6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="I-JavaScript-is-OOP"><a href="#I-JavaScript-is-OOP" class="headerlink" title="I. JavaScript is OOP"></a>I. JavaScript is OOP</h2><blockquote>
<p>JS的始末、与Java的区别：<a href="https://juejin.im/entry/5975e76af265da6c2a74bc45" target="_blank" rel="noopener">https://juejin.im/entry/5975e76af265da6c2a74bc45</a></p>
</blockquote>
<p>JavaScript 是一种基于原型实现的面向对象的语言， 根本没有类的概念，全是 object ！</p>
<ol>
<li>通过 “prototype” 以及 “<em>proto</em>“ 来实现：类的继承<ul>
<li>“prototype” 以及 “<em>proto</em>“ 重要性：<a href="https://juejin.im/entry/5975e76af265da6c2a74bc45" target="_blank" rel="noopener">https://juejin.im/entry/5975e76af265da6c2a74bc45</a></li>
</ul>
</li>
<li>“函数／function”是一等公民，ie. is also an object <ul>
<li>实际上说的是它们和其他对象object都一样，也有自己的method，也可以被当作参数被传入／传出</li>
</ul>
</li>
<li><p>如何创在object对象—直接造！</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">    </span><br><span class="line"><span class="keyword">var</span> animal = &#123;</span><br><span class="line">	name : <span class="string">'animal'</span>,</span><br><span class="line">	eat : <span class="function"><span class="keyword">function</span>(<span class="params"> </span>)</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log( <span class="keyword">this</span>.name + <span class="string">'is eating'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">&#125;</span><br><span class="line">animal.eat( ) <span class="comment">// animal is eating"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>题外话： 由于对象并不和类关联， 我们可以随意地给这个对象增加属性！</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">animal.color = <span class="string">'black'</span>;   </span><br><span class="line"><span class="comment">// animal 现在多了一个 color 的属性</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>prototype: 继承</p>
<ul>
<li>继承：就是让两个对象建立关联！  </li>
<li>每个对象都有一个特殊的属性叫做<strong>proto</strong>， 可以用这个属性去关联另外一个对象（这个对象就是所谓的原型了）</li>
<li><p>例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"var dog&#123;</span></span><br><span class="line"><span class="string">	name = 'dog';</span></span><br><span class="line"><span class="string">	_proto_ = animal;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">var cat&#123;</span></span><br><span class="line"><span class="string">	name = 'cat';</span></span><br><span class="line"><span class="string">	_proto_ = animal;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">dog.eat( ); // dog is eating</span></span><br><span class="line"><span class="string">cat.eat( );   // cat is eating"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>例子分析：</p>
<ul>
<li>对象dog 的原型是animal (注意：也是一个对象)，  对象cat的原型也是animal 。</li>
<li>无论是dog还是cat ，都没有定义eat()方法， 那怎么可以调用呢？</li>
<li>当eat方法被调用的时候，先在自己的方法列表中寻找， 如果找不到，就去找原型中的方法， 如果原型中找不到， 就去原型的原型中去寻找……   最后找到Object那里， 如果还找不到， 那就是未定义了。</li>
</ul>
</li>
<li>与Java 联系：<ul>
<li>JVM虚拟机的时候， 也提到了一个对象在执行方法的时候，需要查找方法的定义，这个查找的次序也是先从本对象所属的类开始， 然后父类， 然后父类的父类…… 直到Object,  思路是一模一样的！</li>
<li>只不过Java 的方法定义是在class中， 而这个javascript 的方法就在对象里边， 现在我觉得似乎在对象里更加直观一点啊。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="II-OOP的4个特性："><a href="#II-OOP的4个特性：" class="headerlink" title="II. OOP的4个特性："></a>II. OOP的4个特性：</h2><ul>
<li><strong>封装(encapsulation)</strong>：把相关信息，无论数据或方法都存储在一个对象中的能力。</li>
<li><strong>聚合(combination)</strong>：将一个对象存储在另一个对象中的能力。(LinkedList <--> Node)</--></li>
<li><strong>继承(inheritance)</strong>：一个类依赖另一个类 （ 或一些类 ）中的一些性质和方法的能力。</li>
<li><strong>多态(polymorphism)</strong>：写一个函数或方法，他可以以各种不同形式工作的能力。</li>
</ul>
<h2 id="III-var-vs-let-vs-const"><a href="#III-var-vs-let-vs-const" class="headerlink" title="III. var vs let vs const"></a>III. <code>var</code> vs <code>let</code> vs <code>const</code></h2><ul>
<li>使用var声明的变量，其作用域为该语句所在的函数内，且存在变量提升现象；</li>
<li>使用let声明的变量，其作用域为该语句所在的代码块内，不存在变量提升；</li>
<li>使用const声明的是常量，在后面出现的代码中不能再修改该常量的值。但是其作用域为该语句所在的代码块内，因此不同的blcok可以继续定义同一个名字的const</li>
</ul>
<p><strong>1. var变量的局部作用域是函数级别的：使用区域上至函数头、下至函数尾</strong></p>
<ul>
<li>不同于 C 语言，在 C 中，作用域是块级别的。 JavaScript 中var变量没有块级作用域。</li>
<li>let变量作用域是块级的</li>
<li>js 中，函数中声明的变量在整个函数中都有定义。比如如下代码段，变量 i 和 value 虽然是在 for 循环代码块中被定义，但在代码块外仍可以访问 i 和 value。</li>
<li><p>例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">var</span> value = <span class="string">"hello world"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(i); <span class="comment">//输出10</span></span><br><span class="line">	<span class="built_in">console</span>.log(value);<span class="comment">//输出hello world</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>2. For Loop: <code>var</code> vs <code>let</code></strong></p>
<ul>
<li><p><code>var</code> declaring a variable in the head of a for loop creates a single binding (storage space) for that variable:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    arr.push(<span class="function"><span class="params">()</span> =&gt;</span> i);</span><br><span class="line">&#125;</span><br><span class="line">arr.map(<span class="function"><span class="params">x</span> =&gt;</span> x()); <span class="comment">// [3,3,3]</span></span><br></pre></td></tr></table></figure>
<p>  Every <code>i</code> in the bodies of the three arrow functions refers to the same binding, which is why they all return the same value.</p>
</li>
<li><p>If you <code>let</code> declare a variable, <strong><u>a new binding is created for each loop iteration</u></strong>:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i=<span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    arr.push(<span class="function"><span class="params">()</span> =&gt;</span> i);</span><br><span class="line">&#125;</span><br><span class="line">arr.map(<span class="function"><span class="params">x</span> =&gt;</span> x()); <span class="comment">// [0,1,2]</span></span><br></pre></td></tr></table></figure>
<p>  This time, each <code>i</code> refers to the binding of one specific iteration and preserves the value that was current at that time. Therefore, each arrow function returns a different value.</p>
</li>
<li><p>const works like var, but you can’t change the initial value of a const-declared variable:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeError: Assignment to constant variable</span></span><br><span class="line"><span class="comment">// (due to i++)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i=<span class="number">0</span>; i&lt;<span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<pre><code>Getting a fresh binding for each iteration may seem strange at first, but it is very useful whenever you use loops to create functions that refer to loop variables, as explained in a later section.
</code></pre><h2 id="IV-闭包：closure"><a href="#IV-闭包：closure" class="headerlink" title="IV 闭包：closure"></a>IV 闭包：closure</h2><ul>
<li>使内部函数可以访问定义在外部函数中的变量（常见于函数式编程）</li>
<li>假如我们要实现一系列的函数：add10，add20，它们的定义是 int add10(int n)。</li>
<li><p>为此我们构造了一个名为 adder 的构造器，如下：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> adder = <span class="function"><span class="keyword">function</span> (<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> base = x;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n + base;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> add10 = adder(<span class="number">10</span>);</span><br><span class="line"><span class="built_in">console</span>.log(add10(<span class="number">5</span>));</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> add20 = adder(<span class="number">20</span>);</span><br><span class="line"><span class="built_in">console</span>.log(add20(<span class="number">5</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>每次调用 adder 时，adder 都会返回一个函数给我们。我们传给 adder 的值，会保存在一个名为 base 的变量中。由于返回的函数在其中引用了 base 的值，于是 base 的引用计数被 +1。当返回函数不被垃圾回收时，则 base 也会一直存在。</p>
</li>
<li>我暂时想不出什么实用的例子来，如果想深入理解这块，可以看看这篇 <a href="http://coolshell.cn/articles/6731.html" target="_blank" rel="noopener">http://coolshell.cn/articles/6731.html</a></li>
</ul>
<h2 id="V-Event"><a href="#V-Event" class="headerlink" title="V. Event"></a>V. Event</h2><p>JavaScript 与 HTML 的交互是通过 事件(event) 来处理的</p>
<h2 id="VI-JS创建Object的7种方式"><a href="#VI-JS创建Object的7种方式" class="headerlink" title="VI. JS创建Object的7种方式"></a>VI. JS创建Object的7种方式</h2><p><a href="https://xxxgitone.github.io/2017/06/10/JavaScript%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E5%BC%8F/" target="_blank" rel="noopener">https://xxxgitone.github.io/2017/06/10/JavaScript%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%83%E7%A7%8D%E6%96%B9%E5%BC%8F/</a></p>
<ul>
<li><p>方法一：直接使用现有的 Object( )</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = <span class="keyword">new</span> <span class="built_in">Object</span>(); <span class="comment">// Create the object</span></span><br><span class="line">book.subject = <span class="string">"Perl"</span>; <span class="comment">// Assign properties to the object</span></span><br><span class="line"></span><br><span class="line">book.author  = <span class="string">"Mohtashim"</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>方法二：声明自己的 constructor</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Book</span>(<span class="params">title, author</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.title = title; </span><br><span class="line">    <span class="keyword">this</span>.author = author;</span><br><span class="line">	  <span class="keyword">this</span>.addPrice = addPrice; <span class="comment">//  Assign that method as property.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addPrice</span>(<span class="params">amount</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.price = amount; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> book1 = <span class="keyword">new</span> Book(‘Book Name’, ‘Aride’);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="VII-with-关键字"><a href="#VII-with-关键字" class="headerlink" title="VII. with 关键字"></a>VII. with 关键字</h2><ul>
<li>被用来作为用于引用一个对象的属性或方法的一种速记。</li>
<li><p>对象被指定成 with 关键字的参数，进而成为后面语句块的默认对象。这个对象的下的属性和方法可以不指定对象名而直接使用。</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> (object)&#123;</span><br><span class="line">   properties used without the object name and dot</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addPrice</span>(<span class="params">amount</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">with</span>(<span class="keyword">this</span>)&#123;</span><br><span class="line">       price = amount; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">book</span>(<span class="params">title, author</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.title = title; </span><br><span class="line">        <span class="keyword">this</span>.author  = author;</span><br><span class="line">        <span class="keyword">this</span>.price = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.addPrice = addPrice; <span class="comment">// Assign that method as property.</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="IX-JavaScript-Native-对象（6个）"><a href="#IX-JavaScript-Native-对象（6个）" class="headerlink" title="IX. JavaScript Native 对象（6个）"></a>IX. JavaScript Native 对象（6个）</h2><ul>
<li>Number Object</li>
<li>Boolean Object</li>
<li>String Object</li>
<li>Array Object</li>
<li>Date Object</li>
<li>Math Object</li>
<li>RegExp Object</li>
</ul>
<h2 id="X-func-…"><a href="#X-func-…" class="headerlink" title="X. ( func(){…} )( )"></a>X. ( func(){…} )( )</h2><ul>
<li><p>Putting () after something that evaluates to a function will call that function. So, hi() calls the function hi. Assuming hi returns a function then hi()() will call that function. Example:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="string">"hello there"</span>;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> returnedFunc = hi();  <span class="comment">// so returnedFunc equals function()&#123;return "hello there";&#125;;</span></span><br><span class="line"><span class="keyword">var</span> msg = hi()();         <span class="comment">// so msg now has a value of "hello there"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>If hi() doesn’t return a function, then hi()() will produce an error, similar to having typed something like “not a function”(); or 1232();.</p>
</li>
</ul>
<h2 id="XI-Array-map"><a href="#XI-Array-map" class="headerlink" title="XI. Array.map( )"></a>XI. Array.map( )</h2><p>creates a new array with the results of calling a function for every array element</p>
   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> names = [<span class="string">'Alice'</span>, <span class="string">'Emily'</span>, <span class="string">'Kate'</span>];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionName</span>(<span class="params"> var </span>)</span>&#123;  <span class="keyword">var</span> = <span class="keyword">var</span> + <span class="string">'!'</span> ; &#125;</span><br><span class="line"><span class="keyword">var</span> names.map(functionName);</span><br></pre></td></tr></table></figure>
<h2 id="XII-this-and-bind"><a href="#XII-this-and-bind" class="headerlink" title="XII. this and bind()"></a>XII. <code>this</code> and <code>bind()</code></h2><ol>
<li><code>this</code> 的问题：谁调用的函数，this就指向谁<strong>（一定看link）</strong><br><strong>link</strong>：<a href="https://github.com/alsotang/node-lessons/tree/master/lesson11" target="_blank" rel="noopener">https://github.com/alsotang/node-lessons/tree/master/lesson11</a></li>
</ol>
<ol start="2">
<li><p>bind( ): 指明 this 所指的对象</p>
<ul>
<li><p>JS背景： </p>
<ul>
<li>function也是一个对象object，因此也有自己的method <code>bind()</code>, <code>apply()</code>, <code>call()</code></li>
<li>func( ) 的调用，实际是隐式的对象调用: retrieveX(); 是在全局scope调用，因此相当于window.func( ) </li>
</ul>
</li>
<li><p>bind(obj)方法实际创建了一个新函数，将参数obj绑定到原函数之上，使this有了新的实体【 this:灵魂  — obj:实体 】<br>“The bind() method creates a new function that, when called, has its this keyword set to the provided value,”</p>
</li>
<li><p>例子</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = &#123;</span><br><span class="line">  x: <span class="number">42</span>,</span><br><span class="line">  getX: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> retrieveX = <span class="built_in">module</span>.getX;</span><br><span class="line"><span class="built_in">console</span>.log(retrieveX()); <span class="comment">// The function gets invoked at the global scope</span></span><br><span class="line"><span class="comment">// expected output: undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> boundGetX = retrieveX.bind(<span class="built_in">module</span>);</span><br><span class="line"><span class="built_in">console</span>.log(boundGetX());</span><br><span class="line"><span class="comment">// expected output: 42</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>bind实现函数借用（相当于Java“继承父类的方法”）</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1-----user 对象</span></span><br><span class="line"><span class="keyword">var</span> user = &#123;</span><br><span class="line">    data    :[</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"T. Woods"</span>, <span class="attr">age</span>:<span class="number">37</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"P. Mickelson"</span>, <span class="attr">age</span>:<span class="number">43</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    </span><br><span class="line">    showData: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.data[<span class="number">0</span>].name + <span class="string">" "</span> + <span class="keyword">this</span>.data[<span class="number">0</span>].age);</span><br><span class="line">    &#125;</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"> <span class="comment">// 2-----cars 对象</span></span><br><span class="line"><span class="keyword">var</span> cars = &#123;</span><br><span class="line">    data:[</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"Honda Accord"</span>, <span class="attr">age</span>:<span class="number">14</span>&#125;,</span><br><span class="line">        &#123;<span class="attr">name</span>:<span class="string">"Tesla Model S"</span>, <span class="attr">age</span>:<span class="number">2</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">​</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line"><span class="comment">// 我们从之前定义的 user 对象借用 showData 方法</span></span><br><span class="line"><span class="comment">// 这里我们将 user.showData 方法绑定到刚刚新建的 cars 对象上​</span></span><br><span class="line">cars.showData = user.showData.bind(cars);</span><br><span class="line">cars.showData(); <span class="comment">// Honda Accord 14​</span></span><br><span class="line">​</span><br></pre></td></tr></table></figure>
</li>
<li><p>user、cars是两个object。</p>
</li>
<li>user有自己的method user.showData</li>
<li>user.showData.bind(cars); bind( ) 会将showData这个function生成一个新的函数，函数体中的this编程了cars object，从而实现的函数借用的目的</li>
<li>弊端：如果cars中也有自己showData method，使用bind有可能将自己的method覆盖；好的方式是使用 call／apply</li>
</ul>
</li>
</ol>
<h2 id="XIII-call-amp-apply"><a href="#XIII-call-amp-apply" class="headerlink" title="XIII. call() &amp; apply()"></a>XIII. <code>call()</code> &amp; <code>apply()</code></h2><ul>
<li>JS背景： <ol>
<li>function也是一个对象object，因此也有自己的method <code>bind()</code>, <code>apply()</code>, <code>call()</code></li>
<li>fun( ) 的调用，实际是隐式的对象调用: retrieveX(); 是在全局scope调用，因此相当于window.retrieveX( ) </li>
</ol>
</li>
<li>类似Java Interface，很多object都可以使用这个function</li>
<li>call() 方法调用一个函数, 参数重指定的this的指向值和以及函数对应的传入参数</li>
<li><p>例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Product</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.price = price;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Food</span>(<span class="params">name, price</span>) </span>&#123;</span><br><span class="line">  Product.call(<span class="keyword">this</span>, name, price);</span><br><span class="line">  <span class="keyword">this</span>.category = <span class="string">'food'</span>;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Food(<span class="string">'cheese'</span>, <span class="number">5</span>).name);</span><br><span class="line"><span class="comment">// expected output: "cheese"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在下面的例子中，当调用greet方法的时候，该方法的this值会绑定到i对象。</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> reply = [<span class="keyword">this</span>.person, <span class="string">'Is An Awesome'</span>, <span class="keyword">this</span>.role].join(<span class="string">' '</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(reply);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">var</span> i = &#123;</span><br><span class="line">  person: <span class="string">'Douglas Crockford'</span>, <span class="attr">role</span>: <span class="string">'Javascript Developer'</span></span><br><span class="line">&#125;;</span><br><span class="line">    </span><br><span class="line">greet.call(i); <span class="comment">// Douglas Crockford Is An Awesome Javascript Developer</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="XIV-CommonJS：是一个规范"><a href="#XIV-CommonJS：是一个规范" class="headerlink" title="XIV. CommonJS：是一个规范"></a>XIV. CommonJS：是一个规范</h2><ul>
<li>CommonJS 是以在浏览器环境之外构建 JavaScript 生态系统为目标而产生的项目，比如在服务器和桌面环境中。</li>
<li>CommonJS 规范是为了解决 JavaScript 的作用域问题而定义的模块形式，可以使每个模块它自身的命名空间中执行。该规范的主要内容是</li>
<li>模块必须通过 module.exports 导出对外的变量或接口，通过 require() 来导入其他模块的输出到当前模块作用域中。</li>
<li><p>一个直观的例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// moduleA.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params"> value </span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// moduleB.js</span></span><br><span class="line"><span class="keyword">var</span> multiplyBy2 = <span class="built_in">require</span>(<span class="string">'./moduleA'</span>);</span><br><span class="line"><span class="keyword">var</span> result = multiplyBy2(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="XV-CommonJS-import-vs-export"><a href="#XV-CommonJS-import-vs-export" class="headerlink" title="XV. CommonJS: import vs export"></a>XV. CommonJS: <code>import</code> vs <code>export</code></h2><ul>
<li><a href="http://es6.ruanyifeng.com/#docs/module#export-default-%E5%91%BD%E4%BB%A4" target="_blank" rel="noopener">http://es6.ruanyifeng.com/#docs/module#export-default-%E5%91%BD%E4%BB%A4</a></li>
<li><p><strong>正常情况：二者都要加花括号  { }</strong></p>
<ul>
<li>模块功能主要由两个命令构成：export和import。export命令用于规定模块的对外接口，import命令用于输入其他模块提供的功能。</li>
<li>一个模块就是一个独立的文件。该文件内部的所有变量，外部无法获取。如果你希望外部能够读取模块内部的某个变量，就必须使用export关键字输出该变量。下面是一个 JS 文件，里面使用export命令输出变量。</li>
<li><p>例子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// circle.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">area</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.PI * radius * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">circumference</span>(<span class="params">radius</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * <span class="built_in">Math</span>.PI * radius;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">现在，加载这个模块。</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; area, circumference &#125; <span class="keyword">from</span> <span class="string">'./circle'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'圆面积：'</span> + area(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'圆周长：'</span> + circumference(<span class="number">14</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">上面写法是逐一指定要加载的方法，整体加载的写法如下。</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> circle <span class="keyword">from</span> <span class="string">'./circle'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'圆面积：'</span> + circle.area(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'圆周长：'</span> + circle.circumference(<span class="number">14</span>));</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>default情况：不需要花括号 { }</strong></p>
<ul>
<li><p>使用情景：</p>
<ul>
<li>从前面的例子可以看出，使用import命令的时候，用户需要知道所要加载的变量名或函数名，否则无法加载。但是，用户肯定希望快速上手，未必愿意阅读文档，去了解模块有哪些属性和方法。</li>
<li>为了给用户提供方便，让他们不用阅读文档就能加载模块，就要用到export default命令，为模块指定默认输出。</li>
<li>export default命令用于指定模块的默认输出。显然，一个模块只能有一个默认输出，因此export default命令只能使用一次。所以，import命令后面才不用加大括号，因为只可能唯一对应export default命令。</li>
<li>本质上，export default就是输出一个叫做default的变量或方法，然后系统允许你为它取任意名字。所以，下面的写法是有效的。</li>
<li><p>例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// modules.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x * y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123;add <span class="keyword">as</span> <span class="keyword">default</span>&#125;;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="comment">// export default add;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> foo &#125; <span class="keyword">from</span> <span class="string">'modules'</span>;</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="comment">// import foo from 'modules';</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>比较： 下面比较一下默认输出和正常输出</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一组</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">crc32</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 输出</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> crc32 <span class="keyword">from</span> <span class="string">'crc32'</span>; <span class="comment">// 输入</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二组</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">crc32</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 输出</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;crc32&#125; <span class="keyword">from</span> <span class="string">'crc32'</span>; <span class="comment">// 输入"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="XVI-Spread-Operator展开运算符"><a href="#XVI-Spread-Operator展开运算符" class="headerlink" title="XVI. ...:Spread Operator展开运算符"></a>XVI. <code>...</code>:Spread Operator展开运算符</h2><p><a href="https://blog.fundebug.com/2017/07/19/master_object_spread_operator/" target="_blank" rel="noopener">https://blog.fundebug.com/2017/07/19/master_object_spread_operator/</a></p>
<ul>
<li><p>展开运算符将所有可枚举的属性从一个对象展开到另一个对象去。一个例子：</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">c</span>: <span class="number">3</span>, <span class="attr">d</span>: <span class="number">4</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, ...obj1 &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj2); <span class="comment">//&#123; a: 1, b: 2, c: 3, d: 4 &#125;</span></span><br><span class="line">                   <span class="comment">//obj1的所有属性被展开到obj2中去。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景1：deep copy</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">123</span>, <span class="attr">b</span>: <span class="number">456</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> objCopy = &#123; ...obj &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(objCopy); </span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123; a: 123, b: 456 &#125;</span></span><br><span class="line"><span class="comment">// 注意： 不会递归地深度拷贝所有属性</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>应用场景2：合并多个对象</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">111</span>, <span class="attr">b</span>: <span class="number">222</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">c</span>: <span class="number">333</span>, <span class="attr">d</span>: <span class="number">444</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> merged = &#123; ...obj1, ...obj2 &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(merged);</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123; a: 111, b: 222, c: 333, d: 444 &#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Template-literals"><a href="#Template-literals" class="headerlink" title="Template literals: `     `"></a>Template literals: `     `</h2><ul>
<li>处理字符串中变量:使用 <code>{ }</code>包含起来</li>
<li>use the ` around a series of characters, which are interpreted as a string literal; </li>
<li><p>But any expressions of the form ${..} are parsed and evaluated inline immediately.</p>
</li>
<li><p>为什么用它？—简洁</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Fifteen is '</span> + (a + b) + <span class="string">' and \n not '</span> + (<span class="number">2</span> * a + b) + <span class="string">'.'</span>);</span><br><span class="line"><span class="comment">// "Fifteen is 15 and</span></span><br><span class="line"><span class="comment">// not 20."</span></span><br><span class="line"></span><br><span class="line">----------------------------------</span><br><span class="line">控制打印更简单，不用\n，直接断行。如下： </span><br><span class="line">----------------------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Fifteen is <span class="subst">$&#123;a + b&#125;</span> and</span></span><br><span class="line"><span class="string">not <span class="subst">$&#123;<span class="number">2</span> * a + b&#125;</span>.`</span>);</span><br><span class="line"><span class="comment">// "Fifteen is 15 and</span></span><br><span class="line"><span class="comment">// not 20.""</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="XVII-Special-Variables"><a href="#XVII-Special-Variables" class="headerlink" title="XVII. Special Variables $, $$, _"></a>XVII. Special Variables <code>$</code>, <code>$$</code>, <code>_</code></h2><ul>
<li><strong>Using <code>$</code></strong><ul>
<li>For instance, the $ variable has been made popular by several JavaScript libraries, most notably jQuery. You can use it to alias operations that are commonly performed, such as the following (1):</li>
<li>var $ = document.getElementById;</li>
<li>var myElement = $(‘targetElement’);</li>
<li>If you declare this variable outside of a function it will be a global variable and will compete with libraries that use the same global variable, so it’s probably best not to use it.</li>
<li>Interestingly, originally the dollar sign $ was originally intended for ‘mechanically generated code’ (2), but as the usage of the symbol has become popular for other purposes, it looks like the latest version of JavaScript (ECMAScript 5th edition) now officially ‘oks’ its use:</li>
<li>This standard specifies specific character additions: The dollar sign ($) and the underscore (_) are permitted anywhere in an IdentifierName.</li>
</ul>
</li>
<li><strong>Using <code>$$</code></strong><ul>
<li>Some have come up with the solution of simply using two or more $$ symbols in order to distinguish the variable from libraries that just use a single $:</li>
<li>var $$ = document.getElementById;</li>
<li>var myElement = $$(‘targetElement’);</li>
</ul>
</li>
<li><strong>Using <code>_</code></strong><ul>
<li>You will find that you can use the underscore _ in the same way to alias variables and functions:</li>
<li>var _ = document.getElementById;</li>
<li>var myElement = _(‘targetElement’);</li>
</ul>
</li>
<li><strong>Other symbols</strong><ul>
<li>If you’re really getting adventurous, you can even try using other symbols such as square root √, which seems to work just fine, just as $ and _ above. The</li>
</ul>
</li>
</ul>
<h2 id="XVIII-Array-map-filter-reduce"><a href="#XVIII-Array-map-filter-reduce" class="headerlink" title="XVIII. Array: map(), filter(), reduce()"></a>XVIII. Array: <code>map(), filter(), reduce()</code></h2><p>Array的几个常用方法: 包含<strong>filter()，map()，sort()，reduce()</strong>，可在 Console 面板中查看结果。</p>
<blockquote>
<p>map(), filter(), reduce() 不会修改原来Array；而是生成新的Array或者Object</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">第一组：inventors数组，包含名、姓、出生日期以及死亡日期</span><br><span class="line">    <span class="keyword">const</span> inventors = [</span><br><span class="line">          &#123; <span class="attr">first</span>: <span class="string">'Albert'</span>, <span class="attr">last</span>: <span class="string">'Einstein'</span>, <span class="attr">year</span>: <span class="number">1879</span>, <span class="attr">passed</span>: <span class="number">1955</span> &#125;,</span><br><span class="line">           ......</span><br><span class="line">          &#123; <span class="attr">first</span>: <span class="string">'Hanna'</span>, <span class="attr">last</span>: <span class="string">'Hammarström'</span>, <span class="attr">year</span>: <span class="number">1829</span>, <span class="attr">passed</span>: <span class="number">1909</span> &#125;</span><br><span class="line">        ];</span><br><span class="line"></span><br><span class="line">第二组：people数组，包含一组人名，名姓之间用逗号分隔。</span><br><span class="line">    <span class="keyword">const</span> people = [<span class="string">'Beck, Glenn'</span>, ...... , <span class="string">'Blake, William'</span>];</span><br></pre></td></tr></table></figure>
<ol>
<li><p><code>filter()</code>过滤操作，筛选符合条件的所有元素，若为true则返回组成新数组：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">eg: 筛选出生于<span class="number">16</span>世纪的发明家</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bornyear</span>(<span class="params">inventor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> inventor.year &gt;= <span class="number">1500</span> &amp;&amp; inventor.year &lt; <span class="number">1600</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fifteen = inventors.filter(bornyear);</span><br><span class="line"><span class="built_in">console</span>.table(fifteen);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可简化为</span></span><br><span class="line"><span class="keyword">const</span> fifteen = inventors.filter(<span class="function"><span class="params">inventor</span> =&gt;</span> (inventor.year &gt;= <span class="number">1500</span> &amp;&amp; inventor.year &lt; <span class="number">1600</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>map()</code>映射操作，对原数组每个元素进行处理，并回传新的数组;</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">eg: 以数组形式，列出其名与姓: </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fullnames = inventors.map(<span class="function"><span class="params">inventor</span> =&gt;</span> <span class="string">`<span class="subst">$&#123;inventor.first&#125;</span> <span class="subst">$&#123;inventor.last&#125;</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.table(fullnames);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>sort()</code>排序操作，默认排序顺序是根据字符串Unicode码点，如10在2之前,而数字又在大写字母之前, 大写字母在小写字母之前。也可使用比较函数，数组会按照调用该函数的返回值排序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">eg: 根据其出生日期，并从大到小排序；</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> birthdate = inventors.sort(<span class="function">(<span class="params">inventora, inventorb</span>) =&gt;</span> (inventorb.year - inventora.year));</span><br><span class="line">    <span class="built_in">console</span>.table(birthdate)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>reduce()</code>归并操作，总共两个参数，</p>
<ul>
<li>第一个是函数，可以理解为累加器，遍历数组累加回传的返回值  </li>
<li><p>第二个是初始数值。如果没有提供初始值，则将使用数组中的第一个元素。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">eg: 计算所有的发明家加起来一共活了几岁；</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> totalyears = inventors.reduce(</span><br><span class="line">(total, inventor) =&gt; &#123; <span class="keyword">return</span> total + (inventor.passed -inventor.year); &#125; </span><br><span class="line">, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(totalyears);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="XIX-NO-variables-inside-class"><a href="#XIX-NO-variables-inside-class" class="headerlink" title="XIX. NO variables inside class"></a>XIX. NO variables inside <code>class</code></h2><p><a href="https://stackoverflow.com/questions/41989783/use-of-const-in-react-classes-and-meteor" target="_blank" rel="noopener">https://stackoverflow.com/questions/41989783/use-of-const-in-react-classes-and-meteor</a></p>
<blockquote>
<p>In ES6 it is not possible to define variables inside the  class. Only methods would be possible.</p>
</blockquote>
<blockquote>
<p>Technically when you write <code>const</code>, <code>var</code>, <code>let</code> inside a class you are defining a variable name, even though I know you tried to create the function.</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// No.1-1: Wrong</span></span><br><span class="line">  <span class="keyword">const</span> Test = <span class="function"><span class="params">()</span> =&gt;</span>  &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">".."</span> /&gt;</span>);</span></span><br><span class="line"><span class="xml">  &#125;</span></span><br><span class="line"><span class="xml">  </span></span><br><span class="line"><span class="xml">  // No.1-2: Correct</span></span><br><span class="line"><span class="xml">  Test = () =&gt;  &#123;</span></span><br><span class="line">    return (&lt;img src=".." /&gt;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // No.2-1: Wrong</span><br><span class="line">  userExitExam: function()&#123;</span><br><span class="line">    const &#123; dispatch &#125; = this.props;</span><br><span class="line">    dispatch(exitExam());</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // No.2-2: Correct</span><br><span class="line">  userExitExam()&#123;</span><br><span class="line">    const &#123; dispatch &#125; = this.props;</span><br><span class="line">    dispatch(exitExam());</span><br><span class="line">  &#125;.bind(this)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">  render()&#123;</span><br><span class="line">    return(&lt;img src=".." /&gt;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>eg 1-1:</strong> Begining with <code>const</code>, <code>Test</code> is a variable, pointing to a function: not allowed in ES6 <code>class</code>;</li>
<li><strong>eg 1-2:</strong> <code>Test</code> now is a function declaration; also with <code>=&gt;</code> function, it implicitly <code>.bind(this)</code></li>
<li><strong>eg 2-1:</strong> Rediculous! It intentionally means ‘key:val’ pairs inside an object; However, there is no obj</li>
<li><strong>eg 2-2:</strong> regular function declaration; But need to <code>.bind(this)</code> explicitly</li>
</ul>
<h2 id="XX-variable-Hoisting（变量提升）"><a href="#XX-variable-Hoisting（变量提升）" class="headerlink" title="XX. variable Hoisting（变量提升）"></a>XX. variable Hoisting（变量提升）</h2><ul>
<li><p>使用<code>var</code>声明的变量，无论声明在何处，都会被提至其<strong>所在作用域</strong>的顶部）</p>
</li>
<li><p>而且只是“声明提升declaration hoisting”， 不是“值提升 assignment hoisting”</p>
</li>
</ul>
<h2 id="XXI-Import的变量是read-only"><a href="#XXI-Import的变量是read-only" class="headerlink" title="XXI. Import的变量是read-only"></a>XXI. Import的变量是<code>read-only</code></h2><blockquote>
<p>That is how ES6 modules work - imports are constant. Only the module that exports them can change them, which then propagates to all modules that import them.</p>
</blockquote>
<p>如果需要改变的话，设置setter&amp; getter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> value = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setValue</span>(<span class="params">newValue: number</span>) </span>&#123;</span><br><span class="line">    value = newValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.ts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> a <span class="keyword">from</span> <span class="string">"./a"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">load</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    a.setValue(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-categories" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/23/React-Learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mingkai Cao">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/sea.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMK">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/23/React-Learning/" itemprop="url">React Learning</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-23T12:23:00-08:00">2017-12-23</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Full-stack/" itemprop="url" rel="index"><span itemprop="name">Full stack</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/12/23/React-Learning/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments:</span> <span class="post-comments-count valine-comment-count" data-xid="/2017/12/23/React-Learning/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="0-组件数据流-Model-gt-View"><a href="#0-组件数据流-Model-gt-View" class="headerlink" title="0. 组件数据流: Model -&gt; View"></a>0. 组件数据流: Model -&gt; View</h2><ul>
<li><p>父组件M -&gt; 子组件V</p>
<ul>
<li>父组件prop 之间传给 子组件 prop</li>
</ul>
</li>
<li><p>子组件M -&gt; 父组件V</p>
<ul>
<li>回调函数<ul>
<li>父组件向子组件传递回调函数</li>
<li>JS中，function是一等公民，因此传入的值会作为自身field保存起来；与C／Java不同。</li>
</ul>
</li>
</ul>
</li>
<li>sibling 组件间传值 M-&gt;V<ul>
<li>必须依靠二者共同父组件来传递<ul>
<li>但等组件之间的关系越来越复杂时候，这种依靠父组件作为中间人传值方式 would be a mess！</li>
<li>Redux comes into picture</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-双向绑定-Model-View"><a href="#1-双向绑定-Model-View" class="headerlink" title="1. 双向绑定: Model  View"></a>1. 双向绑定: Model <-> View</-></h2><ul>
<li>通过绑定<code>&lt;input&gt;</code>的 <code>onChange()</code> 监视 View的变换</li>
<li>在 onChange Handler中更新组件的值，完成 View =&gt; Model 的数据流。</li>
</ul>
<h2 id="2-React-生命周期"><a href="#2-React-生命周期" class="headerlink" title="2. React 生命周期"></a>2. React 生命周期</h2><ul>
<li>Mount<ul>
<li>constructor()</li>
<li>componentWillMount()</li>
<li>render()</li>
<li>componentDidMount()</li>
</ul>
</li>
<li>Update<ul>
<li>componentWillReceiveProps(): 将接收新的props</li>
<li>shouldComponentUpdate(): 是否应该被更新？</li>
<li>componentWillUpdate(): 组件即将更新</li>
<li>render(): 组件被渲染</li>
<li>componentDidUpdate(): 组件完成更新</li>
</ul>
</li>
<li>Unmount<ul>
<li>componentWillUnmount(): 组件被卸载前做一些数据清楚哦给你做</li>
</ul>
</li>
</ul>
<h2 id="3-Depedency"><a href="#3-Depedency" class="headerlink" title="3. Depedency"></a>3. Depedency</h2><ul>
<li>In <code>&lt;head&gt;</code>, we needs three <code>&lt;script&gt;</code> in order to use React, that is, “react.js”,”react-dom.js”,”browser.min.js”</li>
<li><p>In <code>&lt;body&gt;</code> where we manipulate JSX, we use a special <code>&lt;script type=&quot;text/babel&quot; &gt;</code>, whose typel is “text/babel”</p>
</li>
<li><p>In order to make faster rendering at client-side, use “ $ babel src –out-dir build “, parsing all JSX file at directory ‘src’ into javascript files at directory ‘build’, where browser could recognize.</p>
</li>
</ul>
<h2 id="4-ReactDOM-render"><a href="#4-ReactDOM-render" class="headerlink" title="4. ReactDOM.render();"></a>4. ReactDOM.render();</h2><ul>
<li>what? :It is a basic method used everywhere</li>
<li>converting JSX into HTML;</li>
<li>inserting HTML at specified DOM point</li>
</ul>
<h2 id="5-JSX"><a href="#5-JSX" class="headerlink" title="5. JSX"></a>5. JSX</h2><ul>
<li><p>what?<br>JavaScript XML </p>
</li>
<li><p>“logic” + “view”</p>
<ul>
<li>not spring (no quotes “” )</li>
<li>not HTML ( more of XML )</li>
<li>support “tag + expression”</li>
</ul>
</li>
<li><p>How to parse?</p>
<ul>
<li>for tags (begin with “&lt;”), parse as HTML</li>
<li>for code block(begin with “{“), parse as JavaScript</li>
</ul>
</li>
</ul>
<h2 id="6-JSX-can-contain-tag-array"><a href="#6-JSX-can-contain-tag-array" class="headerlink" title="6. JSX can contain tag array"></a>6. JSX can contain tag array</h2><p>JSX can unfold all tag in a array</p>
<h2 id="7-Component"><a href="#7-Component" class="headerlink" title="7. Component"></a>7. Component</h2><ul>
<li>what? A component is function,</li>
<li>accepting “input”(props), </li>
<li><p>returnnig “view”(HTML tag)</p>
</li>
<li><p>How to create a component?</p>
<ol>
<li><p>functional component</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 因为不是class概念，只是方程式，因此直接使用props，不使用this前缀</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">"Sara"</span> /&gt;</span>;</span></span><br><span class="line"><span class="xml">ReactDOM.render(</span></span><br><span class="line"><span class="xml">    element,</span></span><br><span class="line"><span class="xml">    document.getElementById('root')</span></span><br><span class="line"><span class="xml">);</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>class component</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注意：必须加前缀：this；这样才能取到绑定在Welcome上的props</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">"Sara"</span> /&gt;</span>;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<ul>
<li><p>Notice</p>
<ul>
<li>If a group of tags don’t need its own props or states, just declare it as <em>const</em>, rather than component. [ see demo14 &amp; demo14-2]</li>
<li>Component should have no more than one top tag</li>
</ul>
</li>
</ul>
<h2 id="8-this-props-children"><a href="#8-this-props-children" class="headerlink" title="8. this.props.children"></a>8. this.props.children</h2><ul>
<li><p>what?</p>
<p> All the properties of a Component belongs to its correspoinding HTML element, except “props.children”, which represent components’ children</p>
</li>
<li><p>possible types for children</p>
<ul>
<li>undefined, if no child at all;</li>
<li>object, if only have one child;</li>
<li>array, if have multiple children;</li>
</ul>
</li>
<li><p>How to traverse properly without error?</p>
<p>  use React.Children to ensure validity</p>
</li>
</ul>
<h2 id="9-Composing-Components"><a href="#9-Composing-Components" class="headerlink" title="9. Composing Components"></a>9. Composing Components</h2><ul>
<li><p>What?</p>
<ul>
<li>A button, a form, a dialog, a screen: in React apps, all those are commonly expressed as components.</li>
<li>On the other hand, we typically have an ‘App’ component at the top level</li>
<li><em>Best Practice:</em> start from bottom-up, work along to the top level</li>
</ul>
</li>
<li><p>How?</p>
<p>  Reuse components just like “li” in “ul”</p>
</li>
</ul>
<h2 id="10-Extracting-Components"><a href="#10-Extracting-Components" class="headerlink" title="10. Extracting Components"></a>10. Extracting Components</h2><ul>
<li>What?<br>  Split components into smaller components, to achieve more flexibility and reusability.</li>
<li>How?<ul>
<li>Split by functionality</li>
<li>One component can contain multiple sub-components</li>
</ul>
</li>
</ul>
<h2 id="11-State-like-‘props’"><a href="#11-State-like-‘props’" class="headerlink" title="11. State (like ‘props’)"></a>11. State (like ‘props’)</h2><ul>
<li>Purpose? <ul>
<li>A non-static component, has its own “state”</li>
</ul>
</li>
<li>What?<ul>
<li>Actually it’s like pros, but “state” is private to component class, compared to “props”</li>
</ul>
</li>
<li>How?<ul>
<li>Use “state” in render(), when state changed, React will can render again.</li>
<li>Must use a <strong>Class Component</strong>, rather than <strong>function component</strong>.</li>
</ul>
</li>
<li>Diff<ul>
<li>this.props(<em>public:passed-in</em>) 表示那些一旦定义，就不再改变的特性</li>
<li>this.state(<em>private:built-in</em>)是会随着用户互动而产生变化的特性。</li>
<li>both are belongs to <strong>this</strong>.</li>
</ul>
</li>
<li>Constructor of component class<ul>
<li>First, always call <strong>super(props):</strong></li>
<li>Second, set <strong>this.state=…;</strong></li>
</ul>
</li>
</ul>
<h2 id="12-Adding-Lifecycle-Methods-to-a-Class"><a href="#12-Adding-Lifecycle-Methods-to-a-Class" class="headerlink" title="12. Adding Lifecycle Methods to a Class"></a>12. Adding Lifecycle Methods to a Class</h2><ul>
<li>purpose: In order to save CPU and memory</li>
<li><p>what involved?</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">componentDidMount()</span><br><span class="line">componentWillUnmount()</span><br><span class="line">setState()</span><br></pre></td></tr></table></figure>
</li>
<li><p>About setState()?</p>
<p>  Do Not Modify State Directly=&gt;instead using <strong>setState()</strong><br>  State Updates May Be Asynchronous=&gt; instead,again using setState() with its another form: use a function accepting ‘provState’ as it passed-in parameter to set the state</p>
</li>
<li><p>How?: work flow</p>
<ol>
<li>When <clock> is passed to ReactDOM.render(), React calls the constructor of the Clock component. Since Clock needs to display the current time, it initializes this.state with an object including the current time. We will later update this state.</clock></li>
<li>React then calls the Clock component’s render() method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the Clock’s render output.</li>
<li>When the Clock output is inserted in the DOM, React calls the componentDidMount() lifecycle hook. Inside it, the Clock component asks the browser to set up a timer to call the component’s tick() method once a second.</li>
<li>Every second the browser calls the tick() method. Inside it, the Clock component schedules a UI update by calling setState() with an object containing the current time. Thanks to the setState() call, React knows the state has changed, and calls the render() method again to learn what should be on the screen. This time, this.state.date in the render() method will be different, and so the render output will include the updated time. React updates the DOM accordingly.</li>
<li>If the Clock component is ever removed from the DOM, React calls the componentWillUnmount() lifecycle hook so the timer is stopped.</li>
</ol>
</li>
<li><p>state: parent &amp; children ?</p>
<ol start="0">
<li>state is isolated among components </li>
<li>Parent and Child shall not know if the other is stateful of stateless.</li>
<li>But there is a way for parent to pass down its own state to its children, by using <strong>‘props’</strong></li>
</ol>
</li>
</ul>
<h2 id="13-Events"><a href="#13-Events" class="headerlink" title="13. Events"></a>13. Events</h2><ul>
<li><p>What?<br>Substitute addEventListener(): to add listeners to a DOM element after it is created.</p>
</li>
<li><p>Diff ( virtual DOM vs. real DOM)</p>
<ul>
<li>React events are named using camelCase, rather than lowercase.</li>
<li>With JSX you pass a function as the event handler, rather than a string. 统一采用expression表达方法，写在’{}’中<ul>
<li>button onClick={activateLasers}</li>
<li>button onclick=”activateLasers()”</li>
</ul>
</li>
<li><p>Cannot return false to prevent default behavior in React. You must call preventDefault explicitly</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ActionLink</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleClick</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'The link was clicked.'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;a href=<span class="string">"#"</span> onClick=&#123;handleClick&#125;&gt;</span><br><span class="line">      Click me</span><br><span class="line">    &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>be carefull with ‘e’ &amp; ‘this’</p>
</li>
</ul>
</li>
</ul>
<h2 id="14-Conditional-Rendering"><a href="#14-Conditional-Rendering" class="headerlink" title="14. Conditional Rendering"></a>14. Conditional Rendering</h2><ul>
<li><p>what?</p>
<p>  display optionally between several components, based on a <em>state variable</em></p>
</li>
<li><p>How?</p>
<p> Have two <em>button components</em> as child_component of a parent component, toggling state of parent component, then resulting in another <em>display component</em> shows up or hide away. [see demo14]</p>
</li>
</ul>
<h2 id="15-List-and-keys"><a href="#15-List-and-keys" class="headerlink" title="15. List and keys"></a>15. List and keys</h2><ul>
<li><p>What?</p>
<ul>
<li>Array can produce a list of ‘li’, by using <em>map()</em> function.</li>
<li>‘Keys’ help React identify which items have changed, are added, or are removed. Keys should be given to the elements inside the array, in order to give the elements a stable identity</li>
</ul>
</li>
<li><p>Where to put ‘keys’?</p>
<p>  A good rule of thumb is that elements inside the map() call need keys.</p>
</li>
</ul>
<h2 id="16-Forms-gt-controlled-component"><a href="#16-Forms-gt-controlled-component" class="headerlink" title="16. Forms -&gt; controlled component"></a>16. Forms -&gt; controlled component</h2><ul>
<li><p>What ?</p>
<ul>
<li>Let React <strong>“state”</strong> be the “single source of truth”。<br>用React的state来保存form的用户输入</li>
<li><p>With a controlled component, every state mutation will have an associated handler function. This makes it straightforward to modify or validate user input. </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">handleChange(event) &#123;</span><br><span class="line">	<span class="keyword">this</span>.setState(&#123;<span class="attr">value</span>: event.target.value.toUpperCase()&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Which ?</p>
<ol>
<li><p>input element <---> state &amp; state_handler</---></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; value=&#123;this.state.value&#125; onChange=&#123;this.handleChange&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>textarea <---> state &amp; state_handler</---></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea value=&#123;this.state.value&#125; onChange=&#123;this.handleChange&#125; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>select <---> state &amp; state_handler[similar to above ones: has its own “value” props]</---></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;select value=&#123;this.state.value&#125; onChange=&#123;this.handleChange&#125;&gt;</span><br><span class="line">// notice: &apos;value&apos; in &lt;select&gt; is not &apos;value&apos; in &lt;option&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>Handling Multiple Inputs</p>
<p> add a name attribute to each element and let the handler function choose what to do based on the value of event.target.name.</p>
</li>
</ul>
<h2 id="17-Lifting-State-Up-share-state-among-components-in-their-parent-component"><a href="#17-Lifting-State-Up-share-state-among-components-in-their-parent-component" class="headerlink" title="17. Lifting State Up ( share state among components in their parent component )"></a>17. Lifting State Up ( <strong>share state</strong> among components in their parent component )</h2><p>Sharing state is accomplished by moving it up to the closest common ancestor of the components that need it. This is called <strong>“lifting state up”</strong>. </p>
<ul>
<li><p>How</p>
<ol>
<li>parent component maintains several <strong>state variables</strong></li>
<li>child componnets receive parent’s <strong>state &amp;&amp; functions</strong> as their own <strong>props</strong> ( function can be passed to children component )</li>
<li>when children get updated, it will call parent’s function, and modify parent’s state, thus leading to re-rendering all its children components</li>
</ol>
</li>
<li><p>Work flow<br>Let’s recap what happens when you edit an input:</p>
<ol>
<li><p>React calls the function specified as onChange on the DOM <input>. In our case, this is the handleChange method in TemperatureInput component</p>
</li>
<li><p>The handleChange method in the TemperatureInput component calls this.props.onTemperatureChange() with the new desired value. Its props, including onTemperatureChange, were provided by its parent component, the Calculator</p>
</li>
<li><p>When it previously rendered, the Calculator has specified that onTemperatureChange of the Celsius TemperatureInput is the Calculator’s handleCelsiusChange method, and onTemperatureChange of the Fahrenheit TemperatureInput is the Calculator’s handleFahrenheitChange method. So either of these two Calculator methods gets called depending on which input we edited</p>
</li>
<li><p>Inside these methods, the Calculator component asks React to re-render itself by calling this.setState() with the new input value and the current scale of the input we just edited.</p>
</li>
<li><p>React calls the Calculator component’s render method to learn what the UI should look like. The values of both inputs are recomputed based on the current temperature and the active scale. The temperature conversion is performed here</p>
</li>
<li><p>React calls the render methods of the individual TemperatureInput components with their new props specified by the Calculator. It learns what their UI should look like</p>
</li>
<li><p>React DOM updates the DOM to match the desired input values. The input we just edited receives its current value, and the other input is updated to the temperature after conversion.</p>
</li>
</ol>
</li>
</ul>
<h2 id="18-Composition-vs-Inheritance"><a href="#18-Composition-vs-Inheritance" class="headerlink" title="18. Composition vs Inheritance"></a>18. Composition vs Inheritance</h2><ul>
<li><p>What?</p>
<p>  React prefer composition model, instead of inheritance, to reuse code between components.</p>
</li>
<li><p>How?</p>
<p>  Pass <strong>components</strong> to props just like <strong>data</strong>.</p>
</li>
<li><p>Inheritance via “Composition”?</p>
<p>  For example, we might say that a WelcomeDialog is a special case of Dialog.<br>  This can be achieved by composition, where a more “specific” component renders a more “generic” one and configures it with props:</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dialog</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FancyBorder color=<span class="string">"blue"</span>&gt;</span><br><span class="line">      &lt;h1 className=<span class="string">"Dialog-title"</span>&gt;</span><br><span class="line">        &#123;props.title&#125;</span><br><span class="line">      &lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p className="Dialog-message"&gt;</span></span><br><span class="line"><span class="regexp">        &#123;props.message&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>p&gt;</span><br><span class="line">    &lt;<span class="regexp">/FancyBorder&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">function WelcomeDialog() &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;Dialog</span></span><br><span class="line"><span class="regexp">      title="Welcome"</span></span><br><span class="line"><span class="regexp">      message="Thank you for visiting our spacecraft!" /</span>&gt;</span><br><span class="line"></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="19-Summary"><a href="#19-Summary" class="headerlink" title="19. Summary"></a>19. Summary</h2><h4 id="Steps-to-build-a-React-App"><a href="#Steps-to-build-a-React-App" class="headerlink" title="Steps to build a React App"></a>Steps to build a React App</h4><ul>
<li><p>Step 1: Break The UI Into A Component Hierarchy</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- FilterableProductTable</span><br><span class="line">	- SearchBar</span><br><span class="line">	- ProductTable</span><br><span class="line">		+ ProductCategoryRow</span><br><span class="line">		+ ProductRow</span><br></pre></td></tr></table></figure>
</li>
<li><p>Step 2: Build A Static Version in React (more typing, less thinking)</p>
<ul>
<li>build components that reuse other components and pass data using props.</li>
<li>don’t use state at all to build this static version</li>
</ul>
</li>
<li><p>Step 3: Identify The Minimal (but complete) Representation Of UI State</p>
<ul>
<li>To make your UI interactive, you need to be able to trigger changes to your underlying data model. React makes this easy with <strong>state</strong>.</li>
<li>Determine if a data is state by asking three questions:<ul>
<li>Is it passed in from a parent via props? If so, it probably isn’t state.</li>
<li>Does it remain unchanged over time? If so, it probably isn’t state.</li>
<li>Can you compute it based on any other state or props in your component? If so, it isn’t state.</li>
</ul>
</li>
</ul>
</li>
<li><p>Step 4: Identify Where Your State Should Live(more thinking, less typing)</p>
<ul>
<li>Identify every component that renders something based on that state. </li>
<li>Find a common owner component (a single component above all the components that need the state in the hierarchy).</li>
<li>Either the common owner or another component higher up in the hierarchy should own the state.</li>
<li>If you can’t find a component where it makes sense to own the state, create a new component simply for holding the state and add it somewhere in the hierarchy above the common owner component.As for the example:<ul>
<li>ProductTable needs to filter the product list based on state and + SearchBar needs to display the search text and checked state.</li>
<li>The common owner component is FilterableProductTable.</li>
<li>It conceptually makes sense for the filter text and checked value to live in FilterableProductTable</li>
</ul>
</li>
</ul>
</li>
<li><p>Step 5: Add Inverse Data Flow</p>
<ul>
<li>What?<ul>
<li>逻辑流：从上到下（ child components depends on <strong>state</strong> of parent component ）</li>
<li>数据流：从下到上（ <strong>state</strong> of parent component, get value from child component ）</li>
</ul>
</li>
<li>Example<ul>
<li>support data flowing the other way: the form components deep in the hierarchy need to update the state in FilterableProductTable.</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/sea.jpg"
                alt="Mingkai Cao" />
            
              <p class="site-author-name" itemprop="name">Mingkai Cao</p>
              <p class="site-description motion-element" itemprop="description">All-trade Jack, loves full-stack</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">64</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">114</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/caomingkai" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:mingkaic@usc.edu" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate"> 
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mingkai Cao</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.0.6</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.6"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.6"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.6"></script>



  



	





  





  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>

  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'hG8fgggWL7hK1jsXsRoVCNWv-MdYXbMMI',
        appKey: 'VRAYsgwdkRyyb8bAFQ5uii6o',
        placeholder: 'Any comment?',
        avatar:'',
        guest_info:guest,
        pageSize:'10' || 10,
    });
    // 新增以下代码即可，可以移除.info下所有子节点
    var infoEle = document.querySelector('#comments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0){
      infoEle.childNodes.forEach(function(item) {
        item.parentNode.removeChild(item);
      });
    }


  </script>



  





  

  

  

  

  
  

  

  

  

  


<style>
    #comments .vempty{
        display: none;
    }
</style>

</body>
</html>
